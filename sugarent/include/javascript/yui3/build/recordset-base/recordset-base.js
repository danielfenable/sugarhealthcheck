/*
     YUI 3.15.0 (build 834026e)
     Copyright 2014 Yahoo! Inc. All rights reserved.
     Licensed under the BSD License.
     http://yuilibrary.com/license/
     */
YUI.add('recordset-base',function(Y,NAME){var Record=Y.Base.create('record',Y.Base,[],{_setId:function(){return Y.guid();},initializer:function(){},destructor:function(){},getValue:function(field){if(field===undefined){return this.get("data");}
else{return this.get("data")[field];}
return null;}},{ATTRS:{id:{valueFn:"_setId"},data:{value:null}}});Y.Record=Record;var ArrayList=Y.ArrayList,Lang=Y.Lang,Recordset=Y.Base.create('recordset',Y.Base,[],{initializer:function(){if(!this._items){this._items=[];}
this.publish({add:{defaultFn:this._defAddFn},remove:{defaultFn:this._defRemoveFn},empty:{defaultFn:this._defEmptyFn},update:{defaultFn:this._defUpdateFn}});this._buildHashTable(this.get('key'));this.after(['recordsChange','add','remove','update','empty'],this._updateHash);},getRecord:function(i){if(Lang.isString(i)){return this.get('table')[i];}
else if(Lang.isNumber(i)){return this._items[i];}
return null;},getRecordByIndex:function(i){return this._items[i];},getRecordsByIndex:function(index,range){var i=0,returnedRecords=[];range=(Lang.isNumber(range)&&(range>0))?range:1;for(;i<range;i++){returnedRecords.push(this._items[index+i]);}
return returnedRecords;},getLength:function(){return this.size();},getValuesByKey:function(key){var i=0,len=this._items.length,retVals=[];for(;i<len;i++){retVals.push(this._items[i].getValue(key));}
return retVals;},add:function(oData,index){var newRecords=[],idx,i=0;idx=(Lang.isNumber(index)&&(index>-1))?index:this._items.length;if(Lang.isArray(oData)){for(;i<oData.length;i++){newRecords[i]=this._changeToRecord(oData[i]);}}else if(Lang.isObject(oData)){newRecords[0]=this._changeToRecord(oData);}
this.fire('add',{added:newRecords,index:idx});return this;},remove:function(index,range){var remRecords=[];index=(index>-1)?index:(this._items.length-1);range=(range>0)?range:1;remRecords=this._items.slice(index,(index+range));this.fire('remove',{removed:remRecords,range:range,index:index});return this;},empty:function(){this.fire('empty',{});return this;},update:function(data,index){var rec,arr,i=0;arr=(!(Lang.isArray(data)))?[data]:data;rec=this._items.slice(index,index+arr.length);for(;i<arr.length;i++){arr[i]=this._changeToRecord(arr[i]);}
this.fire('update',{updated:arr,overwritten:rec,index:index});return this;},_defAddFn:function(e){this._items.splice.apply(this._items,[e.index,0].concat(e.added));},_defRemoveFn:function(e){this._items.splice(e.index,e.range||1);},_defUpdateFn:function(e){for(var i=0;i<e.updated.length;i++){this._items[e.index+i]=this._changeToRecord(e.updated[i]);}},_defEmptyFn:function(e){this._items=[];},_updateHash:function(e){var handler="_hash",type=e.type.replace(/.*:/,''),newHash;handler+=type.charAt(0).toUpperCase()+type.slice(1);newHash=this[handler]&&this[handler](this.get('table'),this.get('key'),e);if(newHash){this.set('table',newHash);}},_hashRecordsChange:function(hash,key,e){return this._buildHashTable(key);},_buildHashTable:function(key){return this._hashAdd({},key,{added:this._items});},_hashAdd:function(hash,key,e){var items=e.added,i,len;for(i=0,len=e.added.length;i<len;++i){hash[items[i].get(key)]=items[i];}
return hash;},_hashRemove:function(hash,key,e){for(var i=e.removed.length-1;i>=0;--i){delete hash[e.removed[i].get(key)];}
return hash;},_hashUpdate:function(hash,key,e){if(e.overwritten&&e.overwritten.length){hash=this._hashRemove(hash,key,{removed:e.overwritten});}
return this._hashAdd(hash,key,{added:e.updated});},_hashEmpty:function(){return{};},_initHashTable:function(){return this._hashAdd({},this.get('key'),{added:this._items||[]});},_changeToRecord:function(obj){return(obj instanceof Y.Record)?obj:new Y.Record({data:obj});},_setRecords:function(items){if(!Y.Lang.isArray(items)){return Y.Attribute.INVALID_VALUE;}
var records=[],i,len;for(i=0,len=items.length;i<len;++i){records[i]=this._changeToRecord(items[i]);}
return(this._items=records);}},{ATTRS:{records:{lazyAdd:false,getter:function(){return Y.Array(this._items);},setter:"_setRecords"},table:{valueFn:'_initHashTable'},key:{value:'id',readOnly:true}}});Y.augment(Recordset,ArrayList);Y.Recordset=Recordset;},'3.15.0',{"requires":["base","arraylist"]});
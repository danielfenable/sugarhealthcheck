/*
     YUI 3.15.0 (build 834026e)
     Copyright 2014 Yahoo! Inc. All rights reserved.
     Licensed under the BSD License.
     http://yuilibrary.com/license/
     */
YUI.add('tabview',function(Y,NAME){var DOT='.',TabView=Y.Base.create('tabView',Y.Widget,[Y.WidgetParent],{_afterChildAdded:function(){this.get('contentBox').focusManager.refresh();},_defListNodeValueFn:function(){var node=Y.Node.create(this.LIST_TEMPLATE);node.addClass(Y.TabviewBase._classNames.tabviewList);return node;},_defPanelNodeValueFn:function(){var node=Y.Node.create(this.PANEL_TEMPLATE);node.addClass(Y.TabviewBase._classNames.tabviewPanel);return node;},_afterChildRemoved:function(e){var i=e.index,selection=this.get('selection');if(!selection){selection=this.item(i-1)||this.item(0);if(selection){selection.set('selected',1);}}
this.get('contentBox').focusManager.refresh();},_initAria:function(contentBox){var tablist=contentBox.one(Y.TabviewBase._queries.tabviewList);if(tablist){tablist.setAttrs({role:'tablist'});}},bindUI:function(){this.get('contentBox').plug(Y.Plugin.NodeFocusManager,{descendants:DOT+Y.TabviewBase._classNames.tabLabel,keys:{next:'down:39',previous:'down:37'},circular:true});this.after('render',this._setDefSelection);this.after('addChild',this._afterChildAdded);this.after('removeChild',this._afterChildRemoved);},renderUI:function(){var contentBox=this.get('contentBox');this._renderListBox(contentBox);this._renderPanelBox(contentBox);this._childrenContainer=this.get('listNode');this._renderTabs(contentBox);this._initAria(contentBox);},_setDefSelection:function(){var selection=this.get('selection')||this.item(0);this.some(function(tab){if(tab.get('selected')){selection=tab;return true;}});if(selection){this.set('selection',selection);selection.set('selected',1);}},_renderListBox:function(contentBox){var node=this.get('listNode');if(!node.inDoc()){contentBox.append(node);}},_renderPanelBox:function(contentBox){var node=this.get('panelNode');if(!node.inDoc()){contentBox.append(node);}},_renderTabs:function(contentBox){var _classNames=Y.TabviewBase._classNames,_queries=Y.TabviewBase._queries,tabs=contentBox.all(_queries.tab),panelNode=this.get('panelNode'),panels=(panelNode)?this.get('panelNode').get('children'):null,tabview=this;if(tabs){tabs.addClass(_classNames.tab);contentBox.all(_queries.tabLabel).addClass(_classNames.tabLabel);contentBox.all(_queries.tabPanel).addClass(_classNames.tabPanel);tabs.each(function(node,i){var panelNode=(panels)?panels.item(i):null;tabview.add({boundingBox:node,contentBox:node.one(DOT+_classNames.tabLabel),panelNode:panelNode});});}}},{ATTRS:{defaultChildType:{value:'Tab'},listNode:{setter:function(node){node=Y.one(node);if(node){node.addClass(Y.TabviewBase._classNames.tabviewList);}
return node;},valueFn:'_defListNodeValueFn'},panelNode:{setter:function(node){node=Y.one(node);if(node){node.addClass(Y.TabviewBase._classNames.tabviewPanel);}
return node;},valueFn:'_defPanelNodeValueFn'},tabIndex:{value:null}},HTML_PARSER:{listNode:function(srcNode){return srcNode.one(Y.TabviewBase._queries.tabviewList);},panelNode:function(srcNode){return srcNode.one(Y.TabviewBase._queries.tabviewPanel);}},LIST_TEMPLATE:'<ul></ul>',PANEL_TEMPLATE:'<div></div>'});TabView.prototype.LIST_TEMPLATE=TabView.LIST_TEMPLATE;TabView.prototype.PANEL_TEMPLATE=TabView.PANEL_TEMPLATE;Y.TabView=TabView;Y.Tab=Y.Base.create('tab',Y.Widget,[Y.WidgetChild],{BOUNDING_TEMPLATE:'<li></li>',CONTENT_TEMPLATE:'<a></a>',PANEL_TEMPLATE:'<div></div>',_uiSetSelectedPanel:function(selected){this.get('panelNode').toggleClass(Y.TabviewBase._classNames.selectedPanel,selected);},_afterTabSelectedChange:function(event){this._uiSetSelectedPanel(event.newVal);},_afterParentChange:function(e){if(!e.newVal){this._remove();}else{this._add();}},_initAria:function(){var anchor=this.get('contentBox'),id=anchor.get('id'),panel=this.get('panelNode');if(!id){id=Y.guid();anchor.set('id',id);}
anchor.set('role','tab');anchor.get('parentNode').set('role','presentation');panel.setAttrs({role:'tabpanel','aria-labelledby':id});},syncUI:function(){var _classNames=Y.TabviewBase._classNames;this.get('boundingBox').addClass(_classNames.tab);this.get('contentBox').addClass(_classNames.tabLabel);this.set('label',this.get('label'));this.set('content',this.get('content'));this._uiSetSelectedPanel(this.get('selected'));},bindUI:function(){this.after('selectedChange',this._afterTabSelectedChange);this.after('parentChange',this._afterParentChange);},renderUI:function(){this._renderPanel();this._initAria();},_renderPanel:function(){this.get('parent').get('panelNode').appendChild(this.get('panelNode'));},_add:function(){var parent=this.get('parent').get('contentBox'),list=parent.get('listNode'),panel=parent.get('panelNode');if(list){list.appendChild(this.get('boundingBox'));}
if(panel){panel.appendChild(this.get('panelNode'));}},_remove:function(){this.get('boundingBox').remove();this.get('panelNode').remove();},_onActivate:function(e){if(e.target===this){e.domEvent.preventDefault();e.target.set('selected',1);}},initializer:function(){this.publish(this.get('triggerEvent'),{defaultFn:this._onActivate});},_defLabelGetter:function(){return this.get('contentBox').getHTML();},_defLabelSetter:function(label){var labelNode=this.get('contentBox');if(labelNode.getHTML()!==label){labelNode.setHTML(label);}
return label;},_defContentSetter:function(content){var panel=this.get('panelNode');if(panel.getHTML()!==content){panel.setHTML(content);}
return content;},_defContentGetter:function(){return this.get('panelNode').getHTML();},_defPanelNodeValueFn:function(){var _classNames=Y.TabviewBase._classNames,href=this.get('contentBox').get('href')||'',parent=this.get('parent'),hashIndex=href.indexOf('#'),panel;href=href.substr(hashIndex);if(href.charAt(0)==='#'){panel=Y.one(href);if(panel){panel.addClass(_classNames.tabPanel);}}
if(!panel&&parent){panel=parent.get('panelNode').get('children').item(this.get('index'));}
if(!panel){panel=Y.Node.create(this.PANEL_TEMPLATE);panel.addClass(_classNames.tabPanel);}
return panel;}},{ATTRS:{triggerEvent:{value:'click'},label:{setter:'_defLabelSetter',getter:'_defLabelGetter'},content:{setter:'_defContentSetter',getter:'_defContentGetter'},panelNode:{setter:function(node){node=Y.one(node);if(node){node.addClass(Y.TabviewBase._classNames.tabPanel);}
return node;},valueFn:'_defPanelNodeValueFn'},tabIndex:{value:null,validator:'_validTabIndex'}},HTML_PARSER:{selected:function(){var ret=(this.get('boundingBox').hasClass(Y.TabviewBase._classNames.selectedTab))?1:0;return ret;}}});},'3.15.0',{"requires":["widget","widget-parent","widget-child","tabview-base","node-pluginhost","node-focusmanager"],"skinnable":true});
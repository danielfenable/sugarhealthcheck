/*
     YUI 3.15.0 (build 834026e)
     Copyright 2014 Yahoo! Inc. All rights reserved.
     Licensed under the BSD License.
     http://yuilibrary.com/license/
     */
YUI.add('datatable-mutable',function(Y,NAME){var toArray=Y.Array,YLang=Y.Lang,isString=YLang.isString,isArray=YLang.isArray,isObject=YLang.isObject,isNumber=YLang.isNumber,arrayIndex=Y.Array.indexOf,Mutable;Y.namespace('DataTable').Mutable=Mutable=function(){};Mutable.ATTRS={autoSync:{value:false,validator:YLang.isBoolean}};Y.mix(Mutable.prototype,{addColumn:function(config,index){if(isString(config)){config={key:config};}
if(config){if(arguments.length<2||(!isNumber(index)&&!isArray(index))){index=this.get('columns').length;}
this.fire('addColumn',{column:config,index:index});}
return this;},modifyColumn:function(name,config){if(isString(config)){config={key:config};}
if(isObject(config)){this.fire('modifyColumn',{column:name,newColumnDef:config});}
return this;},moveColumn:function(name,index){if(name!==undefined&&(isNumber(index)||isArray(index))){this.fire('moveColumn',{column:name,index:index});}
return this;},removeColumn:function(name){if(name!==undefined){this.fire('removeColumn',{column:name});}
return this;},addRow:function(data,config){var sync=(config&&('sync'in config))?config.sync:this.get('autoSync'),models,model,i,len,args;if(data&&this.data){models=this.data.add.apply(this.data,arguments);if(sync){models=toArray(models);args=toArray(arguments,1,true);for(i=0,len=models.length;i<len;++i){model=models[i];if(model.isNew()){models[i].save.apply(models[i],args);}}}}
return this;},removeRow:function(id,config){var modelList=this.data,sync=(config&&('sync'in config))?config.sync:this.get('autoSync'),models,model,i,len,args;if(isObject(id)&&id instanceof this.get('recordType')){model=id;}else if(modelList&&id!==undefined){model=modelList.getById(id)||modelList.getByClientId(id)||modelList.item(id);}
if(model){args=toArray(arguments,1,true);models=modelList.remove.apply(modelList,[model].concat(args));if(sync){if(!isObject(args[0])){args.unshift({});}
args[0]['delete']=true;models=toArray(models);for(i=0,len=models.length;i<len;++i){model=models[i];model.destroy.apply(model,args);}}}
return this;},modifyRow:function(id,data,config){var modelList=this.data,sync=(config&&('sync'in config))?config.sync:this.get('autoSync'),model,args;if(isObject(id)&&id instanceof this.get('recordType')){model=id;}else if(modelList&&id!==undefined){model=modelList.getById(id)||modelList.getByClientId(id)||modelList.item(id);}
if(model&&isObject(data)){args=toArray(arguments,1,true);model.setAttrs.apply(model,args);if(sync&&!model.isNew()){model.save.apply(model,args);}}
return this;},_defAddColumnFn:function(e){var index=toArray(e.index),columns=this.get('columns'),cols=columns,i,len;for(i=0,len=index.length-1;cols&&i<len;++i){cols=cols[index[i]]&&cols[index[i]].children;}
if(cols){cols.splice(index[i],0,e.column);this.set('columns',columns,{originEvent:e});}},_defModifyColumnFn:function(e){var columns=this.get('columns'),column=this.getColumn(e.column);if(column){Y.mix(column,e.newColumnDef,true);this.set('columns',columns,{originEvent:e});}},_defMoveColumnFn:function(e){var columns=this.get('columns'),column=this.getColumn(e.column),toIndex=toArray(e.index),fromCols,fromIndex,toCols,i,len;if(column){fromCols=column._parent?column._parent.children:columns;fromIndex=arrayIndex(fromCols,column);if(fromIndex>-1){toCols=columns;for(i=0,len=toIndex.length-1;toCols&&i<len;++i){toCols=toCols[toIndex[i]]&&toCols[toIndex[i]].children;}
if(toCols){len=toCols.length;fromCols.splice(fromIndex,1);toIndex=toIndex[i];if(len>toCols.lenth){if(fromIndex<toIndex){toIndex--;}}
toCols.splice(toIndex,0,column);this.set('columns',columns,{originEvent:e});}}}},_defRemoveColumnFn:function(e){var columns=this.get('columns'),column=this.getColumn(e.column),cols,index;if(column){cols=column._parent?column._parent.children:columns;index=Y.Array.indexOf(cols,column);if(index>-1){cols.splice(index,1);this.set('columns',columns,{originEvent:e});}}},initializer:function(){this.publish({addColumn:{defaultFn:Y.bind('_defAddColumnFn',this)},removeColumn:{defaultFn:Y.bind('_defRemoveColumnFn',this)},moveColumn:{defaultFn:Y.bind('_defMoveColumnFn',this)},modifyColumn:{defaultFn:Y.bind('_defModifyColumnFn',this)}});}});Mutable.prototype.addRows=Mutable.prototype.addRow;if(YLang.isFunction(Y.DataTable)){Y.Base.mix(Y.DataTable,[Mutable]);}},'3.15.0',{"requires":["datatable-base"]});
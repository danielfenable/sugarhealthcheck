/*
 * Includes TraceKit
 * https://github.com/getsentry/TraceKit
 * MIT License
 *
 * Copyright 2014 Matt Robenolt and other contributors
 * Released under the BSD license
 * https://github.com/getsentry/raven-js/blob/master/LICENSE
 *
Copyright (c) 2014 Matt Robenolt and other contributors
All rights reserved.

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice,
  this list of conditions and the following disclaimer.
* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation and/or other materials
  provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *//*------------------------------
https://github.com/caolan/async
MIT License
Copyright (c) 2010 Caolan McMahon
*//*------------------------------
http://backbonejs.org/
MIT License
Copyright (c) 2010-2012 Jeremy Ashkenas, DocumentCloud
*//*------------------------------
http://underscorejs.org/
MIT License
Copyright (c) 2009-2012 Jeremy Ashkenas, DocumentCloud
*//*------------------------------
http://handlebarsjs.com/
MIT License
Copyright (C) 2011 by Yehuda Katz
*//*------------------------------
https://github.com/marcuswestin/store.js/

Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software. 

The MIT License (MIT)
Copyright (c) 2010-2013 Marcus Westin
*//*------------------------------
Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software. 

http://zeptojs.com
MIT License
Copyright (c) 2010-2012 Thomas Fuchs
*//*------------------------------
fastclick
Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software.
 
MIT License
The Financial Times Limited [All Rights Reserved]
*//*------------------------------
sugarapi.js
pull-to-refresh.js
(c) SugarCRM Inc.
*//*------------------------------
MIT License
Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*//**
 * ScrollFix v0.1
 * http://www.joelambert.co.uk
 *
 * Copyright 2011, Joe Lambert.
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 *//*------------------------------
https://code.google.com/p/jsjpegmeta/
MIT License
Copyright (c) 2009 Ben Leslie
*//*------------------------------
https://github.com/stomita/ios-imagefile-megapixel
MIT License
Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
*//*********************************************************************************
Zynga Scroller
https://github.com/zynga/scroller

Copyright (c) 2011 Zynga Inc., http://zynga.com/

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
********************************************************************************//*------------------------------
 moment.js
 Copyright (c) 2011-2013 Tim Wood, Iskren Chernev, Moment.js contributors
 MIT License
*//*!
 * deepExtend function from Node.JS module "Deep Extend"
 * https://github.com/unclechu/node-deep-extend
 * Version 0.2.6
 * The MIT License (MIT)
 * Copyright (c) 2013 Viacheslav Lotsmanov
 *//* https://github.com/jasny/jquery.smartbanner

Modifications made by SugarCRM Inc. (c) 2014. These modifications are subject to the same terms as the MIT.
For information on the full license terms or related notices, go to http://www.sugarcrm.com/third-party-software. 

Copyright (c) Arnold Daniels <arnold@jasny.net>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is furnished
to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*//*
##nvd3.js License

Copyright (c) 2011, 2012 [Novus Partners, Inc.][novus]

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

[novus]: https://www.novus.com/



##d3.js License

Copyright (c) 2012, Michael Bostock
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

* The name Michael Bostock may not be used to endorse or promote products
  derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL MICHAEL BOSTOCK BE LIABLE FOR ANY DIRECT,
INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*//*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/06_Customer_Center/10_Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 *//*! Raven.js 1.1.11 (ca6ca26) | github.com/getsentry/raven-js *//*
 * Includes TraceKit
 * https://github.com/getsentry/TraceKit
 *
 * Copyright 2014 Matt Robenolt and other contributors
 * Released under the BSD license
 * https://github.com/getsentry/raven-js/blob/master/LICENSE
 *
 */function FastClick(e){"use strict";var t,n=this;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e;if(!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)};if(FastClick.notNeeded(e))return;this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;t==="click"?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;t==="click"?i.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(e,t,n,r)}),typeof e.onclick=="function"&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null)}function JPEGEncoder(e){function P(e){var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(var n=0;n<64;n++){var a=r((t[n]*e+50)/100);a<1?a=1:a>255&&(a=255),i[N[n]]=a}var f=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(var l=0;l<64;l++){var c=r((f[l]*e+50)/100);c<1?c=1:c>255&&(c=255),s[N[l]]=c}var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0;for(var d=0;d<8;d++)for(var v=0;v<8;v++)o[p]=1/(i[N[p]]*h[d]*h[v]*8),u[p]=1/(s[N[p]]*h[d]*h[v]*8),p++}function H(e,t){var n=0,r=0,i=new Array;for(var s=1;s<=16;s++){for(var o=1;o<=e[s];o++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=s,r++,n++;n*=2}return i}function B(){a=H(C,k),f=H(O,M),l=H(L,A),c=H(_,D)}function j(){var e=1,t=2;for(var n=1;n<=15;n++){for(var r=e;r<t;r++)p[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)p[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=t-1+i;e<<=1,t<<=1}}function F(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256>>0]=38470*e,x[e+512>>0]=7471*e+32768,x[e+768>>0]=-11059*e,x[e+1024>>0]=-21709*e,x[e+1280>>0]=32768*e+8421375,x[e+1536>>0]=-27439*e,x[e+1792>>0]=-5329*e}function I(e){var t=e[0],n=e[1]-1;while(n>=0)t&1<<n&&(g|=1<<y),n--,y--,y<0&&(g==255?(q(255),q(0)):q(g),y=7,g=0)}function q(e){m.push(S[e])}function R(e){q(e>>8&255),q(e&255)}function U(e,t){var n,r,i,s,o,u,a,f,l=0,c;const h=8,p=64;for(c=0;c<h;++c){n=e[l],r=e[l+1],i=e[l+2],s=e[l+3],o=e[l+4],u=e[l+5],a=e[l+6],f=e[l+7];var v=n+f,m=n-f,g=r+a,y=r-a,b=i+u,w=i-u,E=s+o,S=s-o,x=v+E,T=v-E,N=g+b,C=g-b;e[l]=x+N,e[l+4]=x-N;var k=(C+T)*.707106781;e[l+2]=T+k,e[l+6]=T-k,x=S+w,N=w+y,C=y+m;var L=(x-C)*.382683433,A=.5411961*x+L,O=1.306562965*C+L,M=N*.707106781,_=m+M,D=m-M;e[l+5]=D+A,e[l+3]=D-A,e[l+1]=_+O,e[l+7]=_-O,l+=8}l=0;for(c=0;c<h;++c){n=e[l],r=e[l+8],i=e[l+16],s=e[l+24],o=e[l+32],u=e[l+40],a=e[l+48],f=e[l+56];var P=n+f,H=n-f,B=r+a,j=r-a,F=i+u,I=i-u,q=s+o,R=s-o,U=P+q,z=P-q,W=B+F,X=B-F;e[l]=U+W,e[l+32]=U-W;var V=(X+z)*.707106781;e[l+16]=z+V,e[l+48]=z-V,U=R+I,W=I+j,X=j+H;var $=(U-X)*.382683433,J=.5411961*U+$,K=1.306562965*X+$,Q=W*.707106781,G=H+Q,Y=H-Q;e[l+40]=Y+J,e[l+24]=Y-J,e[l+8]=G+K,e[l+56]=G-K,l++}var Z;for(c=0;c<p;++c)Z=e[c]*t[c],d[c]=Z>0?Z+.5|0:Z-.5|0;return d}function z(){R(65504),R(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),R(1),R(1),q(0),q(0)}function W(e,t){R(65472),R(17),q(8),R(t),R(e),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}function X(){R(65499),R(132),q(0);for(var e=0;e<64;e++)q(i[e]);q(1);for(var t=0;t<64;t++)q(s[t])}function V(){R(65476),R(418),q(0);for(var e=0;e<16;e++)q(C[e+1]);for(var t=0;t<=11;t++)q(k[t]);q(16);for(var n=0;n<16;n++)q(L[n+1]);for(var r=0;r<=161;r++)q(A[r]);q(1);for(var i=0;i<16;i++)q(O[i+1]);for(var s=0;s<=11;s++)q(M[s]);q(17);for(var o=0;o<16;o++)q(_[o+1]);for(var u=0;u<=161;u++)q(D[u])}function $(){R(65498),R(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0)}function J(e,t,n,r,i){var s=i[0],o=i[240],u;const a=16,f=63,l=64;var c=U(e,t);for(var d=0;d<l;++d)v[N[d]]=c[d];var m=v[0]-n;n=v[0],m==0?I(r[0]):(u=32767+m,I(r[p[u]]),I(h[u]));var g=63;for(;g>0&&v[g]==0;g--);if(g==0)return I(s),n;var y=1,b;while(y<=g){var w=y;for(;v[y]==0&&y<=g;++y);var E=y-w;if(E>=a){b=E>>4;for(var S=1;S<=b;++S)I(o);E&=15}u=32767+v[y],I(i[(E<<4)+p[u]]),I(h[u]),y++}return g!=f&&I(s),n}function K(){var e=String.fromCharCode;for(var t=0;t<256;t++)S[t]=e(t)}function Q(e){e<=0&&(e=1),e>100&&(e=100);if(T==e)return;var t=0;e<50?t=Math.floor(5e3/e):t=Math.floor(200-e*2),P(t),T=e}function G(){var t=(new Date).getTime();e||(e=50),K(),B(),j(),F(),Q(e);var n=(new Date).getTime()-t}var t=this,n=Math.round,r=Math.floor,i=new Array(64),s=new Array(64),o=new Array(64),u=new Array(64),a,f,l,c,h=new Array(65535),p=new Array(65535),d=new Array(64),v=new Array(64),m=[],g=0,y=7,b=new Array(64),w=new Array(64),E=new Array(64),S=new Array(256),x=new Array(2048),T,N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],_=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],D=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t){var n=(new Date).getTime();t&&Q(t),m=new Array,g=0,y=7,R(65496),z(),X(),W(e.width,e.height),V(),$();var r=0,i=0,s=0;g=0,y=7,this.encode.displayName="_encode_";var h=e.data,p=e.width,d=e.height,v=p*4,S=p*3,T,N=0,C,k,L,A,O,M,_,D;while(N<d){T=0;while(T<v){A=v*N+T,O=A,M=-1,_=0;for(D=0;D<64;D++)_=D>>3,M=(D&7)*4,O=A+_*v+M,N+_>=d&&(O-=v*(N+1+_-d)),T+M>=v&&(O-=T+M-v+4),C=h[O++],k=h[O++],L=h[O++],b[D]=(x[C]+x[k+256>>0]+x[L+512>>0]>>16)-128,w[D]=(x[C+768>>0]+x[k+1024>>0]+x[L+1280>>0]>>16)-128,E[D]=(x[C+1280>>0]+x[k+1536>>0]+x[L+1792>>0]>>16)-128;r=J(b,o,r,a,l),i=J(w,u,i,f,c),s=J(E,u,s,f,c),T+=32}N+=8}if(y>=0){var P=[];P[1]=y+1,P[0]=(1<<y+1)-1,I(P)}R(65497);var H="data:image/jpeg;base64,"+btoa(m.join(""));m=[];var B=(new Date).getTime()-n;return H},G()}function getImageDataFromImage(e){var t=typeof e=="string"?document.getElementById(e):e,n=document.createElement("canvas");n.width=t.width,n.height=t.height;var r=n.getContext("2d");return r.drawImage(t,0,0),r.getImageData(0,0,n.width,n.height)}function version_compare(e,t,n){this.php_js=this.php_js||{},this.php_js.ENV=this.php_js.ENV||{};var r=0,i=0,s=0,o={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:-1,pl:-1},u=function(e){return e=(""+e).replace(/[_\-+]/g,"."),e=e.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),e.length?e.split("."):[-8]},a=function(e){return e?isNaN(e)?o[e]||-7:parseInt(e,10):0};e=u(e),t=u(t),i=Math.max(e.length,t.length);for(r=0;r<i;r++){if(e[r]==t[r])continue;e[r]=a(e[r]),t[r]=a(t[r]);if(e[r]<t[r]){s=-1;break}if(e[r]>t[r]){s=1;break}}if(!n)return s;switch(n){case">":case"gt":return s>0;case">=":case"ge":return s>=0;case"<=":case"le":return s<=0;case"==":case"=":case"eq":return s===0;case"<>":case"!=":case"ne":return s!==0;case"":case"<":case"lt":return s<0;default:return null}}(function(e,t){"use strict";function v(e,t){var n,r;t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):(n=document.createEventObject(),n.eventType=e);for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);if(document.createEvent)document.dispatchEvent(n);else try{document.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(i){}}function y(e){this.name="RavenConfigError",this.message=e}function b(e){var t=g.exec(e),n={},r=7;try{while(r--)n[m[r]]=t[r]||""}catch(i){throw new y("Invalid DSN: "+e)}if(n.pass)throw new y("Do not specify your private key in the DSN!");return n}function w(e){return typeof e=="undefined"}function E(e){return typeof e=="function"}function S(e){return typeof e=="string"}function x(e){for(var t in e)return!1;return!0}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function N(e,t){var n,r;if(w(e.length))for(n in e)e.hasOwnProperty(n)&&t.call(null,n,e[n]);else{r=e.length;if(r)for(n=0;n<r;n++)t.call(null,n,e[n])}}function k(){if(C)return C;var e=["sentry_version=4","sentry_client=raven-js/"+d.VERSION];return c&&e.push("sentry_key="+c),C="?"+e.join("&"),C}function L(e,t){var n=[];e.stack&&e.stack.length&&N(e.stack,function(e,t){var r=A(t);r&&n.push(r)}),v("handle",{stackInfo:e,options:t}),M(e.name,e.message,e.url,e.lineno,n,t)}function A(e){if(!e.url)return;var t={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"},n=O(e),r;if(n){var i=["pre_context","context_line","post_context"];r=3;while(r--)t[i[r]]=n[r]}return t.in_app=!(!p.includePaths.test(t.filename)||/(Raven|TraceKit)\./.test(t["function"])||/raven\.(min\.)js$/.test(t.filename)),t}function O(e){if(!e.context||!p.fetchContext)return;var t=e.context,n=~~(t.length/2),r=t.length,i=!1;while(r--)if(t[r].length>300){i=!0;break}if(i){if(w(e.column))return;return[[],t[n].substr(e.column,50),[]]}return[t.slice(0,n),t[n],t.slice(n+1)]}function M(e,t,n,r,i,s){var o,u,a;if(!t)return;if(p.ignoreErrors.test(t))return;i&&i.length?(n=i[0].filename||n,i.reverse(),o={frames:i}):n&&(o={frames:[{filename:n,lineno:r}]});if(p.ignoreUrls&&p.ignoreUrls.test(n))return;if(p.whitelistUrls&&!p.whitelistUrls.test(n))return;u=r?t+" at "+r:t,P(_({exception:{type:e,value:t},stacktrace:o,culprit:n,message:u},s))}function _(e,t){return t?(N(t,function(t,n){e[t]=n}),e):e}function D(){var e={url:document.location.href,headers:{"User-Agent":navigator.userAgent}};return document.referrer&&(e.headers.Referer=document.referrer),e}function P(e){if(!B())return;e=_({project:h,logger:p.logger,site:p.site,platform:"javascript",request:D()},e),e.tags=_(p.tags,e.tags),e.extra=_(p.extra,e.extra),x(e.tags)&&delete e.tags,x(e.extra)&&delete e.extra,l&&(e.user=l),E(p.dataCallback)&&(e=p.dataCallback(e));if(E(p.shouldSendCallback)&&!p.shouldSendCallback(e))return;a=e.event_id||(e.event_id=F()),H(e)}function H(e){var t=new Image,n=f+k()+"&sentry_data="+encodeURIComponent(JSON.stringify(e));t.onload=function(){v("success",{data:e,src:n})},t.onerror=t.onabort=function(){v("failure",{data:e,src:n})},t.src=n}function B(){return o?f?!0:(e.console&&console.error&&console.error("Error: Raven has not been configured."),!1):!1}function j(e){var t=[],n=0,r=e.length,i;for(;n<r;n++)i=e[n],S(i)?t.push(i.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):i&&i.source&&t.push(i.source);return new RegExp(t.join("|"),"i")}function F(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}var n={remoteFetching:!1,collectWindowErrors:!0,linesOfContext:7},r=[].slice,i="?";n.wrap=function(t){function r(){try{return t.apply(this,arguments)}catch(e){throw n.report(e),e}}return r},n.report=function(){function f(e){m(),s.push(e)}function l(e){for(var t=s.length-1;t>=0;--t)s[t]===e&&s.splice(t,1)}function c(){g(),s=[]}function h(e,t){var i=null;if(t&&!n.collectWindowErrors)return;for(var o in s)if(T(s,o))try{s[o].apply(null,[e].concat(r.call(arguments,2)))}catch(u){i=u}if(i)throw i}function v(e,t,r,i,s){var o=null;if(a)n.computeStackTrace.augmentStackTraceWithInitialElement(a,t,r,e),y();else if(s)o=n.computeStackTrace(s),h(o,!0);else{var u={url:t,line:r,column:i};u.func=n.computeStackTrace.guessFunctionName(u.url,u.line),u.context=n.computeStackTrace.gatherContext(u.url,u.line),o={message:e,url:document.location.href,stack:[u]},h(o,!0)}return p?p.apply(this,arguments):!1}function m(){if(d)return;p=e.onerror,e.onerror=v,d=!0}function g(){if(!d)return;e.onerror=p,d=!1,p=t}function y(){var e=a,t=o;o=null,a=null,u=null,h.apply(null,[e,!1].concat(t))}function b(t,i){var s=r.call(arguments,1);if(a){if(u===t)return;y()}var f=n.computeStackTrace(t);a=f,u=t,o=s,e.setTimeout(function(){u===t&&y()},f.incomplete?2e3:0);if(i!==!1)throw t}var s=[],o=null,u=null,a=null,p,d;return b.subscribe=f,b.unsubscribe=l,b.uninstall=c,b}(),n.computeStackTrace=function(){function o(t){if(!n.remoteFetching)return"";try{var r=function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}},i=r();return i.open("GET",t,!1),i.send(""),i.responseText}catch(s){return""}}function u(e){if(!S(e))return[];if(!T(s,e)){var t="";e.indexOf(document.domain)!==-1&&(t=o(e)),s[e]=t?t.split("\n"):[]}return s[e]}function a(e,t){var n=/function ([^(]*)\(([^)]*)\)/,r=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,s="",o=10,a=u(e),f;if(!a.length)return i;for(var l=0;l<o;++l){s=a[t-l]+s;if(!w(s)){if(f=r.exec(s))return f[1];if(f=n.exec(s))return f[1]}}return i}function f(e,t){var r=u(e);if(!r.length)return null;var i=[],s=Math.floor(n.linesOfContext/2),o=s+n.linesOfContext%2,a=Math.max(0,t-s-1),f=Math.min(r.length,t+o-1);t-=1;for(var l=a;l<f;++l)w(r[l])||i.push(r[l]);return i.length>0?i:null}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(e){return l(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function h(e,t){var n,r;for(var i=0,s=t.length;i<s;++i)if((n=u(t[i])).length){n=n.join("\n");if(r=e.exec(n))return{url:t[i],line:n.substring(0,r.index).split("\n").length,column:r.index-n.lastIndexOf("\n",r.index)-1}}return null}function p(e,t,n){var r=u(t),i=new RegExp("\\b"+l(e)+"\\b"),s;return n-=1,r&&r.length>n&&(s=i.exec(r[n]))?s.index:null}function d(t){var n=[e.location.href],r=document.getElementsByTagName("script"),i,s=""+t,o=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,u=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,a,f,p;for(var d=0;d<r.length;++d){var v=r[d];v.src&&n.push(v.src)}if(!(f=o.exec(s)))a=new RegExp(l(s).replace(/\s+/g,"\\s+"));else{var m=f[1]?"\\s+"+f[1]:"",g=f[2].split(",").join("\\s*,\\s*");i=l(f[3]).replace(/;$/,";?"),a=new RegExp("function"+m+"\\s*\\(\\s*"+g+"\\s*\\)\\s*{\\s*"+i+"\\s*}")}if(p=h(a,n))return p;if(f=u.exec(s)){var y=f[1];i=c(f[2]),a=new RegExp("on"+y+"=[\\'\"]\\s*"+i+"\\s*[\\'\"]","i");if(p=h(a,n[0]))return p;a=new RegExp(i);if(p=h(a,n))return p}return null}function v(e){if(!e.stack)return null;var t=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|https?):.*?):(\d+)(?::(\d+))?\)?\s*$/i,n=/^\s*(\S*)(?:\((.*?)\))?@((?:file|https?).*?):(\d+)(?::(\d+))?\s*$/i,r=e.stack.split("\n"),s=[],o,u,l=/^(.*) is undefined$/.exec(e.message);for(var c=0,h=r.length;c<h;++c){if(o=n.exec(r[c]))u={url:o[3],func:o[1]||i,args:o[2]?o[2].split(","):"",line:+o[4],column:o[5]?+o[5]:null};else{if(!(o=t.exec(r[c])))continue;u={url:o[2],func:o[1]||i,line:+o[3],column:o[4]?+o[4]:null}}!u.func&&u.line&&(u.func=a(u.url,u.line)),u.line&&(u.context=f(u.url,u.line)),s.push(u)}return s.length?(s[0].line&&!s[0].column&&l?s[0].column=p(l[1],s[0].url,s[0].line):!s[0].column&&!w(e.columnNumber)&&(s[0].column=e.columnNumber+1),{name:e.name,message:e.message,url:document.location.href,stack:s}):null}function m(e){var t=e.stacktrace,n=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,r=t.split("\n"),i=[],s;for(var o=0,u=r.length;o<u;o+=2)if(s=n.exec(r[o])){var l={line:+s[1],column:+s[2],func:s[3]||s[4],args:s[5]?s[5].split(","):[],url:s[6]};!l.func&&l.line&&(l.func=a(l.url,l.line));if(l.line)try{l.context=f(l.url,l.line)}catch(c){}l.context||(l.context=[r[o+1]]),i.push(l)}return i.length?{name:e.name,message:e.message,url:document.location.href,stack:i}:null}function g(t){var n=t.message.split("\n");if(n.length<4)return null;var r=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,i=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,s=/^\s*Line (\d+) of function script\s*$/i,o=[],l=document.getElementsByTagName("script"),p=[],d,v,m,g;for(v in l)T(l,v)&&!l[v].src&&p.push(l[v]);for(v=2,m=n.length;v<m;v+=2){var y=null;if(d=r.exec(n[v]))y={url:d[2],func:d[3],line:+d[1]};else if(d=i.exec(n[v])){y={url:d[3],func:d[4]};var b=+d[1],w=p[d[2]-1];if(w){g=u(y.url);if(g){g=g.join("\n");var E=g.indexOf(w.innerText);E>=0&&(y.line=b+g.substring(0,E).split("\n").length)}}}else if(d=s.exec(n[v])){var S=e.location.href.replace(/#.*$/,""),x=d[1],N=new RegExp(c(n[v+1]));g=h(N,[S]),y={url:S,line:g?g.line:x,func:""}}if(y){y.func||(y.func=a(y.url,y.line));var C=f(y.url,y.line),k=C?C[Math.floor(C.length/2)]:null;C&&k.replace(/^\s*/,"")===n[v+1].replace(/^\s*/,"")?y.context=C:y.context=[n[v+1]],o.push(y)}}return o.length?{name:t.name,message:n[0],url:document.location.href,stack:o}:null}function y(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){e.incomplete=!1,i.func||(i.func=a(i.url,i.line)),i.context||(i.context=f(i.url,i.line));var s=/ '([^']+)' /.exec(r);s&&(i.column=p(s[1],i.url,i.line));if(e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,e.stack[0].context=i.context,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function b(e,t){var r=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,s=[],o={},u=!1,f,l,c;for(var h=b.caller;h&&!u;h=h.caller){if(h===E||h===n.report)continue;l={url:null,func:i,line:null,column:null};if(h.name)l.func=h.name;else if(f=r.exec(h.toString()))l.func=f[1];if(c=d(h)){l.url=c.url,l.line=c.line,l.func===i&&(l.func=a(l.url,l.line));var v=/ '([^']+)' /.exec(e.message||e.description);v&&(l.column=p(v[1],c.url,c.line))}o[""+h]?u=!0:o[""+h]=!0,s.push(l)}t&&s.splice(0,t);var m={name:e.name,message:e.message,url:document.location.href,stack:s};return y(m,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),m}function E(e,t){var n=null;t=t==null?0:+t;try{n=m(e);if(n)return n}catch(i){if(r)throw i}try{n=v(e);if(n)return n}catch(i){if(r)throw i}try{n=g(e);if(n)return n}catch(i){if(r)throw i}try{n=b(e,t+1);if(n)return n}catch(i){if(r)throw i}return{}}function x(e){e=(e==null?0:+e)+1;try{throw new Error}catch(t){return E(t,e+1)}}var r=!1,s={};return E.augmentStackTraceWithInitialElement=y,E.guessFunctionName=a,E.gatherContext=f,E.ofCaller=x,E}(),"use strict";var s=e.Raven,o=!!e.JSON&&!!e.JSON.stringify,u,a,f,l,c,h,p={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],collectWindowErrors:!0,tags:{},extra:{}},d={VERSION:"1.1.11",TraceKit:n,afterLoad:function(){var t=e.RavenConfig;t&&this.config(t.dsn,t.config).install()},noConflict:function(){return e.Raven=s,d},config:function(e,t){if(!e)return d;var r=b(e),i=r.path.lastIndexOf("/"),s=r.path.substr(1,i);return t&&N(t,function(e,t){p[e]=t}),p.ignoreErrors.push("Script error."),p.ignoreErrors.push("Script error"),p.ignoreErrors=j(p.ignoreErrors),p.ignoreUrls=p.ignoreUrls.length?j(p.ignoreUrls):!1,p.whitelistUrls=p.whitelistUrls.length?j(p.whitelistUrls):!1,p.includePaths=j(p.includePaths),c=r.user,h=r.path.substr(i+1),f="//"+r.host+(r.port?":"+r.port:"")+"/"+s+"api/"+h+"/store/",r.protocol&&(f=r.protocol+":"+f),p.fetchContext&&(n.remoteFetching=!0),p.linesOfContext&&(n.linesOfContext=p.linesOfContext),n.collectWindowErrors=!!p.collectWindowErrors,d},install:function(){return B()&&n.report.subscribe(L),d},context:function(e,n,r){return E(e)&&(r=n||[],n=e,e=t),d.wrap(e,n).apply(this,r)},wrap:function(e,n){function r(){var t=[],r=arguments.length,i=!e||e&&e.deep!==!1;while(r--)t[r]=i?d.wrap(e,arguments[r]):arguments[r];try{return n.apply(this,t)}catch(s){throw d.captureException(s,e),s}}if(w(n)&&!E(e))return e;E(e)&&(n=e,e=t);if(!E(n))return n;if(n.__raven__)return n;for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r.__raven__=!0,r},uninstall:function(){return n.report.uninstall(),d},captureException:function(e,t){if(S(e))return d.captureMessage(e,t);u=e;try{n.report(e,t)}catch(r){if(e!==r)throw r}return d},captureMessage:function(e,t){return P(_({message:e},t)),d},setUser:function(e){return l=e,d},lastException:function(){return u},lastEventId:function(){return a}},m="source protocol user pass host port path".split(" "),g=/^(?:(\w+):)?\/\/(\w+)(:\w+)?@([\w\.-]+)(?::(\d+))?(\/.*)/;y.prototype=new Error,y.prototype.constructor=y;var C;d.afterLoad(),e.Raven=d,typeof define=="function"&&define.amd&&define("raven",[],function(){return d})})(window),function(e){function s(){try{return r in e&&e[r]}catch(t){return!1}}var t={},n=e.document,r="localStorage",i;t.disabled=!1,t.set=function(e,t){},t.get=function(e){},t.remove=function(e){},t.clear=function(){},t.transact=function(e,n,r){var i=t.get(e);r==null&&(r=n,n=null),typeof i=="undefined"&&(i=n||{}),r(i),t.set(e,i)},t.getAll=function(){},t.forEach=function(){},t.serialize=function(e){return JSON.stringify(e)},t.deserialize=function(e){if(typeof e!="string")return undefined;try{return JSON.parse(e)}catch(t){return e||undefined}};if(s())i=e[r],t.set=function(e,n){return i.setItem(e,t.serialize(n)),n},t.get=function(e){return t.deserialize(i.getItem(e))},t.remove=function(e){i.removeItem(e)},t.clear=function(){i.clear()},t.getAll=function(){var e={};return t.forEach(function(t,n){e[t]=n}),e},t.forEach=function(e){for(var n=0;n<i.length;n++){var r=i.key(n);e(r,t.get(r))}};else if(n.documentElement.addBehavior){var o,u;try{u=new ActiveXObject("htmlfile"),u.open(),u.write('<script>document.w=window</script><iframe src="/favicon.ico"></iframe>'),u.close(),o=u.w.frames[0].document,i=o.createElement("div")}catch(a){i=n.createElement("div"),o=n.body}function f(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(i),o.appendChild(i),i.addBehavior("#default#userData"),i.load(r);var s=e.apply(t,n);return o.removeChild(i),s}}var l=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function c(e){return e.replace(l,"___")}t.set=f(function(e,n,i){return n=c(n),i===undefined?t.remove(n):(e.setAttribute(n,t.serialize(i)),e.save(r),i)}),t.get=f(function(e,n){return n=c(n),t.deserialize(e.getAttribute(n))}),t.remove=f(function(e,t){t=c(t),e.removeAttribute(t),e.save(r)}),t.clear=f(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var n=0,i;i=t[n];n++)e.removeAttribute(i.name);e.save(r)}),t.getAll=f(function(e){var n={};return t.forEach(function(e,t){n[e]=t}),n}),t.forEach=f(function(e,n){var r=e.XMLDocument.documentElement.attributes;for(var i=0,s;s=r[i];++i){var o=c(s.name);n(ret[s.name],t.deserialize(e.getAttribute(o)))}})}try{var h="__storejs__";t.set(h,h),t.get(h)!=h&&(t.disabled=!0),t.remove(h)}catch(a){t.disabled=!0}t.enabled=!t.disabled,typeof module!="undefined"&&module.exports?module.exports=t:typeof define=="function"&&define.amd?define(t):e.store=t,t.cut=t.remove,t.deserialize=function(e){if(typeof e!="string")return undefined;try{return JSON.parse(e)}catch(t){return undefined}},t.has=function(e){return window.localStorage.getItem(e)!==null},e.stash=t;if(t.enabled)return;i={getItem:function(e){return this[e]},setItem:function(e,t){this[e]=String(t)},removeItem:function(e){delete this[e]},clear:function(){for(var e in this)typeof this[e]!="function"&&delete this[e]}}}(this.window||global);var Zepto=function(){function M(e){return e==null?String(e):x[T.call(e)]||"object"}function _(e){return M(e)=="function"}function D(e){return e!=null&&e==e.window}function P(e){return e!=null&&e.nodeType==e.DOCUMENT_NODE}function H(e){return M(e)=="object"}function B(e){return H(e)&&!D(e)&&Object.getPrototypeOf(e)==Object.prototype}function j(e){return typeof e.length=="number"}function F(e){return o.call(e,function(e){return e!=null})}function I(e){return e.length>0?n.fn.concat.apply([],e):e}function q(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function R(e){return e in f?f[e]:f[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function U(e,t){return typeof t=="number"&&!l[q(e)]?t+"px":t}function z(e){var t,n;return a[e]||(t=u.createElement(e),u.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),n=="none"&&(n="block"),a[e]=n),a[e]}function W(e){return"children"in e?s.call(e.children):n.map(e.childNodes,function(e){if(e.nodeType==1)return e})}function X(n,r,i){for(t in r)i&&(B(r[t])||O(r[t]))?(B(r[t])&&!B(n[t])&&(n[t]={}),O(r[t])&&!O(n[t])&&(n[t]=[]),X(n[t],r[t],i)):r[t]!==e&&(n[t]=r[t])}function V(e,t){return t==null?n(e):n(e).filter(t)}function $(e,t,n,r){return _(t)?t.call(e,n,r):t}function J(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function K(t,n){var r=t.className,i=r&&r.baseVal!==e;if(n===e)return i?r.baseVal:r;i?r.baseVal=n:t.className=n}function Q(e){var t;try{return e?e=="true"||(e=="false"?!1:e=="null"?null:!/^0/.test(e)&&!isNaN(t=Number(e))?t:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(r){return e}}function G(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)G(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=i.filter,u=window.document,a={},f={},l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},c=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/^(?:body|html)$/i,v=/([A-Z])/g,m=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],y=u.createElement("table"),b=u.createElement("tr"),w={tr:u.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:b,th:b,"*":u.createElement("div")},E=/complete|loaded|interactive/,S=/^[\w-]*$/,x={},T=x.toString,N={},C,k,L=u.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},O=Array.isArray||function(e){return e instanceof Array};return N.matches=function(e,t){if(!t||!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=L).appendChild(e),r=~N.qsa(i,t).indexOf(e),s&&L.removeChild(e),r},C=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},k=function(e){return o.call(e,function(t,n){return e.indexOf(t)==n})},N.fragment=function(t,r,i){var o,a,f;return h.test(t)&&(o=n(u.createElement(RegExp.$1))),o||(t.replace&&(t=t.replace(p,"<$1></$2>")),r===e&&(r=c.test(t)&&RegExp.$1),r in w||(r="*"),f=w[r],f.innerHTML=""+t,o=n.each(s.call(f.childNodes),function(){f.removeChild(this)})),B(i)&&(a=n(o),n.each(i,function(e,t){m.indexOf(e)>-1?a[e](t):a.attr(e,t)})),o},N.Z=function(e,t){return e=e||[],e.__proto__=n.fn,e.selector=t||"",e},N.isZ=function(e){return e instanceof N.Z},N.init=function(t,r){var i;if(!t)return N.Z();if(typeof t=="string"){t=t.trim();if(t[0]=="<"&&c.test(t))i=N.fragment(t,RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}else{if(_(t))return n(u).ready(t);if(N.isZ(t))return t;if(O(t))i=F(t);else if(H(t))i=[t],t=null;else if(c.test(t))i=N.fragment(t.trim(),RegExp.$1,r),t=null;else{if(r!==e)return n(r).find(t);i=N.qsa(u,t)}}return N.Z(i,t)},n=function(e,t){return N.init(e,t)},n.extend=function(e){var t,n=s.call(arguments,1);return typeof e=="boolean"&&(t=e,e=n.shift()),n.forEach(function(n){X(e,n,t)}),e},N.qsa=function(e,t){var n,r=t[0]=="#",i=!r&&t[0]==".",o=r||i?t.slice(1):t,u=S.test(o);return P(e)&&u&&r?(n=e.getElementById(o))?[n]:[]:e.nodeType!==1&&e.nodeType!==9?[]:s.call(u&&!r?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=u.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t&&(t=t.parentNode))if(t===e)return!0;return!1},n.type=M,n.isFunction=_,n.isWindow=D,n.isArray=O,n.isPlainObject=B,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},n.camelCase=C,n.trim=function(e){return e==null?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.map=function(e,t){var n,r=[],i,s;if(j(e))for(i=0;i<e.length;i++)n=t(e[i],i),n!=null&&r.push(n);else for(s in e)n=t(e[s],s),n!=null&&r.push(n);return I(r)},n.each=function(e,t){var n,r;if(j(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},n.grep=function(e,t){return o.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){x["[object "+t+"]"]=t.toLowerCase()}),n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(e){return n(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(e){return E.test(u.readyState)&&u.body?e(n):u.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?s.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){return i.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return _(e)?this.not(this.not(e)):n(o.call(this,function(t){return N.matches(t,e)}))},add:function(e,t){return n(k(this.concat(n(e,t))))},is:function(e){return this.length>0&&N.matches(this[0],e)},not:function(t){var r=[];if(_(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):j(t)&&_(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},has:function(e){return this.filter(function(){return H(e)?n.contains(this,e):n(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!H(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!H(e)?e:n(e)},find:function(e){var t,r=this;return e?typeof e=="object"?t=n(e).filter(function(){var e=this;return i.some.call(r,function(t){return n.contains(t,e)})}):this.length==1?t=n(N.qsa(this[0],e)):t=this.map(function(){return N.qsa(this,e)}):t=[],t},closest:function(e,t){var r=this[0],i=!1;typeof e=="object"&&(i=n(e));while(r&&!(i?i.indexOf(r)>=0:N.matches(r,e)))r=r!==t&&!P(r)&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&!P(e)&&t.indexOf(e)<0)return t.push(e),e});return V(t,e)},parent:function(e){return V(k(this.pluck("parentNode")),e)},children:function(e){return V(this.map(function(){return W(this)}),e)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(e){return V(this.map(function(e,t){return o.call(W(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return n.map(this,function(t){return t[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=z(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=_(e);if(this[0]&&!t)var r=n(e).get(0),i=r.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(t?e.call(this,s):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){n(this[0]).before(e=n(e));var t;while((t=e.children()).length)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=_(e);return this.each(function(r){var i=n(this),s=i.contents(),o=t?e.call(this,r):e;s.length?s.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var r=n(this);(t===e?r.css("display")=="none":t)?r.show():r.hide()})},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var r=this.innerHTML;n(this).empty().append($(this,e,t,r))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=$(this,e,t,this.textContent);this.textContent=n==null?"":""+n}):0 in this?this[0].textContent:null},attr:function(n,r){var i;return typeof n!="string"||1 in arguments?this.each(function(e){if(this.nodeType!==1)return;if(H(n))for(t in n)J(this,t,n[t]);else J(this,n,$(this,r,e,this.getAttribute(n)))}):!this.length||this[0].nodeType!==1?e:!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i},removeAttr:function(e){return this.each(function(){this.nodeType===1&&J(this,e)})},prop:function(e,t){return e=A[e]||e,1 in arguments?this.each(function(n){this[e]=$(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(t,n){var r="data-"+t.replace(v,"-$1").toLowerCase(),i=1 in arguments?this.attr(r,n):this.attr(r);return i!==null?Q(i):e},val:function(e){return 0 in arguments?this.each(function(t){this.value=$(this,e,t,this.value)}):this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var r=n(this),i=$(this,e,t,r.offset()),s=r.offsetParent().offset(),o={top:i.top-s.top,left:i.left-s.left};r.css("position")=="static"&&(o.position="relative"),r.css(o)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,r){if(arguments.length<2){var i=this[0];if(!i)return;var s=getComputedStyle(i,"");if(typeof e=="string")return i.style[C(e)]||s.getPropertyValue(e);if(O(e)){var o={};return n.each(O(e)?e:[e],function(e,t){o[t]=i.style[C(t)]||s.getPropertyValue(t)}),o}}var u="";if(M(e)=="string")!r&&r!==0?this.each(function(){this.style.removeProperty(q(e))}):u=q(e)+":"+U(e,r);else for(t in e)!e[t]&&e[t]!==0?this.each(function(){this.style.removeProperty(q(t))}):u+=q(t)+":"+U(t,e[t])+";";return this.each(function(){this.style.cssText+=";"+u})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?i.some.call(this,function(e){return this.test(K(e))},R(e)):!1},addClass:function(e){return e?this.each(function(t){r=[];var i=K(this),s=$(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this),r.length&&K(this,i+(i?" ":"")+r.join(" "))}):this},removeClass:function(t){return this.each(function(n){if(t===e)return K(this,"");r=K(this),$(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(R(e)," ")}),K(this,r.trim())})},toggleClass:function(t,r){return t?this.each(function(i){var s=n(this),o=$(this,t,i,K(this));o.split(/\s+/g).forEach(function(t){(r===e?!s.hasClass(t):r)?s.addClass(t):s.removeClass(t)})}):this},scrollTop:function(t){if(!this.length)return;var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})},scrollLeft:function(t){if(!this.length)return;var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})},position:function(){if(!this.length)return;var e=this[0],t=this.offsetParent(),r=this.offset(),i=d.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(n(e).css("margin-top"))||0,r.left-=parseFloat(n(e).css("margin-left"))||0,i.top+=parseFloat(n(t[0]).css("border-top-width"))||0,i.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||u.body;while(e&&!d.test(e.nodeName)&&n(e).css("position")=="static")e=e.offsetParent;return e})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(t){var r=t.replace(/./,function(e){return e[0].toUpperCase()});n.fn[t]=function(i){var s,o=this[0];return i===e?D(o)?o["inner"+r]:P(o)?o.documentElement["scroll"+r]:(s=this.offset())&&s[t]:this.each(function(e){o=n(this),o.css(t,$(this,i,e,o[t]()))})}}),g.forEach(function(e,t){var r=t%2;n.fn[e]=function(){var e,i=n.map(arguments,function(t){return e=M(t),e=="object"||e=="array"||t==null?t:N.fragment(t)}),s,o=this.length>1;return i.length<1?this:this.each(function(e,a){s=r?a:a.parentNode,a=t==0?a.nextSibling:t==1?a.firstChild:t==2?a:null;var f=n.contains(u.documentElement,s);i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!s)return n(e).remove();s.insertBefore(e,a),f&&G(e,function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&!e.src&&window.eval.call(window,e.innerHTML)})})})},n.fn[r?e+"To":"insert"+(t?"Before":"After")]=function(t){return n(t)[e](this),this}}),N.Z.prototype=n.fn,N.uniq=k,N.deserializeValue=Q,n.zepto=N,n}();window.Zepto=Zepto,window.$===undefined&&(window.$=Zepto),function(e){e.extend(e.fn,{fadeIn:function(t){return typeof t=="undefined"&&(t=250),e(this).css({display:"block",opacity:0}).animate({opacity:1},t),this},fadeOut:function(t){return typeof t=="undefined"&&(t=250),e(this).animate({opacity:0},t,function(){e(this).css({display:"none"})}),this}})}(Zepto),function(e){function c(e){return e._zid||(e._zid=t++)}function h(e,t,n,r){t=p(t);if(t.ns)var i=d(t.ns);return(o[c(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||c(e.fn)===c(n))&&(!r||e.sel==r)})}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function d(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,t){return e.del&&!a&&e.e in f||!!t}function m(e){return l[e]||a&&f[e]||e}function g(t,r,i,s,u,a,f){var h=c(t),d=o[h]||(o[h]=[]);r.split(/\s/).forEach(function(r){if(r=="ready")return e(document).ready(i);var o=p(r);o.fn=i,o.sel=u,o.e in l&&(i=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=a;var c=a||i;o.proxy=function(e){e=x(e);if(e.isImmediatePropagationStopped())return;e.data=s;var r=c.apply(t,e._args==n?[e]:[e].concat(e._args));return r===!1&&(e.preventDefault(),e.stopPropagation()),r},o.i=d.length,d.push(o),"addEventListener"in t&&t.addEventListener(m(o.e),o.proxy,v(o,f))})}function y(e,t,n,r,i){var s=c(e);(t||"").split(/\s/).forEach(function(t){h(e,t,n,r).forEach(function(t){delete o[s][t.i],"removeEventListener"in e&&e.removeEventListener(m(t.e),t.proxy,v(t,i))})})}function x(t,r){if(r||!t.isDefaultPrevented){r||(r=t),e.each(S,function(e,n){var i=r[e];t[e]=function(){return this[n]=b,i&&i.apply(r,arguments)},t[n]=w});if(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?r.returnValue===!1:r.getPreventDefault&&r.getPreventDefault())t.isDefaultPrevented=b}return t}function T(e){var t,r={originalEvent:e};for(t in e)!E.test(t)&&e[t]!==n&&(r[t]=e[t]);return x(r,e)}var t=1,n,r=Array.prototype.slice,i=e.isFunction,s=function(e){return typeof e=="string"},o={},u={},a="onfocusin"in window,f={focus:"focusin",blur:"focusout"},l={mouseenter:"mouseover",mouseleave:"mouseout"};u.click=u.mousedown=u.mouseup=u.mousemove="MouseEvents",e.event={add:g,remove:y},e.proxy=function(t,n){var o=2 in arguments&&r.call(arguments,2);if(i(t)){var u=function(){return t.apply(n,o?o.concat(r.call(arguments)):arguments)};return u._zid=c(t),u}if(s(n))return o?(o.unshift(t[n],t),e.proxy.apply(null,o)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var b=function(){return!0},w=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,o,u,a,f){var l,c,h=this;if(t&&!s(t))return e.each(t,function(e,t){h.on(e,o,u,t,f)}),h;!s(o)&&!i(a)&&a!==!1&&(a=u,u=o,o=n);if(i(u)||u===!1)a=u,u=n;return a===!1&&(a=w),h.each(function(n,i){f&&(l=function(e){return y(i,e.type,a),a.apply(this,arguments)}),o&&(c=function(t){var n,s=e(t.target).closest(o,i).get(0);if(s&&s!==i)return n=e.extend(T(t),{currentTarget:s,liveFired:i}),(l||a).apply(s,[n].concat(r.call(arguments,1)))}),g(i,t,a,u,o,c||l)})},e.fn.off=function(t,r,o){var u=this;return t&&!s(t)?(e.each(t,function(e,t){u.off(e,r,t)}),u):(!s(r)&&!i(o)&&o!==!1&&(o=r,r=n),o===!1&&(o=w),u.each(function(){y(this,t,o,r)}))},e.fn.trigger=function(t,n){return t=s(t)||e.isPlainObject(t)?e.Event(t):x(t),t._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(o,u){r=T(s(t)?e.Event(t):t),r._args=n,r.target=u,e.each(h(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){s(e)||(t=e,e=t.type);var n=document.createEvent(u[e]||"Events"),r=!0;if(t)for(var i in t)i=="bubbles"?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),x(n)}}(Zepto),function(e){function a(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function f(){s=null,t.last&&(t.el&&t.el.trigger("longTap"),t={})}function l(){s&&clearTimeout(s),s=null}function c(){n&&clearTimeout(n),r&&clearTimeout(r),i&&clearTimeout(i),s&&clearTimeout(s),n=r=i=s=null,t={}}function h(e){return(e.pointerType=="touch"||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function p(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var t={},n,r,i,s,o=750,u;e(document).ready(function(){var d,v,m=0,g=0,y,b;"MSGesture"in window&&(u=new MSGesture,u.target=document.body),e(document).bind("MSGestureEnd",function(e){var n=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;n&&(t.el&&t.el.trigger("swipe"),t.el&&t.el.trigger("swipe"+n))}).on("touchstart MSPointerDown pointerdown",function(r){if((b=p(r,"down"))&&!h(r))return;y=b?r:r.touches[0],r.touches&&r.touches.length===1&&t.x2&&(t.x2=undefined,t.y2=undefined),d=Date.now(),v=d-(t.last||d),t.el=e("tagName"in y.target?y.target:y.target.parentNode),n&&clearTimeout(n),t.x1=y.pageX,t.y1=y.pageY,v>0&&v<=250&&(t.isDoubleTap=!0),t.last=d,s=setTimeout(f,o),u&&b&&u.addPointer(r.pointerId)}).on("touchmove MSPointerMove pointermove",function(e){if((b=p(e,"move"))&&!h(e))return;y=b?e:e.touches[0],l(),t.x2=y.pageX,t.y2=y.pageY,m+=Math.abs(t.x1-t.x2),g+=Math.abs(t.y1-t.y2)}).on("touchend MSPointerUp pointerup",function(s){if((b=p(s,"up"))&&!h(s))return;l(),t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30?i=setTimeout(function(){t.el&&t.el.trigger("swipe"),t.el&&t.el.trigger("swipe"+a(t.x1,t.x2,t.y1,t.y2)),t={}},0):"last"in t&&(m<30&&g<30?r=setTimeout(function(){var r=e.Event("tap");r.cancelTouch=c,t.el&&t.el.trigger(r),t.isDoubleTap?(t.el&&t.el.trigger("doubleTap"),t={}):n=setTimeout(function(){n=null,t.el&&t.el.trigger("singleTap"),t={}},250)},0):t={}),m=g=0}).on("touchcancel MSPointerCancel pointercancel",c),e(window).on("scroll",c)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(Zepto),function($){function triggerAndReturn(e,t,n){var r=$.Event(t);return $(e).trigger(r,n),!r.isDefaultPrevented()}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n,r){var i=n.context,s="success";n.success.call(i,e,s,t),r&&r.resolveWith(i,[e,s,t]),triggerGlobal(n,i,"ajaxSuccess",[t,n,e]),ajaxComplete(s,t,n)}function ajaxError(e,t,n,r,i){var s=r.context;r.error.call(s,n,t,e),i&&i.rejectWith(s,[n,t,e]),triggerGlobal(r,s,"ajaxError",[n,r,e||t]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function empty(){}function mimeToDataType(e){return e&&(e=e.split(";",2)[0]),e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return t==""?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.processData&&e.data&&$.type(e.data)!="string"&&(e.data=$.param(e.data,e.traditional)),e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data),e.data=undefined)}function parseArguments(e,t,n,r){return $.isFunction(t)&&(r=n,n=t,t=undefined),$.isFunction(n)||(r=n,n=undefined),{url:e,data:t,success:n,dataType:r}}function serialize(e,t,n,r){var i,s=$.isArray(t),o=$.isPlainObject(t);$.each(t,function(t,u){i=$.type(u),r&&(t=n?r:r+"["+(o||i=="object"||i=="array"?t:"")+"]"),!r&&s?e.add(u.name,u.value):i=="array"||!n&&i=="object"?serialize(e,u,n,t):e.add(t,u)})}var jsonpID=0,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(e,t){if("type"in e){var n=e.jsonpCallback,r=($.isFunction(n)?n():n)||"jsonp"+ ++jsonpID,i=document.createElement("script"),s=window[r],o,u=function(e){$(i).triggerHandler("error",e||"abort")},a={abort:u},f;return t&&t.promise(a),$(i).on("load error",function(n,u){clearTimeout(f),$(i).off().remove(),n.type=="error"||!o?ajaxError(null,u||"error",a,e,t):ajaxSuccess(o[0],a,e,t),window[r]=s,o&&$.isFunction(s)&&s(o[0]),s=o=undefined}),ajaxBeforeSend(a,e)===!1?(u("abort"),a):(window[r]=function(){o=arguments},i.src=e.url.replace(/\?(.+)=\?/,"?$1="+r),document.head.appendChild(i),e.timeout>0&&(f=setTimeout(function(){u("timeout")},e.timeout)),a)}return $.ajax(e)},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},$.ajax=function(options){var settings=$.extend({},options||{}),deferred=$.Deferred&&$.Deferred();for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host),settings.url||(settings.url=window.location.toString()),serializeData(settings);var dataType=settings.dataType,hasPlaceholder=/\?.+=\?/.test(settings.url);hasPlaceholder&&(dataType="jsonp");if(settings.cache===!1||(!options||options.cache!==!0)&&("script"==dataType||"jsonp"==dataType))settings.url=appendQuery(settings.url,"_="+Date.now());if("jsonp"==dataType)return hasPlaceholder||(settings.url=appendQuery(settings.url,settings.jsonp?settings.jsonp+"=?":settings.jsonp===!1?"":"callback=?")),$.ajaxJSONP(settings,deferred);var mime=settings.accepts[dataType],headers={},setHeader=function(e,t){headers[e.toLowerCase()]=[e,t]},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=settings.xhr(),nativeSetHeader=xhr.setRequestHeader,abortTimeout;deferred&&deferred.promise(xhr),settings.crossDomain||setHeader("X-Requested-With","XMLHttpRequest"),setHeader("Accept",mime||"*/*");if(mime=settings.mimeType||mime)mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime);(settings.contentType||settings.contentType!==!1&&settings.data&&settings.type.toUpperCase()!="GET")&&setHeader("Content-Type",settings.contentType||"application/x-www-form-urlencoded");if(settings.headers)for(name in settings.headers)setHeader(name,settings.headers[name]);xhr.setRequestHeader=setHeader,xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty,clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(settings.mimeType||xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:$.parseJSON(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings,deferred):ajaxSuccess(result,xhr,settings,deferred)}else ajaxError(xhr.statusText||null,xhr.status?"error":"abort",xhr,settings,deferred)}};if(ajaxBeforeSend(xhr,settings)===!1)return xhr.abort(),ajaxError(null,"abort",xhr,settings,deferred),xhr;if(settings.xhrFields)for(name in settings.xhrFields)xhr[name]=settings.xhrFields[name];var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async,settings.username,settings.password);for(name in headers)nativeSetHeader.apply(xhr,headers[name]);return settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings,deferred)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr},$.get=function(){return $.ajax(parseArguments.apply(null,arguments))},$.post=function(){var e=parseArguments.apply(null,arguments);return e.type="POST",$.ajax(e)},$.getJSON=function(){var e=parseArguments.apply(null,arguments);return e.dataType="json",$.ajax(e)},$.fn.load=function(e,t,n){if(!this.length)return this;var r=this,i=e.split(/\s/),s,o=parseArguments(e,t,n),u=o.success;return i.length>1&&(o.url=i[0],s=i[1]),o.success=function(e){r.html(s?$("<div>").html(e.replace(rscript,"")).find(s):e),u&&u.apply(r,arguments)},$.ajax(o),this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!e.match(/\(Macintosh\; Intel /),o=e.match(/(iPad).*OS\s([\d_]+)/),u=e.match(/(iPod)(.*OS\s([\d_]+))?/),a=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),f=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=e.match(/Windows Phone ([\d.]+)/),c=f&&e.match(/TouchPad/),h=e.match(/Kindle\/([\d.]+)/),p=e.match(/Silk\/([\d._]+)/),d=e.match(/(BlackBerry).*Version\/([\d.]+)/),v=e.match(/(BB10).*Version\/([\d.]+)/),m=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),g=e.match(/PlayBook/),y=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),b=e.match(/Firefox\/([\d.]+)/),w=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),E=!y&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),S=E||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);if(n.webkit=!!r)n.version=r[1];i&&(t.android=!0,t.version=i[2]),a&&!u&&(t.ios=t.iphone=!0,t.version=a[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),u&&(t.ios=t.ipod=!0,t.version=u[3]?u[3].replace(/_/g,"."):null),l&&(t.wp=!0,t.version=l[1]),f&&(t.webos=!0,t.version=f[2]),c&&(t.touchpad=!0),d&&(t.blackberry=!0,t.version=d[2]),v&&(t.bb10=!0,t.version=v[2]),m&&(t.rimtabletos=!0,t.version=m[2]),g&&(n.playbook=!0),h&&(t.kindle=!0,t.version=h[1]),p&&(n.silk=!0,n.version=p[1]),!p&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),y&&(n.chrome=!0,n.version=y[1]),b&&(n.firefox=!0,n.version=b[1]),w&&(n.ie=!0,n.version=w[1]),S&&(s||t.ios)&&(n.safari=!0,s&&(n.version=S[1])),E&&(n.webview=!0),t.tablet=!!(o||g||i&&!e.match(/Mobile/)||b&&e.match(/Tablet/)||w&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!!(!t.tablet&&!t.ipod&&(i||a||f||d||v||y&&e.match(/Android/)||y&&e.match(/CriOS\/([\d.]+)/)||b&&e.match(/Mobile/)||w&&e.match(/Touch/))),t.desktop=!(a||o||i||p||h||d)&&(/Chrome/.test(e)&&/Google Inc/.test(navigator.vendor)||/Safari/.test(e)&&/Apple Computer/.test(navigator.vendor));if(i&&e.match(/Chrome\/[.0-9]*/)&&!window.cordova||t.ios&&e.match(/CriOS/i))n.chromeMobile=!0;n.chrome=/Chrome|CriOS/i.test(e)&&!window.cordova}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e,t){function w(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function E(e){return r?r+e:e.toLowerCase()}var n="",r,i,s,o={Webkit:"webkit",Moz:"",O:"o"},u=window.document,a=u.createElement("div"),f=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,l,c,h,p,d,v,m,g,y,b={};e.each(o,function(e,i){if(a.style[e+"TransitionProperty"]!==t)return n="-"+e.toLowerCase()+"-",r=i,!1}),l=n+"transform",b[c=n+"transition-property"]=b[h=n+"transition-duration"]=b[d=n+"transition-delay"]=b[p=n+"transition-timing-function"]=b[v=n+"animation-name"]=b[m=n+"animation-duration"]=b[y=n+"animation-delay"]=b[g=n+"animation-timing-function"]="",e.fx={off:r===t&&a.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:E("TransitionEnd"),animationEnd:E("AnimationEnd")},e.fn.animate=function(n,r,i,s,o){return e.isFunction(r)&&(s=r,i=t,r=t),e.isFunction(i)&&(s=i,i=t),e.isPlainObject(r)&&(i=r.easing,s=r.complete,o=r.delay,r=r.duration),r&&(r=(typeof r=="number"?r:e.fx.speeds[r]||e.fx.speeds._default)/1e3),o&&(o=parseFloat(o)/1e3),this.anim(n,r,i,s,o)},e.fn.anim=function(n,r,i,s,o){var u,a={},E,S="",x=this,T,N=e.fx.transitionEnd,C=!1;r===t&&(r=e.fx.speeds._default/1e3),o===t&&(o=0),e.fx.off&&(r=0);if(typeof n=="string")a[v]=n,a[m]=r+"s",a[y]=o+"s",a[g]=i||"linear",N=e.fx.animationEnd;else{E=[];for(u in n)f.test(u)?S+=u+"("+n[u]+") ":(a[u]=n[u],E.push(w(u)));S&&(a[l]=S,E.push(l)),r>0&&typeof n=="object"&&(a[c]=E.join(", "),a[h]=r+"s",a[d]=o+"s",a[p]=i||"linear")}return T=function(t){if(typeof t!="undefined"){if(t.target!==t.currentTarget)return;e(t.target).unbind(N,T)}else e(this).unbind(N,T);C=!0,e(this).css(b),s&&s.call(this)},r>0&&(this.bind(N,T),setTimeout(function(){if(C)return;T.call(x)},r*1e3+25)),this.size()&&this.get(0).clientLeft,this.css(a),r<=0&&setTimeout(function(){x.each(function(){T.call(this)})},0),this},a=null}(Zepto),function(e){var t=function(t){var n=this,r=n.options=_.extend({},n.defaults,t),i=r.template||function(){return""},s=r.templateTarget;r.template=void 0,n.$target=this;var o=r.height;e.os.android||(r.command=null),s.find(".pull-to-refresh").length||s.append(i(r)),n.$holder=s.find(".pull-to-refresh"),n.$msg=n.$holder.find(".message-container"),n.$msg.css({height:o}),n.$spinner=n.$holder.find(".spinner"),n.$spinner_wrapper=n.$holder.find(".icon-wrap"),r.scroller.activatePullToRefresh(o,function(){e.os.android?n.$msg.html(r.action):n.$spinner_wrapper.addClass("color")},function(){e.os.android?n.$msg.html(r.command):n.$spinner_wrapper.removeClass("color")},function(){e.os.android?n.$msg.html(r.refresh):n.$spinner.addClass("rotate3"),n.isLoading||(n.isLoading=!0,r.callback&&r.callback())})};t.prototype={defaults:{height:50,animationDelay:300,callback:function(){}},hide:function(){var t=this;t.isLoading=!1;if(!t.options)return;t.options.scroller.finishPullToRefresh(),e.os.android?t.$msg.html(t.options.command):(t.$spinner.removeClass("rotate3"),t.$spinner_wrapper.removeClass("color"))},destroy:function(){var e=this;if(!e.options)return;e.options.scroller.finishPullToRefresh(),e.$holder.remove(),e.options.callback=null,e.options=null,e.$div=null,e.$holder=null,e.$msg=null,e.$spinner=null,e.$spinner_wrapper=null,e.$target=null,e.isLoading=!1}},e.fn.pullToRefresh=function(e){typeof e=="object"||!e?this._ptr=new t(e):this._ptr&&this._ptr[e]&&(this._ptr[e].apply(this._ptr,Array.prototype.slice.call(arguments,1)),e==="destroy"&&(this._ptr=null))}}(Zepto),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){"use strict";if(/\bdisablefocus\b/.test(e.className))return!1;switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&e.type==="file"||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){"use strict";var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.determineEventType=function(e){"use strict";return this.deviceIsAndroid&&e.tagName.toLowerCase()==="select"?"mousedown":"click"},FastClick.prototype.focus=function(e){"use strict";var t;this.deviceIsIOS&&e.setSelectionRange&&e.type!=="date"&&e.type!=="time"&&!e.disabled&&!e.readOnly?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){"use strict";var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){"use strict";var t,n,r;if(e.targetTouches.length>1)return!0;t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];if(this.deviceIsIOS){r=window.getSelection();if(r.rangeCount&&!r.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){"use strict";var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.onTouchMove=function(e){"use strict";if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))this.trackingClick=!1,this.targetElement=null;return!0},FastClick.prototype.findControl=function(e){"use strict";return e.control!==undefined?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){"use strict";var t,n,r,i,s,o=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=e.changedTouches[0],o=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||o,o.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=o.tagName.toLowerCase();if(r==="label"){t=this.findControl(o);if(t){this.focus(o);if(this.deviceIsAndroid)return!1;o=t}}else if(this.needsFocus(o)){if(e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&r==="input")return this.targetElement=null,!1;this.focus(o);if(!this.deviceIsIOS4||r!=="select")this.targetElement=null,e.preventDefault();return!1}if(this.deviceIsIOS&&!this.deviceIsIOS4){i=o.fastClickScrollParent;if(i&&i.fastClickLastScrollTop!==i.scrollTop)return!0}return this.needsClick(o)||(e.preventDefault(),this.sendClick(o,e)),!1},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){"use strict";return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){"use strict";var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){"use strict";var t,n;if(typeof window.ontouchstart=="undefined")return!0;n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(n){if(!FastClick.prototype.deviceIsAndroid)return!0;t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(n>31&&window.innerWidth<=window.screen.width)return!0}}return e.style.msTouchAction==="none"?!0:!1},FastClick.attach=function(e){"use strict";return new FastClick(e)},typeof define!="undefined"&&define.amd?define(function(){"use strict";return FastClick}):typeof module!="undefined"&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(e){e.__swipeHelper={init:function(){var t={},n=5;e.__swipeHelper.swipeOrientation="";var r=function(e,t,n,r){var i=Math.abs(e-t),s=Math.abs(n-r);return i>=s?"horizontal":"vertical"};e(document.body).on("touchstart",function(e){t.x1=e.touches[0].pageX,t.y1=e.touches[0].pageY}).on("touchmove",function(i){t.x2=i.touches[0].pageX,t.y2=i.touches[0].pageY,e.__swipeHelper.swipeOrientation===""&&(t.x2&&Math.abs(t.x1-t.x2)>n||t.y2&&Math.abs(t.y1-t.y2)>n)&&(e.__swipeHelper.swipeOrientation=r(t.x1,t.x2,t.y1,t.y2)),e.__swipeHelper.swipeOrientation==="horizontal"&&i.preventDefault()}).on("touchend",function(n){e.__swipeHelper.swipeOrientation="",t={}})}}}(Zepto);var ScrollFix=function(e){var t,n;e=e||document.querySelector(e);if(!e)return;e.addEventListener("touchstart",function(r){t=r.touches[0].pageY,n=e.scrollTop,n<=0&&(e.scrollTop=1),n+e.offsetHeight>=e.scrollHeight&&(e.scrollTop=e.scrollHeight-e.offsetHeight-1)},!1)};!function(e){function n(){var e=document.createElement("smartbanner"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]};return!1}var t=function(t){this.origHtmlMargin=parseFloat(e("html").css("margin-top")),this.options=e.extend({},e.smartbanner.defaults,t);var n=navigator.standalone,r=navigator.userAgent;this.options.force?this.type=this.options.force:r.match(/iPhone|iPod/i)!=null||r.match(/iPad/)&&this.options.iOSUniversalApp?r.match(/Safari/i)!=null&&(r.match(/CriOS/i)!=null||window.Number(r.substr(r.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):r.match(/\bSilk\/(.*\bMobile Safari\b)?/)||r.match(/\bKF\w/)||r.match("Kindle Fire")?this.type="kindle":r.match(/Android/i)!=null?this.type="android":r.match(/Windows NT 6.2/i)!=null&&r.match(/Touch/i)!==null&&(this.type="windows");if(!this.type||n||this.getCookie("sb-closed")||this.getCookie("sb-installed"))return;this.scale=this.options.scale=="auto"?e(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var i=e(this.type=="android"?'meta[name="google-play-app"]':this.type=="ios"?'meta[name="apple-itunes-app"]':this.type=="kindle"?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(i.length==0)return;this.type=="windows"?(this.pfn=e('meta[name="msApplication-PackageFamilyName"]').attr("content"),this.appId=i.attr("content")[1]):this.appId=/app-id=([^\s,]+)/.exec(i.attr("content"))[1],this.title=this.options.title?this.options.title:i.data("title")||e("title").text().replace(/\s*[|\-].*$/,""),this.author=this.options.author?this.options.author:i.data("author")||(e('meta[name="author"]').length?e('meta[name="author"]').attr("content"):window.location.hostname),this.iconUrl=i.data("icon-url"),this.price=i.data("price"),this.create(),this.show(),this.listen()};t.prototype={constructor:t,create:function(){var t,n=this.options.url?this.options.url:(this.type=="windows"?"ms-windows-store:PDP?PFN="+this.pfn:this.type=="android"?"market://details?id=":this.type=="kindle"?"amzn://apps/android?asin=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,r=this.price||this.options.price,i=r?r+" - "+(this.type=="android"?this.options.inGooglePlay:this.type=="kindle"?this.options.inAmazonAppStore:this.type=="ios"?this.options.inAppStore:this.options.inWindowsStore):"",s=this.options.iconGloss===null?this.type=="ios":this.options.iconGloss;this.options.url?n=this.options.url:this.type=="android"?(n="market://details?id="+this.appId,this.options.GooglePlayParams&&(n=n+"&referrer="+this.options.GooglePlayParams)):n="https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"+this.appId;var o='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+i+'</span></div><a href="'+n+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>";e(this.options.appendToSelector).prepend(o),this.options.icon?t=this.options.icon:this.iconUrl?t=this.iconUrl:e('link[rel="apple-touch-icon-precomposed"]').length>0?(t=e('link[rel="apple-touch-icon-precomposed"]').attr("href"),this.options.iconGloss===null&&(s=!1)):e('link[rel="apple-touch-icon"]').length>0?t=e('link[rel="apple-touch-icon"]').attr("href"):e('meta[name="msApplication-TileImage"]').length>0?t=e('meta[name="msApplication-TileImage"]').attr("content"):e('meta[name="msapplication-TileImage"]').length>0&&(t=e('meta[name="msapplication-TileImage"]').attr("content")),t?(e("#smartbanner .sb-icon").css("background-image","url("+t+")"),s&&e("#smartbanner .sb-icon").addClass("gloss")):e("#smartbanner").addClass("no-icon"),this.bannerHeight=e("#smartbanner").height(),this.scale>1&&(e("#smartbanner").css("top",parseFloat(e("#smartbanner").css("top"))*this.scale).css("height",parseFloat(e("#smartbanner").css("height"))*this.scale).hide(),e("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",e(window).width()/this.scale)),e("#smartbanner").css("position",this.options.layer?"absolute":"static")},listen:function(){e("#smartbanner .sb-close").on("click",e.proxy(this.close,this)),e("#smartbanner .sb-button").on("click",e.proxy(this.install,this))},show:function(t){var n=e("#smartbanner");if(this.options.layer)n.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show(),e("#nomad").animate({top:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",t);else if(e.support.transition){n.animate({top:0},this.options.speedIn).addClass("shown");var r=function(){e("html").removeClass("sb-animation"),t&&t()};e("html").addClass("sb-animation").one(e.support.transition.end,r).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)}else n.slideDown(this.options.speedIn).addClass("shown")},hide:function(t){var n=e("#smartbanner");if(this.options.layer)n.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown"),e("#nomad").animate({top:this.origHtmlMargin},this.options.speedIn,"swing",t);else if(e.support.transition){n.css("top",-1*this.bannerHeight*this.scale).removeClass("shown");var r=function(){e("html").removeClass("sb-animation"),t&&t()};e("html").addClass("sb-animation").one(e.support.transition.end,r).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin)}else n.slideUp(this.options.speedOut).removeClass("shown")},close:function(e){e.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(e){this.options.hideOnInstall&&this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(e,t,n){var r=new Date;r.setDate(r.getDate()+n),t=encodeURI(t)+(n==null?"":"; expires="+r.toUTCString()),document.cookie=e+"="+t+"; path=/;"},getCookie:function(e){var t,n,r,i=document.cookie.split(";");for(t=0;t<i.length;t++){n=i[t].substr(0,i[t].indexOf("=")),r=i[t].substr(i[t].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,"");if(n==e)return decodeURI(r)}return null},switchType:function(){var t=this;this.hide(function(){t.type=t.type=="android"?"ios":"android";var n=e(t.type=="android"?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");t.appId=/app-id=([^\s,]+)/.exec(n)[1],e("#smartbanner").detach(),t.create(),t.show()})}},e.smartbanner=function(n){var r=e(window),i=r.data("smartbanner"),s=typeof n=="object"&&n;i||r.data("smartbanner",i=new t(s)),typeof n=="string"&&i[n]()},e.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:!0,layer:!1,iOSUniversalApp:!0,appendToSelector:"body"},e.smartbanner.Constructor=t;if(e.support.transition!==undefined)return;e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one(e.support.transition.end,function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=n()})}(window.Zepto);if(this.JpegMeta)throw Error("Library included multiple times");var JpegMeta={};JpegMeta.parseNum=function(t,n,r,i){var s,o,u=t===">";r===undefined&&(r=0),i===undefined&&(i=n.length-r);for(u?s=r:s=r+i-1;u?s<r+i:s>=r;u?s++:s--)o<<=8,o+=n.charCodeAt(s);return o},JpegMeta.parseSnum=function(t,n,r,i){var s,o,u,a=t===">";r===undefined&&(r=0),i===undefined&&(i=n.length-r);for(a?s=r:s=r+i-1;a?s<r+i:s>=r;a?s++:s--)u===undefined&&(u=(n.charCodeAt(s)&128)===128),o<<=8,o+=u?~n.charCodeAt(s)&255:n.charCodeAt(s);return u&&(o+=1,o*=-1),o},JpegMeta.Rational=function(t,n){return this.num=t,this.den=n||1,this},JpegMeta.Rational.prototype.toString=function toString(){return this.num===0?""+this.num:this.den===1?""+this.num:this.num===1?this.num+" / "+this.den:this.num/this.den},JpegMeta.Rational.prototype.asFloat=function(){return this.num/this.den},JpegMeta.MetaGroup=function(t,n){return this.fieldName=t,this.description=n,this.metaProps={},this},JpegMeta.MetaGroup.prototype._addProperty=function(t,n,r){var i=new JpegMeta.MetaProp(t,n,r);this[i.fieldName]=i,this.metaProps[i.fieldName]=i},JpegMeta.MetaGroup.prototype.toString=function toString(){return"[MetaGroup "+this.description+"]"},JpegMeta.MetaProp=function(t,n,r){return this.fieldName=t,this.description=n,this.value=r,this},JpegMeta.MetaProp.prototype.toString=function toString(){return""+this.value},this.JpegMeta.JpegFile=function(t,n){var r=this._SOS;this.metaGroups={},this._binary_data=t,this.filename=n;var i=0,s=0,o,u,a,f,l,c,h;if(this._binary_data.slice(0,2)!==this._SOI_MARKER)throw new Error("Doesn't look like a JPEG file. First two bytes are "+this._binary_data.charCodeAt(0)+","+this._binary_data.charCodeAt(1)+".");i+=2;while(i<this._binary_data.length){o=this._binary_data.charCodeAt(i++),u=this._binary_data.charCodeAt(i++),s=i;if(o!=this._DELIM)break;if(u===r)break;l=JpegMeta.parseNum(">",this._binary_data,i,2),i+=l;while(i<this._binary_data.length){o=this._binary_data.charCodeAt(i++);if(o==this._DELIM){a=this._binary_data.charCodeAt(i++);if(a!=0){i-=2;break}}}f=i-s,this._markers[u]?(c=this._markers[u][0],h=this._markers[u][1]):(c="UNKN",h=undefined),h&&this[h](u,s+2)}if(this.general===undefined)throw Error("Invalid JPEG file.");return this},this.JpegMeta.JpegFile.prototype.toString=function(){return"[JpegFile "+this.filename+" "+this.general.type+" "+this.general.pixelWidth+"x"+this.general.pixelHeight+" Depth: "+this.general.depth+"]"},this.JpegMeta.JpegFile.prototype._SOI_MARKER="",this.JpegMeta.JpegFile.prototype._DELIM=255,this.JpegMeta.JpegFile.prototype._EOI=217,this.JpegMeta.JpegFile.prototype._SOS=218,this.JpegMeta.JpegFile.prototype._sofHandler=function(t,n){if(this.general!==undefined)throw Error("Unexpected multiple-frame image");this._addMetaGroup("general","General"),this.general._addProperty("depth","Depth",JpegMeta.parseNum(">",this._binary_data,n,1)),this.general._addProperty("pixelHeight","Pixel Height",JpegMeta.parseNum(">",this._binary_data,n+1,2)),this.general._addProperty("pixelWidth","Pixel Width",JpegMeta.parseNum(">",this._binary_data,n+3,2)),this.general._addProperty("type","Type",this._markers[t][2])},this.JpegMeta.JpegFile.prototype._JFIF_IDENT="JFIF\0",this.JpegMeta.JpegFile.prototype._JFXX_IDENT="JFXX\0",this.JpegMeta.JpegFile.prototype._EXIF_IDENT="Exif\0",this.JpegMeta.JpegFile.prototype._types={1:["BYTE",1],2:["ASCII",1],3:["SHORT",2],4:["LONG",4],5:["RATIONAL",8],6:["SBYTE",1],7:["UNDEFINED",1],8:["SSHORT",2],9:["SLONG",4],10:["SRATIONAL",8],11:["FLOAT",4],12:["DOUBLE",8]},this.JpegMeta.JpegFile.prototype._tifftags={256:["Image width","ImageWidth"],257:["Image height","ImageLength"],258:["Number of bits per component","BitsPerSample"],259:["Compression scheme","Compression",{1:"uncompressed",6:"JPEG compression"}],262:["Pixel composition","PhotmetricInerpretation",{2:"RGB",6:"YCbCr"}],274:["Orientation of image","Orientation",{1:"Normal",2:"Reverse?",3:"Upside-down",4:"Upside-down Reverse",5:"90 degree CW",6:"90 degree CW reverse",7:"90 degree CCW",8:"90 degree CCW reverse"}],277:["Number of components","SamplesPerPixel"],284:["Image data arrangement","PlanarConfiguration",{1:"chunky format",2:"planar format"}],530:["Subsampling ratio of Y to C","YCbCrSubSampling"],531:["Y and C positioning","YCbCrPositioning",{1:"centered",2:"co-sited"}],282:["X Resolution","XResolution"],283:["Y Resolution","YResolution"],296:["Resolution Unit","ResolutionUnit",{2:"inches",3:"centimeters"}],273:["Image data location","StripOffsets"],278:["Number of rows per strip","RowsPerStrip"],279:["Bytes per compressed strip","StripByteCounts"],513:["Offset to JPEG SOI","JPEGInterchangeFormat"],514:["Bytes of JPEG Data","JPEGInterchangeFormatLength"],301:["Transfer function","TransferFunction"],318:["White point chromaticity","WhitePoint"],319:["Chromaticities of primaries","PrimaryChromaticities"],529:["Color space transformation matrix coefficients","YCbCrCoefficients"],532:["Pair of black and white reference values","ReferenceBlackWhite"],306:["Date and time","DateTime"],270:["Image title","ImageDescription"],271:["Make","Make"],272:["Model","Model"],305:["Software","Software"],315:["Person who created the image","Artist"],316:["Host Computer","HostComputer"],33432:["Copyright holder","Copyright"],34665:["Exif tag","ExifIfdPointer"],34853:["GPS tag","GPSInfoIfdPointer"]},this.JpegMeta.JpegFile.prototype._exiftags={36864:["Exif Version","ExifVersion"],40960:["FlashPix Version","FlashpixVersion"],40961:["Color Space","ColorSpace"],37121:["Meaning of each component","ComponentsConfiguration"],37122:["Compressed Bits Per Pixel","CompressedBitsPerPixel"],40962:["Pixel X Dimension","PixelXDimension"],40963:["Pixel Y Dimension","PixelYDimension"],37500:["Manufacturer notes","MakerNote"],37510:["User comments","UserComment"],40964:["Related audio file","RelatedSoundFile"],36867:["Date Time Original","DateTimeOriginal"],36868:["Date Time Digitized","DateTimeDigitized"],37520:["DateTime subseconds","SubSecTime"],37521:["DateTimeOriginal subseconds","SubSecTimeOriginal"],37522:["DateTimeDigitized subseconds","SubSecTimeDigitized"],33434:["Exposure time","ExposureTime"],33437:["FNumber","FNumber"],34850:["Exposure program","ExposureProgram"],34852:["Spectral sensitivity","SpectralSensitivity"],34855:["ISO Speed Ratings","ISOSpeedRatings"],34856:["Optoelectric coefficient","OECF"],37377:["Shutter Speed","ShutterSpeedValue"],37378:["Aperture Value","ApertureValue"],37379:["Brightness","BrightnessValue"],37380:["Exposure Bias Value","ExposureBiasValue"],37381:["Max Aperture Value","MaxApertureValue"],37382:["Subject Distance","SubjectDistance"],37383:["Metering Mode","MeteringMode"],37384:["Light Source","LightSource"],37385:["Flash","Flash"],37386:["Focal Length","FocalLength"],37396:["Subject Area","SubjectArea"],41483:["Flash Energy","FlashEnergy"],41484:["Spatial Frequency Response","SpatialFrequencyResponse"],41486:["Focal Plane X Resolution","FocalPlaneXResolution"],41487:["Focal Plane Y Resolution","FocalPlaneYResolution"],41488:["Focal Plane Resolution Unit","FocalPlaneResolutionUnit"],41492:["Subject Location","SubjectLocation"],41493:["Exposure Index","ExposureIndex"],41495:["Sensing Method","SensingMethod"],41728:["File Source","FileSource"],41729:["Scene Type","SceneType"],41730:["CFA Pattern","CFAPattern"],41985:["Custom Rendered","CustomRendered"],41986:["Exposure Mode","Exposure Mode"],41987:["White Balance","WhiteBalance"],41988:["Digital Zoom Ratio","DigitalZoomRatio"],41990:["Scene Capture Type","SceneCaptureType"],41991:["Gain Control","GainControl"],41992:["Contrast","Contrast"],41993:["Saturation","Saturation"],41994:["Sharpness","Sharpness"],41995:["Device settings description","DeviceSettingDescription"],41996:["Subject distance range","SubjectDistanceRange"],42016:["Unique image ID","ImageUniqueID"],40965:["Interoperability tag","InteroperabilityIFDPointer"]},this.JpegMeta.JpegFile.prototype._gpstags={0:["GPS tag version","GPSVersionID"],1:["North or South Latitude","GPSLatitudeRef"],2:["Latitude","GPSLatitude"],3:["East or West Longitude","GPSLongitudeRef"],4:["Longitude","GPSLongitude"],5:["Altitude reference","GPSAltitudeRef"],6:["Altitude","GPSAltitude"],7:["GPS time (atomic clock)","GPSTimeStamp"],8:["GPS satellites usedd for measurement","GPSSatellites"],9:["GPS receiver status","GPSStatus"],10:["GPS mesaurement mode","GPSMeasureMode"],11:["Measurement precision","GPSDOP"],12:["Speed unit","GPSSpeedRef"],13:["Speed of GPS receiver","GPSSpeed"],14:["Reference for direction of movement","GPSTrackRef"],15:["Direction of movement","GPSTrack"],16:["Reference for direction of image","GPSImgDirectionRef"],17:["Direction of image","GPSImgDirection"],18:["Geodetic survey data used","GPSMapDatum"],19:["Reference for latitude of destination","GPSDestLatitudeRef"],20:["Latitude of destination","GPSDestLatitude"],21:["Reference for longitude of destination","GPSDestLongitudeRef"],22:["Longitude of destination","GPSDestLongitude"],23:["Reference for bearing of destination","GPSDestBearingRef"],24:["Bearing of destination","GPSDestBearing"],25:["Reference for distance to destination","GPSDestDistanceRef"],26:["Distance to destination","GPSDestDistance"],27:["Name of GPS processing method","GPSProcessingMethod"],28:["Name of GPS area","GPSAreaInformation"],29:["GPS Date","GPSDateStamp"],30:["GPS differential correction","GPSDifferential"]},this.JpegMeta.JpegFile.prototype._markers={192:["SOF0","_sofHandler","Baseline DCT"],193:["SOF1","_sofHandler","Extended sequential DCT"],194:["SOF2","_sofHandler","Progressive DCT"],195:["SOF3","_sofHandler","Lossless (sequential)"],197:["SOF5","_sofHandler","Differential sequential DCT"],198:["SOF6","_sofHandler","Differential progressive DCT"],199:["SOF7","_sofHandler","Differential lossless (sequential)"],200:["JPG",null,"Reserved for JPEG extensions"],201:["SOF9","_sofHandler","Extended sequential DCT"],202:["SOF10","_sofHandler","Progressive DCT"],203:["SOF11","_sofHandler","Lossless (sequential)"],205:["SOF13","_sofHandler","Differential sequential DCT"],206:["SOF14","_sofHandler","Differential progressive DCT"],207:["SOF15","_sofHandler","Differential lossless (sequential)"],196:["DHT",null,"Define Huffman table(s)"],204:["DAC",null,"Define arithmetic coding conditioning(s)"],208:["RST0",null,"Restart with modulo 8 count 0"],209:["RST1",null,"Restart with modulo 8 count 1"],210:["RST2",null,"Restart with modulo 8 count 2"],211:["RST3",null,"Restart with modulo 8 count 3"],212:["RST4",null,"Restart with modulo 8 count 4"],213:["RST5",null,"Restart with modulo 8 count 5"],214:["RST6",null,"Restart with modulo 8 count 6"],215:["RST7",null,"Restart with modulo 8 count 7"],216:["SOI",null,"Start of image"],217:["EOI",null,"End of image"],218:["SOS",null,"Start of scan"],219:["DQT",null,"Define quantization table(s)"],220:["DNL",null,"Define number of lines"],221:["DRI",null,"Define restart interval"],222:["DHP",null,"Define hierarchical progression"],223:["EXP",null,"Expand reference component(s)"],224:["APP0","_app0Handler","Reserved for application segments"],225:["APP1","_app1Handler"],226:["APP2",null],227:["APP3",null],228:["APP4",null],229:["APP5",null],230:["APP6",null],231:["APP7",null],232:["APP8",null],233:["APP9",null],234:["APP10",null],235:["APP11",null],236:["APP12",null],237:["APP13",null],238:["APP14",null],239:["APP15",null],240:["JPG0",null],241:["JPG1",null],242:["JPG2",null],243:["JPG3",null],244:["JPG4",null],245:["JPG5",null],246:["JPG6",null],247:["JPG7",null],248:["JPG8",null],249:["JPG9",null],250:["JPG10",null],251:["JPG11",null],252:["JPG12",null],253:["JPG13",null],254:["COM",null],1:["JPG13",null]},this.JpegMeta.JpegFile.prototype._addMetaGroup=function(t,n){var r=new JpegMeta.MetaGroup(t,n);return this[r.fieldName]=r,this.metaGroups[r.fieldName]=r,r},this.JpegMeta.JpegFile.prototype._parseIfd=function(t,n,r,i,s,o,u){var a=JpegMeta.parseNum(t,n,r+i,2),f,l,c,h,p,d,v,m,g,y,b,w,E,S;S=this._addMetaGroup(o,u);for(var f=0;f<a;f++){c=r+i+2+f*12,h=JpegMeta.parseNum(t,n,c,2),d=JpegMeta.parseNum(t,n,c+2,2),m=JpegMeta.parseNum(t,n,c+4,4),g=JpegMeta.parseNum(t,n,c+8,4);if(this._types[d]===undefined)continue;p=this._types[d][0],v=this._types[d][1],v*m<=4?g=c+8:g=r+g;if(p=="UNDEFINED")y=n.slice(g,g+m);else if(p=="ASCII")y=n.slice(g,g+m),y=y.split("\0")[0];else{y=new Array;for(l=0;l<m;l++,g+=v)(p=="BYTE"||p=="SHORT"||p=="LONG")&&y.push(JpegMeta.parseNum(t,n,g,v)),(p=="SBYTE"||p=="SSHORT"||p=="SLONG")&&y.push(JpegMeta.parseSnum(t,n,g,v)),p=="RATIONAL"&&(w=JpegMeta.parseNum(t,n,g,4),E=JpegMeta.parseNum(t,n,g+4,4),y.push(new JpegMeta.Rational(w,E))),p=="SRATIONAL"&&(w=JpegMeta.parseSnum(t,n,g,4),E=JpegMeta.parseSnum(t,n,g+4,4),y.push(new JpegMeta.Rational(w,E))),y.push();m===1&&(y=y[0])}S._addProperty(s[h][1],s[h][0],y)}},this.JpegMeta.JpegFile.prototype._jfifHandler=function(t,n){if(this.jfif!==undefined)throw Error("Multiple JFIF segments found");this._addMetaGroup("jfif","JFIF"),this.jfif._addProperty("version_major","Version Major",this._binary_data.charCodeAt(n+5)),this.jfif._addProperty("version_minor","Version Minor",this._binary_data.charCodeAt(n+6)),this.jfif._addProperty("version","JFIF Version",this.jfif.version_major.value+"."+this.jfif.version_minor.value),this.jfif._addProperty("units","Density Unit",this._binary_data.charCodeAt(n+7)),this.jfif._addProperty("Xdensity","X density",JpegMeta.parseNum(">",this._binary_data,n+8,2)),this.jfif._addProperty("Ydensity","Y Density",JpegMeta.parseNum(">",this._binary_data,n+10,2)),this.jfif._addProperty("Xthumbnail","X Thumbnail",JpegMeta.parseNum(">",this._binary_data,n+12,1)),this.jfif._addProperty("Ythumbnail","Y Thumbnail",JpegMeta.parseNum(">",this._binary_data,n+13,1))},this.JpegMeta.JpegFile.prototype._app0Handler=function(t,n){var r=this._binary_data.slice(n,n+5);r==this._JFIF_IDENT?this._jfifHandler(t,n):r==this._JFXX_IDENT},this.JpegMeta.JpegFile.prototype._app1Handler=function(t,n){var r=this._binary_data.slice(n,n+5);r==this._EXIF_IDENT&&this._exifHandler(t,n+6)},JpegMeta.JpegFile.prototype._exifHandler=function(t,n){if(this.exif!==undefined)throw new Error("Multiple JFIF segments found");var r,i,s,o,u,a,f=this._binary_data.slice(n,n+2);if(f==="II")r="<";else{if(f!=="MM")throw new Error("Malformed TIFF meta-data. Unknown endianess: "+f);r=">"}i=JpegMeta.parseNum(r,this._binary_data,n+2,2);if(i!==42)throw new Error("Malformed TIFF meta-data. Bad magic: "+i);s=JpegMeta.parseNum(r,this._binary_data,n+4,4),this._parseIfd(r,this._binary_data,n,s,this._tifftags,"tiff","TIFF"),this.tiff.ExifIfdPointer&&this._parseIfd(r,this._binary_data,n,this.tiff.ExifIfdPointer.value,this._exiftags,"exif","Exif");if(this.tiff.GPSInfoIfdPointer){this._parseIfd(r,this._binary_data,n,this.tiff.GPSInfoIfdPointer.value,this._gpstags,"gps","GPS");if(this.gps.GPSLatitude){var l;l=this.gps.GPSLatitude.value[0].asFloat()+1/60*this.gps.GPSLatitude.value[1].asFloat()+1/3600*this.gps.GPSLatitude.value[2].asFloat(),this.gps.GPSLatitudeRef.value==="S"&&(l=-l),this.gps._addProperty("latitude","Dec. Latitude",l)}if(this.gps.GPSLongitude){var c;c=this.gps.GPSLongitude.value[0].asFloat()+1/60*this.gps.GPSLongitude.value[1].asFloat()+1/3600*this.gps.GPSLongitude.value[2].asFloat(),this.gps.GPSLongitudeRef.value==="W"&&(c=-c),this.gps._addProperty("longitude","Dec. Longitude",c)}}},function(){function e(e){var t=e.naturalWidth,n=e.naturalHeight;if(t*n>1048576){var r=document.createElement("canvas");r.width=r.height=1;var i=r.getContext("2d");return i.drawImage(e,-t+1,0),i.getImageData(0,0,1,1).data[3]===0}return!1}function t(e,t,n){var r=document.createElement("canvas");r.width=1,r.height=n;var i=r.getContext("2d");i.drawImage(e,0,0);var s=i.getImageData(0,0,1,n).data,o=0,u=n,a=n;while(a>o){var f=s[(a-1)*4+3];f===0?u=a:o=a,a=u+o>>1}var l=a/n;return l===0?1:l}function n(e,t){var n=document.createElement("canvas");return r(e,n,t),n.toDataURL("image/jpeg",t.quality||.8)}function r(n,r,s){var o=n.naturalWidth,u=n.naturalHeight,a=s.width,f=s.height,l=r.getContext("2d");l.save(),i(r,a,f,s.orientation);var c=e(n);c&&(o/=2,u/=2);var h=1024,p=document.createElement("canvas");p.width=p.height=h;var d=p.getContext("2d"),v=t(n,o,u),m=0;while(m<u){var g=m+h>u?u-m:h,y=0;while(y<o){var b=y+h>o?o-y:h;d.clearRect(0,0,h,h),d.drawImage(n,-y,-m);var w=y*a/o<<0,E=Math.ceil(b*a/o),S=m*f/u/v<<0,x=Math.ceil(g*f/u/v);l.drawImage(p,0,0,b,g,w,S,E,x),y+=h}m+=h}l.restore(),p=d=null}function i(e,t,n,r){switch(r){case 5:case 6:case 7:case 8:e.width=n,e.height=t;break;default:e.width=t,e.height=n}var i=e.getContext("2d");switch(r){case 2:i.translate(t,0),i.scale(-1,1);break;case 3:i.translate(t,n),i.rotate(Math.PI);break;case 4:i.translate(0,n),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-n);break;case 7:i.rotate(.5*Math.PI),i.translate(t,-n),i.scale(-1,1);break;case 8:i.rotate(-0.5*Math.PI),i.translate(-t,0);break;default:}}function s(e){if(e instanceof Blob){var t=new Image,n=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!n)throw Error("No createObjectURL function found to create blob url");t.src=n.createObjectURL(e),e=t}if(!e.naturalWidth&&!e.naturalHeight){var r=this;e.onload=function(){var e=r.imageLoadListeners;if(e){r.imageLoadListeners=null;for(var t=0,n=e.length;t<n;t++)e[t]()}},this.imageLoadListeners=[]}this.srcImage=e}s.prototype.render=function(e,t){if(this.imageLoadListeners){var i=this;this.imageLoadListeners.push(function(){i.render(e,t)});return}t=t||{};var s=this.srcImage.naturalWidth,o=this.srcImage.naturalHeight,u=t.width,a=t.height,f=t.maxWidth,l=t.maxHeight;u&&!a?a=o*u/s<<0:a&&!u?u=s*a/o<<0:(u=s,a=o),f&&u>f&&(u=f,a=o*u/s<<0),l&&a>l&&(a=l,u=s*a/o<<0);var c={width:u,height:a};for(var h in t)c[h]=t[h];var p=e.tagName.toLowerCase();p==="img"?e.src=n(this.srcImage,c):p==="canvas"&&r(this.srcImage,e,c),typeof this.onrender=="function"&&this.onrender(e)},typeof define=="function"&&define.amd?define([],function(){return s}):this.MegaPixImage=s}(),function(e){var t=Date.now||function(){return+(new Date)},n=60,r=1e3,i={},s=1;e.core?core.effect||(core.effect={}):e.core={effect:{}},core.effect.Animate={requestAnimationFrame:function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame,n=!!t;t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())&&(n=!1);if(n)return function(e,n){t(e,n)};var r=60,i={},s=0,o=1,u=null,a=+(new Date);return function(e,t){var n=o++;return i[n]=e,s++,u===null&&(u=setInterval(function(){var e=+(new Date),t=i;i={},s=0;for(var n in t)t.hasOwnProperty(n)&&(t[n](e),a=e);e-a>2500&&(clearInterval(u),u=null)},1e3/r)),n}}(),stop:function(e){var t=i[e]!=null;return t&&(i[e]=null),t},isRunning:function(e){return i[e]!=null},start:function(e,o,u,a,f,l){var c=t(),h=c,p=0,d=0,v=s++;l||(l=document.body);if(v%20===0){var m={};for(var g in i)m[g]=!0;i=m}var y=function(s){var m=s!==!0,g=t();if(!i[v]||o&&!o(v)){i[v]=null,u&&u(n-d/((g-c)/r),v,!1);return}if(m){var b=Math.round((g-h)/(r/n))-1;for(var w=0;w<Math.min(b,4);w++)y(!0),d++}a&&(p=(g-c)/a,p>1&&(p=1));var E=f?f(p):p;e(E,g,m)!==!1&&p!==1||!m?m&&(h=g,core.effect.Animate.requestAnimationFrame(y,l)):(i[v]=null,u&&u(n-d/((g-c)/r),v,p===1||a==null))};return i[v]=!0,core.effect.Animate.requestAnimationFrame(y,l),v}}}(this);var Scroller;(function(){Scroller=function(e,t){this.__callback=e,this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1};for(var n in t)this.options[n]=t[n]};var e=function(e){return Math.pow(e-1,3)+1},t=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},n={__isSingleTouch:!1,__isTracking:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(e,t,n,r){var i=this;e===+e&&(i.__clientWidth=e),t===+t&&(i.__clientHeight=t),n===+n&&(i.__contentWidth=n),r===+r&&(i.__contentHeight=r),i.__computeScrollMax(),i.scrollTo(i.__scrollLeft,i.__scrollTop,!0)},setPosition:function(e,t){var n=this;n.__clientLeft=e||0,n.__clientTop=t||0},setSnapSize:function(e,t){var n=this;n.__snapWidth=e,n.__snapHeight=t},activatePullToRefresh:function(e,t,n,r){var i=this;i.__refreshHeight=e,i.__refreshActivate=t,i.__refreshDeactivate=n,i.__refreshStart=r},finishPullToRefresh:function(){var e=this;e.__refreshActive=!1,e.__refreshDeactivate&&e.__refreshDeactivate(),e.scrollTo(e.__scrollLeft,e.__scrollTop,!0)},getValues:function(){var e=this;return{left:e.__scrollLeft,top:e.__scrollTop,zoom:e.__zoomLevel}},getScrollMax:function(){var e=this;return{left:e.__maxScrollLeft,top:e.__maxScrollTop}},zoomTo:function(e,t,n,r){var i=this;if(!i.options.zooming)throw new Error("Zooming is not enabled!");i.__isDecelerating&&(core.effect.Animate.stop(i.__isDecelerating),i.__isDecelerating=!1);var s=i.__zoomLevel;n==null&&(n=i.__clientWidth/2),r==null&&(r=i.__clientHeight/2),e=Math.max(Math.min(e,i.options.maxZoom),i.options.minZoom),i.__computeScrollMax(e);var o=(n+i.__scrollLeft)*e/s-n,u=(r+i.__scrollTop)*e/s-r;o>i.__maxScrollLeft?o=i.__maxScrollLeft:o<0&&(o=0),u>i.__maxScrollTop?u=i.__maxScrollTop:u<0&&(u=0),i.__publish(o,u,e,t)},zoomBy:function(e,t,n,r){var i=this;i.zoomTo(i.__zoomLevel*e,t,n,r)},scrollTo:function(e,t,n,r){var i=this;i.__isDecelerating&&(core.effect.Animate.stop(i.__isDecelerating),i.__isDecelerating=!1);if(r!=null&&r!==i.__zoomLevel){if(!i.options.zooming)throw new Error("Zooming is not enabled!");e*=r,t*=r,i.__computeScrollMax(r)}else r=i.__zoomLevel;i.options.scrollingX?i.options.paging?e=Math.round(e/i.__clientWidth)*i.__clientWidth:i.options.snapping&&(e=Math.round(e/i.__snapWidth)*i.__snapWidth):e=i.__scrollLeft,i.options.scrollingY?i.options.paging?t=Math.round(t/i.__clientHeight)*i.__clientHeight:i.options.snapping&&(t=Math.round(t/i.__snapHeight)*i.__snapHeight):t=i.__scrollTop,e=Math.max(Math.min(i.__maxScrollLeft,e),0),t=Math.max(Math.min(i.__maxScrollTop,t),0),e===i.__scrollLeft&&t===i.__scrollTop&&(n=!1),i.__publish(e,t,r,n)},scrollBy:function(e,t,n){var r=this,i=r.__isAnimating?r.__scheduledLeft:r.__scrollLeft,s=r.__isAnimating?r.__scheduledTop:r.__scrollTop;r.scrollTo(i+(e||0),s+(t||0),n)},doMouseZoom:function(e,t,n,r){var i=this,s=e>0?.97:1.03;return i.zoomTo(i.__zoomLevel*s,!1,n-i.__clientLeft,r-i.__clientTop)},doTouchStart:function(e,t){if(e.length==null)throw new Error("Invalid touch list: "+e);t instanceof Date&&(t=t.valueOf());if(typeof t!="number")throw new Error("Invalid timestamp value: "+t);var n=this;n.__isDecelerating&&(core.effect.Animate.stop(n.__isDecelerating),n.__isDecelerating=!1),n.__isAnimating&&(core.effect.Animate.stop(n.__isAnimating),n.__isAnimating=!1);var r,i,s=e.length===1;s?(r=e[0].pageX,i=e[0].pageY):(r=Math.abs(e[0].pageX+e[1].pageX)/2,i=Math.abs(e[0].pageY+e[1].pageY)/2),n.__initialTouchLeft=r,n.__initialTouchTop=i,n.__zoomLevelStart=n.__zoomLevel,n.__lastTouchLeft=r,n.__lastTouchTop=i,n.__lastTouchMove=t,n.__lastScale=1,n.__enableScrollX=!s&&n.options.scrollingX,n.__enableScrollY=!s&&n.options.scrollingY,n.__isTracking=!0,n.__isDragging=!s,n.__isSingleTouch=s,n.__positions=[]},doTouchMove:function(e,t,n){if(e.length==null)throw new Error("Invalid touch list: "+e);t instanceof Date&&(t=t.valueOf());if(typeof t!="number")throw new Error("Invalid timestamp value: "+t);var r=this;if(!r.__isTracking)return;var i,s;e.length===2?(i=Math.abs(e[0].pageX+e[1].pageX)/2,s=Math.abs(e[0].pageY+e[1].pageY)/2):(i=e[0].pageX,s=e[0].pageY);var o=r.__positions;if(r.__isDragging){var u=i-r.__lastTouchLeft,a=s-r.__lastTouchTop,f=r.__scrollLeft,l=r.__scrollTop,c=r.__zoomLevel;if(n!=null&&r.options.zooming){var h=c;c=c/r.__lastScale*n,c=Math.max(Math.min(c,r.options.maxZoom),r.options.minZoom);if(h!==c){var p=i-r.__clientLeft,d=s-r.__clientTop;f=(p+f)*c/h-p,l=(d+l)*c/h-d,r.__computeScrollMax(c)}}if(r.__enableScrollX){f-=u*this.options.speedMultiplier;var v=r.__maxScrollLeft;if(f>v||f<0)r.options.bouncing?f+=u/2*this.options.speedMultiplier:f>v?f=v:f=0}if(r.__enableScrollY){l-=a*this.options.speedMultiplier;var m=r.__maxScrollTop;if(l>m||l<0)r.options.bouncing?(l+=a/2*this.options.speedMultiplier,!r.__enableScrollX&&r.__refreshHeight!=null&&(!r.__refreshActive&&l<=-r.__refreshHeight?(r.__refreshActive=!0,r.__refreshActivate&&r.__refreshActivate()):r.__refreshActive&&l>-r.__refreshHeight&&(r.__refreshActive=!1,r.__refreshDeactivate&&r.__refreshDeactivate()))):l>m?l=m:l=0}o.length>60&&o.splice(0,30),o.push(f,l,t),r.__publish(f,l,c)}else{var g=r.options.locking?3:0,y=5,b=Math.abs(i-r.__initialTouchLeft),w=Math.abs(s-r.__initialTouchTop);r.__enableScrollX=r.options.scrollingX&&b>=g,r.__enableScrollY=r.options.scrollingY&&w>=g,o.push(r.__scrollLeft,r.__scrollTop,t),r.__isDragging=(r.__enableScrollX||r.__enableScrollY)&&(b>=y||w>=y)}r.__lastTouchLeft=i,r.__lastTouchTop=s,r.__lastTouchMove=t,r.__lastScale=n},doTouchEnd:function(e){e instanceof Date&&(e=e.valueOf());if(typeof e!="number")throw new Error("Invalid timestamp value: "+e);var t=this;if(!t.__isTracking)return;t.__isTracking=!1;if(t.__isDragging){t.__isDragging=!1;if(t.__isSingleTouch&&t.options.animating&&e-t.__lastTouchMove<=100){var n=t.__positions,r=n.length-1,i=r;for(var s=r;s>0&&n[s]>t.__lastTouchMove-100;s-=3)i=s;if(i!==r){var o=n[r]-n[i],u=t.__scrollLeft-n[i-2],a=t.__scrollTop-n[i-1];t.__decelerationVelocityX=u/o*(1e3/60),t.__decelerationVelocityY=a/o*(1e3/60);var f=t.options.paging||t.options.snapping?4:1;if(Math.abs(t.__decelerationVelocityX)>f||Math.abs(t.__decelerationVelocityY)>f)t.__refreshActive||t.__startDeceleration(e)}}}t.__isDecelerating||(t.__refreshActive&&t.__refreshStart?(t.__publish(t.__scrollLeft,-t.__refreshHeight,t.__zoomLevel,!0),t.__refreshStart&&t.__refreshStart()):(t.scrollTo(t.__scrollLeft,t.__scrollTop,!0,t.__zoomLevel),t.__refreshActive&&(t.__refreshActive=!1,t.__refreshDeactivate&&t.__refreshDeactivate()))),t.__positions.length=0},__publish:function(n,r,i,s){var o=this,u=o.__isAnimating;u&&(core.effect.Animate.stop(u),o.__isAnimating=!1);if(s&&o.options.animating){o.__scheduledLeft=n,o.__scheduledTop=r,o.__scheduledZoom=i;var a=o.__scrollLeft,f=o.__scrollTop,l=o.__zoomLevel,c=n-a,h=r-f,p=i-l,d=function(e,t,n){n&&(o.__scrollLeft=a+c*e,o.__scrollTop=f+h*e,o.__zoomLevel=l+p*e,o.__callback&&o.__callback(o.__scrollLeft,o.__scrollTop,o.__zoomLevel))},v=function(e){return o.__isAnimating===e},m=function(e,t,n){t===o.__isAnimating&&(o.__isAnimating=!1),o.options.zooming&&o.__computeScrollMax()};o.__isAnimating=core.effect.Animate.start(d,v,m,o.options.animationDuration,u?e:t)}else o.__scheduledLeft=o.__scrollLeft=n,o.__scheduledTop=o.__scrollTop=r,o.__scheduledZoom=o.__zoomLevel=i,o.__callback&&o.__callback(n,r,i),o.options.zooming&&o.__computeScrollMax()},__computeScrollMax:function(e){var t=this;e==null&&(e=t.__zoomLevel),t.__maxScrollLeft=Math.max(t.__contentWidth*e-t.__clientWidth,0),t.__maxScrollTop=Math.max(t.__contentHeight*e-t.__clientHeight,0)},__startDeceleration:function(e){var t=this;if(t.options.paging){var n=Math.max(Math.min(t.__scrollLeft,t.__maxScrollLeft),0),r=Math.max(Math.min(t.__scrollTop,t.__maxScrollTop),0),i=t.__clientWidth,s=t.__clientHeight;t.__minDecelerationScrollLeft=Math.floor(n/i)*i,t.__minDecelerationScrollTop=Math.floor(r/s)*s,t.__maxDecelerationScrollLeft=Math.ceil(n/i)*i,t.__maxDecelerationScrollTop=Math.ceil(r/s)*s}else t.__minDecelerationScrollLeft=0,t.__minDecelerationScrollTop=0,t.__maxDecelerationScrollLeft=t.__maxScrollLeft,t.__maxDecelerationScrollTop=t.__maxScrollTop;var o=function(e,n,r){t.__stepThroughDeceleration(r)},u=t.options.snapping?4:.1,a=function(){return Math.abs(t.__decelerationVelocityX)>=u||Math.abs(t.__decelerationVelocityY)>=u},f=function(e,n,r){t.__isDecelerating=!1,t.scrollTo(t.__scrollLeft,t.__scrollTop,t.options.snapping)};t.__isDecelerating=core.effect.Animate.start(o,a,f)},__stepThroughDeceleration:function(e){var t=this,n=t.__scrollLeft+t.__decelerationVelocityX,r=t.__scrollTop+t.__decelerationVelocityY;if(!t.options.bouncing){var i=Math.max(Math.min(t.__maxDecelerationScrollLeft,n),t.__minDecelerationScrollLeft);i!==n&&(n=i,t.__decelerationVelocityX=0);var s=Math.max(Math.min(t.__maxDecelerationScrollTop,r),t.__minDecelerationScrollTop);s!==r&&(r=s,t.__decelerationVelocityY=0)}e?t.__publish(n,r,t.__zoomLevel):(t.__scrollLeft=n,t.__scrollTop=r);if(!t.options.paging){var o=.95;t.__decelerationVelocityX*=o,t.__decelerationVelocityY*=o}if(t.options.bouncing){var u=0,a=0,f=.03,l=.08;n<t.__minDecelerationScrollLeft?u=t.__minDecelerationScrollLeft-n:n>t.__maxDecelerationScrollLeft&&(u=t.__maxDecelerationScrollLeft-n),r<t.__minDecelerationScrollTop?a=t.__minDecelerationScrollTop-r:r>t.__maxDecelerationScrollTop&&(a=t.__maxDecelerationScrollTop-r),u!==0&&(u*t.__decelerationVelocityX<=0?t.__decelerationVelocityX+=u*f:t.__decelerationVelocityX=u*l),a!==0&&(a*t.__decelerationVelocityY<=0?t.__decelerationVelocityY+=a*f:t.__decelerationVelocityY=a*l)}}};for(var r in n)Scroller.prototype[r]=n[r]})();var EasyScroller=function(e,t,n){this.content=e,this.container=t,this.options=n||{};var r=this;this.scroller=new Scroller(function(e,t,n){r.render(e,t,n)},n),this.bindEvents(),this.content.style[EasyScroller.vendorPrefix+"TransformOrigin"]="left top",this.reflow()};EasyScroller.prototype.render=function(){var e=document.documentElement.style,t;window.opera&&Object.prototype.toString.call(opera)==="[object Opera]"?t="presto":"MozAppearance"in e?t="gecko":"WebkitAppearance"in e?t="webkit":typeof navigator.cpuClass=="string"&&(t="trident");var n=EasyScroller.vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[t],r=document.createElement("div"),i,s=n+"Perspective",o=n+"Transform";return r.style[s]!==i?function(e,t,n){this.content&&(this.content.style[o]="translate3d("+ -e+"px,"+ -t+"px,0) scale("+n+")")}:r.style[o]!==i?function(e,t,n){this.content&&(this.content.style[o]="translate("+ -e+"px,"+ -t+"px) scale("+n+")")}:function(e,t,n){this.content.style.marginLeft=e?-e/n+"px":"",this.content.style.marginTop=t?-t/n+"px":"",this.content.style.zoom=n||""}}(),EasyScroller.prototype.reflow=function(){if(!this.container)return;this.scroller.setDimensions(this.container.clientWidth,this.container.clientHeight,this.content.offsetWidth,this.content.offsetHeight);var e=this.container.getBoundingClientRect();this.scroller.setPosition(e.left+this.container.clientLeft,e.top+this.container.clientTop)},EasyScroller.prototype.destroy=function(){$(window).off("resize.zynga"),"ontouchstart"in window?($(this.container).off("touchstart.zynga"),$(this.container).off("touchmove.zynga"),$(this.container).off("touchend.zynga"),$(this.container).off("touchcancel.zynga")):($(this.container).off("mousedown.zynga"),$(this.container).off("mousemove.zynga"),$(this.container).off("mouseup.zynga"),$(this.container).off("mousewheel.zynga")),this.content=null,this.container=null},EasyScroller.prototype.bindEvents=function(){var e=this;if("ontouchstart"in window)$(this.container).on("touchstart.zynga",function(t){if(t.touches[0]&&t.touches[0].target&&t.touches[0].target.tagName&&t.touches[0].target.tagName.match(/input|textarea|select/i))return;e.scroller.doTouchStart(t.touches,t.timeStamp)},!1),$(this.container).on("touchmove.zynga",function(t){t.preventDefault(),$.__swipeHelper.swipeOrientation==="vertical"&&e.scroller.doTouchMove(t.touches,t.timeStamp,t.scale)},!1),$(this.container).on("touchend.zynga",function(t){e.scroller.doTouchEnd(t.timeStamp)},!1),$(this.container).on("touchcancel.zynga",function(t){e.scroller.doTouchEnd(t.timeStamp)},!1);else{var t=!1;$(this.container).on("mousedown.zynga",function(n){if(n.target.tagName.match(/input|textarea|select/i))return;e.scroller.doTouchStart([{pageX:n.pageX,pageY:n.pageY}],n.timeStamp),t=!0,n.preventDefault()},!1),$(this.container).on("mousemove.zynga",function(n){if(!t)return;e.scroller.doTouchMove([{pageX:n.pageX,pageY:n.pageY}],n.timeStamp),t=!0},!1),$(this.container).on("mouseup.zynga",function(n){if(!t)return;e.scroller.doTouchEnd(n.timeStamp),t=!1},!1),$(this.container).on("mousewheel.zynga",function(t){e.options.zooming&&(e.scroller.doMouseZoom(t.wheelDelta,t.timeStamp,t.pageX,t.pageY),t.preventDefault())},!1)}},document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("[data-scrollable],[data-zoomable]"),t;for(var n=0;n<e.length;n++){t=e[n];var r=t.dataset.scrollable,i=t.dataset.zoomable||"",s=i.split("-"),o=s.length>1&&parseFloat(s[0]),u=s.length>1&&parseFloat(s[1]);new EasyScroller(t,{scrollingX:r==="true"||r==="x",scrollingY:r==="true"||r==="y",zooming:i==="true"||s.length>1,minZoom:o,maxZoom:u})}},!1),!function(){function e(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function t(e){return null===e?0/0:+e}function n(e){return!isNaN(e)}function r(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}function i(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function o(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function u(){this._=Object.create(null)}function a(e){return(e+="")===gu||e[0]===yu?yu+e:e}function f(e){return(e+="")[0]===yu?e.slice(1):e}function l(e){return a(e)in this._}function c(e){return(e=a(e))in this._&&delete this._[e]}function h(){var e=[];for(var t in this._)e.push(f(t));return e}function p(){var e=0;for(var t in this._)++e;return e}function d(){for(var e in this._)return!1;return!0}function v(){this._=Object.create(null)}function m(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function g(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=bu.length;r>n;++n){var i=bu[n]+t;if(i in e)return i}}function y(){}function b(){}function w(e){function t(){for(var t,r=n,i=-1,s=r.length;++i<s;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new u;return t.on=function(t,i){var s,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function E(){nu.event.preventDefault()}function S(){for(var e,t=nu.event;e=t.sourceEvent;)t=e;return t}function x(e){for(var t=new b,n=0,r=arguments.length;++n<r;)t[arguments[n]]=w(t);return t.of=function(n,r){return function(i){try{var s=i.sourceEvent=nu.event;i.target=e,nu.event=i,t[i.type].apply(n,r)}finally{nu.event=s}}},t}function T(e){return Eu(e,Cu),e}function N(e){return"function"==typeof e?e:function(){return Su(e,this)}}function C(e){return"function"==typeof e?e:function(){return xu(e,this)}}function k(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=nu.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?u:o:e.local?s:i}function L(e){return e.trim().replace(/\s+/g," ")}function A(e){return new RegExp("(?:^|\\s+)"+nu.requote(e)+"(?:\\s+|$)","g")}function O(e){return(e+"").trim().split(/^|\s+/)}function M(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=O(e).map(_);var i=e.length;return"function"==typeof t?r:n}function _(e){var t=A(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",L(i+" "+e))):n.setAttribute("class",L(i.replace(t," ")))}}function D(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?s:i}function P(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function H(e){return"function"==typeof e?e:(e=nu.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function B(){var e=this.parentNode;e&&e.removeChild(this)}function j(e){return{__data__:e}}function F(e){return function(){return Nu(this,e)}}function I(t){return arguments.length||(t=e),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function q(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,s=e[n],o=0,u=s.length;u>o;o++)(i=s[o])&&t(i,o,n);return e}function R(e){return Eu(e,Lu),e}function U(e){var t,n;return function(r,i,s){var o,u=e[s].update,a=u.length;for(s!=n&&(n=s,t=0),i>=t&&(t=i+1);!(o=u[t])&&++t<a;);return o}}function z(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=a(t,iu(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function s(){var t,n=new RegExp("^__on([^.]+)"+nu.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,u=e.indexOf("."),a=W;u>0&&(e=e.slice(0,u));var f=Ou.get(e);return f&&(e=f,a=X),u?t?i:r:t?y:s}function W(e,t){return function(n){var r=nu.event;nu.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{nu.event=r}}}function X(e,t){var n=W(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function V(){var e=".dragsuppress-"+ ++_u,t="click"+e,n=nu.select(uu).on("touchmove"+e,E).on("dragstart"+e,E).on("selectstart"+e,E);if(Mu){var r=ou.style,i=r[Mu];r[Mu]="none"}return function(s){if(n.on(e,null),Mu&&(r[Mu]=i),s){var o=function(){n.on(t,null)};n.on(t,function(){E(),o()},!0),setTimeout(o,0)}}}function $(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Du&&(uu.scrollX||uu.scrollY)){n=nu.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();Du=!i.f&&!i.e,n.remove()}return Du?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function J(){return nu.event.changedTouches[0].identifier}function K(){return nu.event.target}function Q(){return uu}function G(e){return e>0?1:0>e?-1:0}function Y(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Z(e){return e>1?0:-1>e?Bu:Math.acos(e)}function et(e){return e>1?Iu:-1>e?-Iu:Math.asin(e)}function tt(e){return((e=Math.exp(e))-1/e)/2}function nt(e){return((e=Math.exp(e))+1/e)/2}function rt(e){return((e=Math.exp(2*e))-1)/(e+1)}function it(e){return(e=Math.sin(e/2))*e}function st(){}function ot(e,t,n){return this instanceof ot?(this.h=+e,this.s=+t,void (this.l=+n)):arguments.length<2?e instanceof ot?new ot(e.h,e.s,e.l):wt(""+e,Et,ot):new ot(e,t,n)}function ut(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?s+(o-s)*e/60:180>e?o:240>e?s+(o-s)*(240-e)/60:s}function i(e){return Math.round(255*r(e))}var s,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,s=2*n-o,new mt(i(e+120),i(e),i(e-120))}function at(e,t,n){return this instanceof at?(this.h=+e,this.c=+t,void (this.l=+n)):arguments.length<2?e instanceof at?new at(e.h,e.c,e.l):e instanceof lt?ht(e.l,e.a,e.b):ht((e=St((e=nu.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new at(e,t,n)}function ft(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new lt(n,Math.cos(e*=qu)*t,Math.sin(e)*t)}function lt(e,t,n){return this instanceof lt?(this.l=+e,this.a=+t,void (this.b=+n)):arguments.length<2?e instanceof lt?new lt(e.l,e.a,e.b):e instanceof at?ft(e.h,e.c,e.l):St((e=mt(e)).r,e.g,e.b):new lt(e,t,n)}function ct(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=pt(i)*Gu,r=pt(r)*Yu,s=pt(s)*Zu,new mt(vt(3.2404542*i-1.5371385*r-.4985314*s),vt(-0.969266*i+1.8760108*r+.041556*s),vt(.0556434*i-.2040259*r+1.0572252*s))}function ht(e,t,n){return e>0?new at(Math.atan2(n,t)*Ru,Math.sqrt(t*t+n*n),e):new at(0/0,0/0,e)}function pt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function dt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function vt(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function mt(e,t,n){return this instanceof mt?(this.r=~~e,this.g=~~t,void (this.b=~~n)):arguments.length<2?e instanceof mt?new mt(e.r,e.g,e.b):wt(""+e,mt,ut):new mt(e,t,n)}function gt(e){return new mt(e>>16,255&e>>8,255&e)}function yt(e){return gt(e)+""}function bt(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function wt(e,t,n){var r,i,s,o=0,u=0,a=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Tt(i[0]),Tt(i[1]),Tt(i[2]))}return(s=na.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&s)>>4,o=o>>4|o,u=240&s,u=u>>4|u,a=15&s,a=a<<4|a):7===e.length&&(o=(16711680&s)>>16,u=(65280&s)>>8,a=255&s)),t(o,u,a))}function Et(e,t,n){var r,i,s=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),u=o-s,a=(o+s)/2;return u?(i=.5>a?u/(o+s):u/(2-o-s),r=e==o?(t-n)/u+(n>t?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):(r=0/0,i=a>0&&1>a?0:r),new ot(r,i,a)}function St(e,t,n){e=xt(e),t=xt(t),n=xt(n);var r=dt((.4124564*e+.3575761*t+.1804375*n)/Gu),i=dt((.2126729*e+.7151522*t+.072175*n)/Yu),s=dt((.0193339*e+.119192*t+.9503041*n)/Zu);return lt(116*i-16,500*(r-i),200*(i-s))}function xt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Tt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Nt(e){return"function"==typeof e?e:function(){return e}}function Ct(e){return e}function kt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Lt(t,n,e,r)}}function Lt(e,t,n,r){function i(){var e,t=a.status;if(!t&&Ot(a)||t>=200&&300>t||304===t){try{e=n.call(s,a)}catch(r){return o.error.call(s,r),void 0}o.load.call(s,e)}else o.error.call(s,a)}var s={},o=nu.dispatch("beforesend","progress","load","error"),u={},a=new XMLHttpRequest,f=null;return!uu.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=i:a.onreadystatechange=function(){a.readyState>3&&i()},a.onprogress=function(e){var t=nu.event;nu.event=e;try{o.progress.call(s,a)}finally{nu.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",s):t},s.responseType=function(e){return arguments.length?(f=e,s):f},s.response=function(e){return n=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(iu(arguments)))}}),s.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),a.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),a.setRequestHeader)for(var l in u)a.setRequestHeader(l,u[l]);return null!=t&&a.overrideMimeType&&a.overrideMimeType(t),null!=f&&(a.responseType=f),null!=i&&s.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(s,a),a.send(null==r?null:r),s},s.abort=function(){return a.abort(),s},nu.rebind(s,o,"on"),null==r?s:s.get(At(r))}function At(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Ot(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Mt(){var e=_t(),t=Dt()-e;t>24?(isFinite(t)&&(clearTimeout(oa),oa=setTimeout(Mt,t)),sa=0):(sa=1,aa(Mt))}function _t(){var e=Date.now();for(ua=ra;ua;)e>=ua.t&&(ua.f=ua.c(e-ua.t)),ua=ua.n;return e}function Dt(){for(var e,t=ra,n=1/0;t;)t.f?t=e?e.n=t.n:ra=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return ia=e,n}function Pt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Ht(e,t){var n=Math.pow(10,3*mu(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Bt(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,s=r&&n?function(e,t){for(var i=e.length,s=[],o=0,u=r[0],a=0;i>0&&u>0&&(a+u+1>t&&(u=Math.max(1,t-a)),s.push(e.substring(i-=u,i+u)),!((a+=u+1)>t));)u=r[o=(o+1)%r.length];return s.reverse().join(n)}:Ct;return function(e){var n=la.exec(e),r=n[1]||" ",o=n[2]||">",u=n[3]||"-",a=n[4]||"",f=n[5],l=+n[6],c=n[7],h=n[8],p=n[9],d=1,v="",m="",g=!1,y=!0;switch(h&&(h=+h.substring(1)),(f||"0"===r&&"="===o)&&(f=r="0",o="="),p){case"n":c=!0,p="g";break;case"%":d=100,m="%",p="f";break;case"p":d=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===a&&(v="0"+p.toLowerCase());case"c":y=!1;case"d":g=!0,h=0;break;case"s":d=-1,p="r"}"$"===a&&(v=i[0],m=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=ca.get(p)||jt;var b=f&&c;return function(e){var n=m;if(g&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===u?"":u;if(0>d){var a=nu.formatPrefix(e,h);e=a.scale(e),n=a.symbol+m}else e*=d;e=p(e,h);var w,E,S=e.lastIndexOf(".");if(0>S){var x=y?e.lastIndexOf("e"):-1;0>x?(w=e,E=""):(w=e.substring(0,x),E=e.substring(x))}else w=e.substring(0,S),E=t+e.substring(S+1);!f&&c&&(w=s(w,1/0));var T=v.length+w.length+E.length+(b?0:i.length),N=l>T?(new Array(T=l-T+1)).join(r):"";return b&&(w=s(N+w,N.length?l-E.length:1/0)),i+=v,e=w+E,("<"===o?i+e+N:">"===o?N+i+e:"^"===o?N.substring(0,T>>=1)+i+e+N.substring(T):i+(b?e:N+e))+n}}}function jt(e){return e+""}function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function It(e,t,n){function r(t){var n=e(t),r=s(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new pa(n-1)),1),n}function s(e,n){return t(e=new pa(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)for(;r>o;)n(o)%s||u.push(new Date(+o)),t(o,1);else for(;r>o;)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{pa=Ft;var r=new Ft;return r._=e,o(r,t,n)}finally{pa=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=qt(e);return a.floor=a,a.round=qt(r),a.ceil=qt(i),a.offset=qt(s),a.range=u,e}function qt(e){return function(t,n){try{pa=Ft;var r=new Ft;return r._=t,e(r,n)._}finally{pa=Date}}}function Rt(e){function t(e){function t(t){for(var n,i,s,o=[],u=-1,a=0;++u<r;)37===e.charCodeAt(u)&&(o.push(e.slice(a,u)),null!=(i=va[n=e.charAt(++u)])&&(n=e.charAt(++u)),(s=L[n])&&(n=s(t,null==i?"e"===n?" ":"0":i)),o.push(n),a=u+1);return o.push(e.slice(a,u)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var s=null!=r.Z&&pa!==Ft,o=new(s?Ft:pa);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(0|r.Z/100),r.M+r.Z%100,r.S,r.L),s?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,s,o,u=0,a=t.length,f=n.length;a>u;){if(r>=f)return-1;if(i=t.charCodeAt(u++),37===i){if(o=t.charAt(u++),s=A[o in va?t.charAt(u++):o],!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){S.lastIndex=0;var r=S.exec(t.slice(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){w.lastIndex=0;var r=w.exec(t.slice(n));return r?(e.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,n){C.lastIndex=0;var r=C.exec(t.slice(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){T.lastIndex=0;var r=T.exec(t.slice(n));return r?(e.m=N.get(r[0].toLowerCase()),n+r[0].length):-1}function u(e,t,r){return n(e,L.c.toString(),t,r)}function a(e,t,r){return n(e,L.x.toString(),t,r)}function f(e,t,r){return n(e,L.X.toString(),t,r)}function l(e,t,n){var r=b.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var c=e.dateTime,h=e.date,p=e.time,d=e.periods,v=e.days,m=e.shortDays,g=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{pa=Ft;var t=new pa;return t._=e,r(t)}finally{pa=Date}}var r=t(e);return n.parse=function(e){try{pa=Ft;var t=r.parse(e);return t&&t._}finally{pa=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=an;var b=nu.map(),w=zt(v),E=Wt(v),S=zt(m),x=Wt(m),T=zt(g),N=Wt(g),C=zt(y),k=Wt(y);d.forEach(function(e,t){b.set(e.toLowerCase(),t)});var L={a:function(e){return m[e.getDay()]},A:function(e){return v[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return g[e.getMonth()]},c:t(c),d:function(e,t){return Ut(e.getDate(),t,2)},e:function(e,t){return Ut(e.getDate(),t,2)},H:function(e,t){return Ut(e.getHours(),t,2)},I:function(e,t){return Ut(e.getHours()%12||12,t,2)},j:function(e,t){return Ut(1+ha.dayOfYear(e),t,3)},L:function(e,t){return Ut(e.getMilliseconds(),t,3)},m:function(e,t){return Ut(e.getMonth()+1,t,2)},M:function(e,t){return Ut(e.getMinutes(),t,2)},p:function(e){return d[+(e.getHours()>=12)]},S:function(e,t){return Ut(e.getSeconds(),t,2)},U:function(e,t){return Ut(ha.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ut(ha.mondayOfYear(e),t,2)},x:t(h),X:t(p),y:function(e,t){return Ut(e.getFullYear()%100,t,2)},Y:function(e,t){return Ut(e.getFullYear()%1e4,t,4)},Z:on,"%":function(){return"%"}},A={a:r,A:i,b:s,B:o,c:u,d:Zt,e:Zt,H:tn,I:tn,j:en,L:sn,m:Yt,M:nn,p:l,S:rn,U:Vt,w:Xt,W:$t,x:a,X:f,y:Kt,Y:Jt,Z:Qt,"%":un};return t}function Ut(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",s=i.length;return r+(n>s?(new Array(n-s+1)).join(t)+i:i)}function zt(e){return new RegExp("^(?:"+e.map(nu.requote).join("|")+")","i")}function Wt(e){for(var t=new u,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Xt(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Vt(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function $t(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Jt(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Kt(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+2));return r?(e.y=Gt(+r[0]),n+r[0].length):-1}function Qt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Gt(e){return e+(e>68?1900:2e3)}function Yt(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Zt(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function en(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function tn(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function nn(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function rn(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function sn(e,t,n){ma.lastIndex=0;var r=ma.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function on(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=0|mu(t)/60,i=mu(t)%60;return n+Ut(r,"0",2)+Ut(i,"0",2)}function un(e,t,n){ga.lastIndex=0;var r=ga.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function an(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function fn(){}function ln(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function cn(e,t){e&&Ea.hasOwnProperty(e.type)&&Ea[e.type](e,t)}function hn(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function pn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)hn(e[n],t,1);t.polygonEnd()}function dn(){function e(e,t){e*=qu,t=t*qu/2+Bu/4;var n=e-r,o=n>=0?1:-1,u=o*n,a=Math.cos(t),f=Math.sin(t),l=s*f,c=i*a+l*Math.cos(u),h=l*o*Math.sin(u);xa.add(Math.atan2(h,c)),r=e,i=a,s=f}var t,n,r,i,s;Ta.point=function(o,u){Ta.point=e,r=(t=o)*qu,i=Math.cos(u=(n=u)*qu/2+Bu/4),s=Math.sin(u)},Ta.lineEnd=function(){e(t,n)}}function vn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function mn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function yn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function bn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function wn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function En(e){return[Math.atan2(e[1],e[0]),et(e[2])]}function Sn(e,t){return mu(e[0]-t[0])<Pu&&mu(e[1]-t[1])<Pu}function xn(e,t){e*=qu;var n=Math.cos(t*=qu);Tn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Tn(e,t,n){++Na,ka+=(e-ka)/Na,La+=(t-La)/Na,Aa+=(n-Aa)/Na}function Nn(){function e(e,i){e*=qu;var s=Math.cos(i*=qu),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=n*a-r*u)*f+(f=r*o-t*a)*f+(f=t*u-n*o)*f),t*o+n*u+r*a);Ca+=f,Oa+=f*(t+(t=o)),Ma+=f*(n+(n=u)),_a+=f*(r+(r=a)),Tn(t,n,r)}var t,n,r;Ba.point=function(i,s){i*=qu;var o=Math.cos(s*=qu);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(s),Ba.point=e,Tn(t,n,r)}}function Cn(){Ba.point=xn}function kn(){function e(e,t){e*=qu;var n=Math.cos(t*=qu),o=n*Math.cos(e),u=n*Math.sin(e),a=Math.sin(t),f=i*a-s*u,l=s*o-r*a,c=r*u-i*o,h=Math.sqrt(f*f+l*l+c*c),p=r*o+i*u+s*a,d=h&&-Z(p)/h,v=Math.atan2(h,p);Da+=d*f,Pa+=d*l,Ha+=d*c,Ca+=v,Oa+=v*(r+(r=o)),Ma+=v*(i+(i=u)),_a+=v*(s+(s=a)),Tn(r,i,s)}var t,n,r,i,s;Ba.point=function(o,u){t=o,n=u,Ba.point=e,o*=qu;var a=Math.cos(u*=qu);r=a*Math.cos(o),i=a*Math.sin(o),s=Math.sin(u),Tn(r,i,s)},Ba.lineEnd=function(){e(t,n),Ba.lineEnd=Cn,Ba.point=xn}}function Ln(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function An(){return!0}function On(e,t,n,r,i){var s=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Sn(n,r)){i.lineStart();for(var u=0;t>u;++u)i.point((n=e[u])[0],n[1]);return i.lineEnd(),void 0}var a=new _n(n,e,null,!0),f=new _n(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new _n(r,e,null,!1),f=new _n(r,null,a,!0),a.o=f,s.push(a),o.push(f)}}),o.sort(t),Mn(s),Mn(o),s.length){for(var u=0,a=n,f=o.length;f>u;++u)o[u].e=a=!a;for(var l,c,h=s[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,f=l.length;f>u;++u)i.point((c=l[u])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var u=l.length-1;u>=0;--u)i.point((c=l[u])[0],c[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Mn(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function _n(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Dn(e,t,n,r){return function(i,s){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&s.point(t,n)}function u(e,t){var n=i(e,t);m.point(n[0],n[1])}function a(){y.point=u,m.lineStart()}function f(){y.point=o,m.lineEnd()}function l(e,t){v.push([e,t]);var n=i(e,t);w.point(n[0],n[1])}function c(){w.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),r=n.length;if(v.pop(),d.push(v),v=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(E||(s.polygonStart(),E=!0),s.lineStart();++o<r;)s.point((i=e[o])[0],i[1]);s.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Pn))}var p,d,v,m=t(s),g=i.invert(r[0],r[1]),y={point:o,lineStart:a,lineEnd:f,polygonStart:function(){y.point=l,y.lineStart=c,y.lineEnd=h,p=[],d=[]},polygonEnd:function(){y.point=o,y.lineStart=a,y.lineEnd=f,p=nu.merge(p);var e=qn(g,d);p.length?(E||(s.polygonStart(),E=!0),On(p,Bn,e,n,s)):e&&(E||(s.polygonStart(),E=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),E&&(s.polygonEnd(),E=!1),p=d=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}},b=Hn(),w=t(b),E=!1;return y}}function Pn(e){return e.length>1}function Hn(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:y,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Bn(e,t){return((e=e.x)[0]<0?e[1]-Iu-Pu:Iu-e[1])-((t=t.x)[0]<0?t[1]-Iu-Pu:Iu-t[1])}function jn(e){var t,n=0/0,r=0/0,i=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var u=s>0?Bu:-Bu,a=mu(s-n);mu(a-Bu)<Pu?(e.point(n,r=(r+o)/2>0?Iu:-Iu),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(s,r),t=0):i!==u&&a>=Bu&&(mu(n-i)<Pu&&(n-=i*Pu),mu(s-u)<Pu&&(s-=u*Pu),r=Fn(n,r,s,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=s,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function Fn(e,t,n,r){var i,s,o=Math.sin(e-n);return mu(o)>Pu?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function In(e,t,n,r){var i;if(null==e)i=n*Iu,r.point(-Bu,i),r.point(0,i),r.point(Bu,i),r.point(Bu,0),r.point(Bu,-i),r.point(0,-i),r.point(-Bu,-i),r.point(-Bu,0),r.point(-Bu,i);else if(mu(e[0]-t[0])>Pu){var s=e[0]<t[0]?Bu:-Bu;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function qn(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;xa.reset();for(var u=0,a=t.length;a>u;++u){var f=t[u],l=f.length;if(l)for(var c=f[0],h=c[0],p=c[1]/2+Bu/4,d=Math.sin(p),v=Math.cos(p),m=1;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+Bu/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=E>=0?1:-1,x=S*E,T=x>Bu,N=d*b;if(xa.add(Math.atan2(N*S*Math.sin(x),v*w+N*Math.cos(x))),s+=T?E+S*ju:E,T^h>=n^g>=n){var C=gn(vn(c),vn(e));wn(C);var k=gn(i,C);wn(k);var L=(T^E>=0?-1:1)*et(k[2]);(r>L||r===L&&(C[0]||C[1]))&&(o+=T^E>=0?1:-1)}if(!(m++))break;h=g,d=b,v=w,c=e}}return(-Pu>s||Pu>s&&0>xa)^1&o}function Rn(e){function t(e,t){return Math.cos(e)*Math.cos(t)>s}function n(e){var n,s,a,f,l;return{lineStart:function(){f=a=!1,l=1},point:function(c,h){var p,d=[c,h],v=t(c,h),m=o?v?0:i(c,h):v?i(c+(0>c?Bu:-Bu),h):0;if(!n&&(f=a=v)&&e.lineStart(),v!==a&&(p=r(n,d),(Sn(n,p)||Sn(d,p))&&(d[0]+=Pu,d[1]+=Pu,v=t(d[0],d[1]))),v!==a)l=0,v?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(u&&n&&o^v){var g;m&s||!(g=r(d,n,!0))||(l=0,o?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!v||n&&Sn(n,d)||e.point(d[0],d[1]),n=d,a=v,s=m},lineEnd:function(){a&&e.lineEnd(),n=null},clean:function(){return l|(f&&a)<<1}}}function r(e,t,n){var r=vn(e),i=vn(t),o=[1,0,0],u=gn(r,i),a=mn(u,u),f=u[0],l=a-f*f;if(!l)return!n&&e;var c=s*a/l,h=-s*f/l,p=gn(o,u),d=bn(o,c),v=bn(u,h);yn(d,v);var m=p,g=mn(d,m),y=mn(m,m),b=g*g-y*(mn(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),E=bn(m,(-g-w)/y);if(yn(E,d),E=En(E),!n)return E;var S,x=e[0],T=t[0],N=e[1],C=t[1];x>T&&(S=x,x=T,T=S);var k=T-x,L=mu(k-Bu)<Pu,A=L||Pu>k;if(!L&&N>C&&(S=N,N=C,C=S),A?L?N+C>0^E[1]<(mu(E[0]-x)<Pu?N:C):N<=E[1]&&E[1]<=C:k>Bu^(x<=E[0]&&E[0]<=T)){var O=bn(m,(-g+w)/y);return yn(O,d),[E,En(O)]}}}function i(t,n){var r=o?e:Bu-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var s=Math.cos(e),o=s>0,u=mu(s)>Pu,a=dr(e,6*qu);return Dn(t,n,a,o?[0,-e]:[-Bu,e-Bu])}function Un(e,t,n,r){return function(i){var s,o=i.a,u=i.b,a=o.x,f=o.y,l=u.x,c=u.y,h=0,p=1,d=l-a,v=c-f;if(s=e-a,d||!(s>0)){if(s/=d,0>d){if(h>s)return;p>s&&(p=s)}else if(d>0){if(s>p)return;s>h&&(h=s)}if(s=n-a,d||!(0>s)){if(s/=d,0>d){if(s>p)return;s>h&&(h=s)}else if(d>0){if(h>s)return;p>s&&(p=s)}if(s=t-f,v||!(s>0)){if(s/=v,0>v){if(h>s)return;p>s&&(p=s)}else if(v>0){if(s>p)return;s>h&&(h=s)}if(s=r-f,v||!(0>s)){if(s/=v,0>v){if(s>p)return;s>h&&(h=s)}else if(v>0){if(h>s)return;p>s&&(p=s)}return h>0&&(i.a={x:a+h*d,y:f+h*v}),1>p&&(i.b={x:a+p*d,y:f+p*v}),i}}}}}}function zn(e,t,n,r){function i(r,i){return mu(r[0]-e)<Pu?i>0?0:3:mu(r[0]-n)<Pu?i>0?2:1:mu(r[1]-t)<Pu?i>0?1:0:i>0?3:2}function s(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(u){function a(e){for(var t=0,n=m.length,r=e[1],i=0;n>i;++i)for(var s,o=1,u=m[i],a=u.length,f=u[0];a>o;++o)s=u[o],f[1]<=r?s[1]>r&&Y(f,s,e)>0&&++t:s[1]<=r&&Y(f,s,e)<0&&--t,f=s;return 0!==t}function f(s,u,a,f){var l=0,c=0;if(null==s||(l=i(s,a))!==(c=i(u,a))||o(s,u)<0^a>0){do f.point(0===l||3===l?e:n,l>1?r:t);while((l=(l+a+4)%4)!==c)}else f.point(u[0],u[1])}function l(i,s){return i>=e&&n>=i&&s>=t&&r>=s}function c(e,t){l(e,t)&&u.point(e,t)}function h(){A.point=d,m&&m.push(g=[]),T=!0,x=!1,E=S=0/0}function p(){v&&(d(y,b),w&&x&&k.rejoin(),v.push(k.buffer())),A.point=c,x&&u.lineEnd()}function d(e,t){e=Math.max(-Fa,Math.min(Fa,e)),t=Math.max(-Fa,Math.min(Fa,t));var n=l(e,t);if(m&&g.push([e,t]),T)y=e,b=t,w=n,T=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&x)u.point(e,t);else{var r={a:{x:E,y:S},b:{x:e,y:t}};L(r)?(x||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),N=!1):n&&(u.lineStart(),u.point(e,t),N=!1)}E=e,S=t,x=n}var v,m,g,y,b,w,E,S,x,T,N,C=u,k=Hn(),L=Un(e,t,n,r),A={point:c,lineStart:h,lineEnd:p,polygonStart:function(){u=k,v=[],m=[],N=!0},polygonEnd:function(){u=C,v=nu.merge(v);var t=a([e,r]),n=N&&t,i=v.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),f(null,null,1,u),u.lineEnd()),i&&On(v,s,t,f,u),u.polygonEnd()),v=m=g=null}};return A}}function Wn(e){var t=0,n=Bu/3,r=or(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Bu/180,n=e[1]*Bu/180):[180*(t/Bu),180*(n/Bu)]},i}function Xn(e,t){function n(e,t){var n=Math.sqrt(s-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,s=1+r*(2*i-r),o=Math.sqrt(s)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,et((s-(e*e+n*n)*i*i)/(2*i))]},n}function Vn(){function e(e,t){qa+=i*e-r*t,r=e,i=t}var t,n,r,i;Xa.point=function(s,o){Xa.point=e,t=r=s,n=i=o},Xa.lineEnd=function(){e(t,n)}}function $n(e,t){Ra>e&&(Ra=e),e>za&&(za=e),Ua>t&&(Ua=t),t>Wa&&(Wa=t)}function Jn(){function e(e,t){o.push("M",e,",",t,s)}function t(e,t){o.push("M",e,",",t),u.point=n}function n(e,t){o.push("L",e,",",t)}function r(){u.point=e}function i(){o.push("Z")}var s=Kn(4.5),o=[],u={point:e,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=e},pointRadius:function(e){return s=Kn(e),u},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return u}function Kn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Qn(e,t){ka+=e,La+=t,++Aa}function Gn(){function e(e,r){var i=e-t,s=r-n,o=Math.sqrt(i*i+s*s);Oa+=o*(t+e)/2,Ma+=o*(n+r)/2,_a+=o,Qn(t=e,n=r)}var t,n;$a.point=function(r,i){$a.point=e,Qn(t=r,n=i)}}function Yn(){$a.point=Qn}function Zn(){function e(e,t){var n=e-r,s=t-i,o=Math.sqrt(n*n+s*s);Oa+=o*(r+e)/2,Ma+=o*(i+t)/2,_a+=o,o=i*e-r*t,Da+=o*(r+e),Pa+=o*(i+t),Ha+=3*o,Qn(r=e,i=t)}var t,n,r,i;$a.point=function(s,o){$a.point=e,Qn(t=r=s,n=i=o)},$a.lineEnd=function(){e(t,n)}}function er(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,ju)}function n(t,n){e.moveTo(t,n),u.point=r}function r(t,n){e.lineTo(t,n)}function i(){u.point=t}function s(){e.closePath()}var o=4.5,u={point:t,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=s},polygonEnd:function(){u.lineEnd=i,u.point=t},pointRadius:function(e){return o=e,u},result:y};return u}function tr(e){function t(e){return(u?r:n)(e)}function n(t){return ir(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=0/0,T.point=s,t.lineStart()}function s(n,r){var s=vn([n,r]),o=e(n,r);i(b,w,y,E,S,x,b=o[0],w=o[1],y=n,E=s[0],S=s[1],x=s[2],u,t),t.point(b,w)}function o(){T.point=n,t.lineEnd()}function a(){r(),T.point=f,T.lineEnd=l}function f(e,t){s(c=e,h=t),p=b,d=w,v=E,m=S,g=x,T.point=s}function l(){i(b,w,y,E,S,x,p,d,c,v,m,g,u,t),T.lineEnd=o,o()}var c,h,p,d,v,m,g,y,b,w,E,S,x,T={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),T.lineStart=a},polygonEnd:function(){t.polygonEnd(),T.lineStart=r}};return T}function i(t,n,r,u,a,f,l,c,h,p,d,v,m,g){var y=l-t,b=c-n,w=y*y+b*b;if(w>4*s&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=mu(mu(x)-1)<Pu||mu(r-h)<Pu?(r+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-t,M=A-n,_=b*O-y*M;(_*_/w>s||mu((y*O+b*M)/w-.5)>.3||o>u*p+a*d+f*v)&&(i(t,n,r,u,a,f,L,A,C,E/=T,S/=T,x,m,g),g.point(L,A),i(L,A,C,E,S,x,l,c,h,p,d,v,m,g))}}var s=.5,o=Math.cos(30*qu),u=16;return t.precision=function(e){return arguments.length?(u=(s=e*e)>0&&16,t):Math.sqrt(s)},t}function nr(e){var t=tr(function(t,n){return e([t*Ru,n*Ru])});return function(e){return ur(t(e))}}function rr(e){this.stream=e}function ir(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function sr(e){return or(function(){return e})()}function or(e){function t(e){return e=u(e[0]*qu,e[1]*qu),[e[0]*h+a,f-e[1]*h]}function n(e){return e=u.invert((e[0]-a)/h,(f-e[1])/h),e&&[e[0]*Ru,e[1]*Ru]}function r(){u=Ln(o=lr(g,y,b),s);var e=s(v,m);return a=p-e[0]*h,f=d+e[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),t}var s,o,u,a,f,l,c=tr(function(e,t){return e=s(e,t),[e[0]*h+a,f-e[1]*h]}),h=150,p=480,d=250,v=0,m=0,g=0,y=0,b=0,w=ja,E=Ct,S=null,x=null;return t.stream=function(e){return l&&(l.valid=!1),l=ur(w(o,c(E(e)))),l.valid=!0,l},t.clipAngle=function(e){return arguments.length?(w=null==e?(S=e,ja):Rn((S=+e)*qu),i()):S},t.clipExtent=function(e){return arguments.length?(x=e,E=e?zn(e[0][0],e[0][1],e[1][0],e[1][1]):Ct,i()):x},t.scale=function(e){return arguments.length?(h=+e,r()):h},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(v=e[0]%360*qu,m=e[1]%360*qu,r()):[v*Ru,m*Ru]},t.rotate=function(e){return arguments.length?(g=e[0]%360*qu,y=e[1]%360*qu,b=e.length>2?e[2]%360*qu:0,r()):[g*Ru,y*Ru,b*Ru]},nu.rebind(t,c,"precision"),function(){return s=e.apply(this,arguments),t.invert=s.invert&&n,r()}}function ur(e){return ir(e,function(t,n){e.point(t*qu,n*qu)})}function ar(e,t){return[e,t]}function fr(e,t){return[e>Bu?e-ju:-Bu>e?e+ju:e,t]}function lr(e,t,n){return e?t||n?Ln(hr(e),pr(t,n)):hr(e):t||n?pr(t,n):fr}function cr(e){return function(t,n){return t+=e,[t>Bu?t-ju:-Bu>t?t+ju:t,n]}}function hr(e){var t=cr(e);return t.invert=cr(-e),t}function pr(e,t){function n(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*r+u*i;return[Math.atan2(a*s-l*o,u*r-f*i),et(l*s+a*o)]}var r=Math.cos(e),i=Math.sin(e),s=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*s-a*o;return[Math.atan2(a*s+f*o,u*r+l*i),et(l*r-u*i)]},n}function dr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;null!=i?(i=vr(n,i),s=vr(n,s),(o>0?s>i:i>s)&&(i+=o*ju)):(i=e+o*ju,s=e-.5*a);for(var f,l=i;o>0?l>s:s>l;l-=a)u.point((f=En([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function vr(e,t){var n=vn(t);n[0]-=e,wn(n);var r=Z(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Pu)%(2*Math.PI)}function mr(e,t,n){var r=nu.range(e,t-Pu,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function gr(e,t,n){var r=nu.range(e,t-Pu,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function yr(e){return e.source}function br(e){return e.target}function wr(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(it(r-t)+i*o*it(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Ru,Math.atan2(o,Math.sqrt(r*r+i*i))*Ru]}:function(){return[e*Ru,t*Ru]};return d.distance=h,d}function Er(){function e(e,i){var s=Math.sin(i*=qu),o=Math.cos(i),u=mu((e*=qu)-t),a=Math.cos(u);Ja+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*s-n*o*a)*u),n*s+r*o*a),t=e,n=s,r=o}var t,n,r;Ka.point=function(i,s){t=i*qu,n=Math.sin(s*=qu),r=Math.cos(s),Ka.point=e},Ka.lineEnd=function(){Ka.point=Ka.lineEnd=y}}function Sr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function xr(e,t){function n(e,t){o>0?-Iu+Pu>t&&(t=-Iu+Pu):t>Iu-Pu&&(t=Iu-Pu);var n=o/Math.pow(i(t),s);return[n*Math.sin(s*e),o-n*Math.cos(s*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Bu/4+e/2)},s=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),s)/s;return s?(n.invert=function(e,t){var n=o-t,r=G(s)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/s,2*Math.atan(Math.pow(o/r,1/s))-Iu]},n):Nr}function Tr(e,t){function n(e,t){var n=s-t;return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),s=r/i+e;return mu(i)<Pu?ar:(n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/i,s-G(i)*Math.sqrt(e*e+n*n)]},n)}function Nr(e,t){return[e,Math.log(Math.tan(Bu/4+t/2))]}function Cr(e){var t,n=sr(e),r=n.scale,i=n.translate,s=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=s.apply(n,arguments);if(o===n){if(t=null==e){var u=Bu*r(),a=i();s([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else t&&(o=null);return o},n.clipExtent(null)}function kr(e,t){return[Math.log(Math.tan(Bu/4+t/2)),-e]}function Lr(e){return e[0]}function Ar(e){return e[1]}function Or(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&Y(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Mr(e,t){return e[0]-t[0]||e[1]-t[1]}function _r(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Dr(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function Pr(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Hr(){ni(this),this.edge=this.site=this.circle=null}function Br(e){var t=af.pop()||new Hr;return t.site=e,t}function jr(e){$r(e),sf.remove(e),af.push(e),ni(e)}function Fr(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];jr(e);for(var a=s;a.circle&&mu(n-a.circle.x)<Pu&&mu(r-a.circle.cy)<Pu;)s=a.P,u.unshift(a),jr(a),a=s;u.unshift(a),$r(a);for(var f=o;f.circle&&mu(n-f.circle.x)<Pu&&mu(r-f.circle.cy)<Pu;)o=f.N,u.push(f),jr(f),f=o;u.push(f),$r(f);var l,c=u.length;for(l=1;c>l;++l)f=u[l],a=u[l-1],Zr(f.edge,a.site,f.site,i);a=u[0],f=u[c-1],f.edge=Gr(a.site,f.site,null,i),Vr(a),Vr(f)}function Ir(e){for(var t,n,r,i,s=e.x,o=e.y,u=sf._;u;)if(r=qr(u,o)-s,r>Pu)u=u.L;else{if(i=s-Rr(u,o),!(i>Pu)){r>-Pu?(t=u.P,n=u):i>-Pu?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}var a=Br(e);if(sf.insert(t,a),t||n){if(t===n)return $r(t),n=Br(t.site),sf.insert(a,n),a.edge=n.edge=Gr(t.site,a.site),Vr(t),Vr(n),void 0;if(!n)return a.edge=Gr(t.site,a.site),void 0;$r(t),$r(n);var f=t.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=n.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};Zr(n.edge,f,d,w),a.edge=Gr(f,e,null,w),n.edge=Gr(e,d,null,w),Vr(t),Vr(n)}}function qr(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-1/0;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function Rr(e,t){var n=e.N;if(n)return qr(n,t);var r=e.site;return r.y===t?r.x:1/0}function Ur(e){this.site=e,this.edges=[]}function zr(e){for(var t,n,r,i,s,o,u,a,f,l,c=e[0][0],h=e[1][0],p=e[0][1],d=e[1][1],v=rf,m=v.length;m--;)if(s=v[m],s&&s.prepare())for(u=s.edges,a=u.length,o=0;a>o;)l=u[o].end(),r=l.x,i=l.y,f=u[++o%a].start(),t=f.x,n=f.y,(mu(r-t)>Pu||mu(i-n)>Pu)&&(u.splice(o,0,new ei(Yr(s.site,l,mu(r-c)<Pu&&d-i>Pu?{x:c,y:mu(t-c)<Pu?n:d}:mu(i-d)<Pu&&h-r>Pu?{x:mu(n-d)<Pu?t:h,y:d}:mu(r-h)<Pu&&i-p>Pu?{x:h,y:mu(t-h)<Pu?n:p}:mu(i-p)<Pu&&r-c>Pu?{x:mu(n-p)<Pu?t:c,y:p}:null),s.site,null)),++a)}function Wr(e,t){return t.angle-e.angle}function Xr(){ni(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,s=n.site;if(r!==s){var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(!(h>=-Hu)){var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=ff.pop()||new Xr;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;for(var y=null,b=uf._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}uf.insert(y,g),y||(of=g)}}}}function $r(e){var t=e.circle;t&&(t.P||(of=t.N),uf.remove(t),ff.push(t),ni(t),e.circle=null)}function Jr(e){for(var t,n=nf,r=Un(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Kr(t,e)||!r(t)||mu(t.a.x-t.b.x)<Pu&&mu(t.a.y-t.b.y)<Pu)&&(t.a=t.b=null,n.splice(i,1))}function Kr(e,t){var n=e.b;if(n)return!0;var r,i,s=e.a,o=t[0][0],u=t[1][0],a=t[0][1],f=t[1][1],l=e.l,c=e.r,h=l.x,p=l.y,d=c.x,v=c.y,m=(h+d)/2,g=(p+v)/2;if(v===p){if(o>m||m>=u)return;if(h>d){if(s){if(s.y>=f)return}else s={x:m,y:a};n={x:m,y:f}}else{if(s){if(s.y<a)return}else s={x:m,y:f};n={x:m,y:a}}}else if(r=(h-d)/(v-p),i=g-r*m,-1>r||r>1)if(h>d){if(s){if(s.y>=f)return}else s={x:(a-i)/r,y:a};n={x:(f-i)/r,y:f}}else{if(s){if(s.y<a)return}else s={x:(f-i)/r,y:f};n={x:(a-i)/r,y:a}}else if(v>p){if(s){if(s.x>=u)return}else s={x:o,y:r*o+i};n={x:u,y:r*u+i}}else{if(s){if(s.x<o)return}else s={x:u,y:r*u+i};n={x:o,y:r*o+i}}return e.a=s,e.b=n,!0}function Qr(e,t){this.l=e,this.r=t,this.a=this.b=null}function Gr(e,t,n,r){var i=new Qr(e,t);return nf.push(i),n&&Zr(i,e,t,n),r&&Zr(i,t,e,r),rf[e.i].edges.push(new ei(i,e,t)),rf[t.i].edges.push(new ei(i,t,e)),i}function Yr(e,t,n){var r=new Qr(e,null);return r.a=t,r.b=n,nf.push(r),r}function Zr(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function ei(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ti(){this._=null}function ni(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ri(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ii(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function si(e){for(;e.L;)e=e.L;return e}function oi(e,t){var n,r,i,s=e.sort(ui).pop();for(nf=[],rf=new Array(e.length),sf=new ti,uf=new ti;;)if(i=of,s&&(!i||s.y<i.y||s.y===i.y&&s.x<i.x))(s.x!==n||s.y!==r)&&(rf[s.i]=new Ur(s),Ir(s),n=s.x,r=s.y),s=e.pop();else{if(!i)break;Fr(i.arc)}t&&(Jr(t),zr(t));var o={cells:rf,edges:nf};return sf=uf=nf=rf=null,o}function ui(e,t){return t.y-e.y||t.x-e.x}function ai(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function fi(e){return e.x}function li(e){return e.y}function ci(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hi(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=.5*(n+i),u=.5*(r+s),a=t.nodes;a[0]&&hi(e,a[0],n,r,o,u),a[1]&&hi(e,a[1],o,r,i,u),a[2]&&hi(e,a[2],n,u,o,s),a[3]&&hi(e,a[3],o,u,i,s)}}function pi(e,t,n,r,i,s,o){var u,a=1/0;return function f(e,l,c,h,p){if(!(l>s||c>o||r>h||i>p)){if(d=e.point){var d,v=t-d[0],m=n-d[1],g=v*v+m*m;if(a>g){var y=Math.sqrt(a=g);r=t-y,i=n-y,s=t+y,o=n+y,u=d}}for(var b=e.nodes,w=.5*(l+h),E=.5*(c+p),S=t>=w,x=n>=E,T=x<<1|S,N=T+4;N>T;++T)if(e=b[3&T])switch(3&T){case 0:f(e,l,c,w,E);break;case 1:f(e,w,c,h,E);break;case 2:f(e,l,E,w,p);break;case 3:f(e,w,E,h,p)}}}(e,r,i,s,o),u}function di(e,t){e=nu.rgb(e),t=nu.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+bt(Math.round(n+s*e))+bt(Math.round(r+o*e))+bt(Math.round(i+u*e))}}function vi(e,t){var n,r={},i={};for(n in e)n in t?r[n]=yi(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function mi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function gi(e,t){var n,r,i,s=cf.lastIndex=hf.lastIndex=0,o=-1,u=[],a=[];for(e+="",t+="";(n=cf.exec(e))&&(r=hf.exec(t));)(i=r.index)>s&&(i=t.slice(s,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,a.push({i:o,x:mi(n,r)})),s=hf.lastIndex;return s<t.length&&(i=t.slice(s),u[o]?u[o]+=i:u[++o]=i),u.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var n,r=0;t>r;++r)u[(n=a[r]).i]=n.x(e);return u.join("")})}function yi(e,t){for(var n,r=nu.interpolators.length;--r>=0&&!(n=nu.interpolators[r](e,t)););return n}function bi(e,t){var n,r=[],i=[],s=e.length,o=t.length,u=Math.min(e.length,t.length);for(n=0;u>n;++n)r.push(yi(e[n],t[n]));for(;s>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;u>n;++n)i[n]=r[n](e);return i}}function wi(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function Ei(e){return function(t){return 1-e(1-t)}}function Si(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function xi(e){return e*e}function Ti(e){return e*e*e}function Ni(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Ci(e){return function(t){return Math.pow(t,e)}}function ki(e){return 1-Math.cos(e*Iu)}function Li(e){return Math.pow(2,10*(e-1))}function Ai(e){return 1-Math.sqrt(1-e*e)}function Oi(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/ju*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*ju/t)}}function Mi(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function _i(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Di(e,t){e=nu.hcl(e),t=nu.hcl(t);var n=e.h,r=e.c,i=e.l,s=t.h-n,o=t.c-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return ft(n+s*e,r+o*e,i+u*e)+""}}function Pi(e,t){e=nu.hsl(e),t=nu.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return ut(n+s*e,r+o*e,i+u*e)+""}}function Hi(e,t){e=nu.lab(e),t=nu.lab(t);var n=e.l,r=e.a,i=e.b,s=t.l-n,o=t.a-r,u=t.b-i;return function(e){return ct(n+s*e,r+o*e,i+u*e)+""}}function Bi(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function ji(e){var t=[e.a,e.b],n=[e.c,e.d],r=Ii(t),i=Fi(t,n),s=Ii(qi(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Ru,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Ru:0}function Fi(e,t){return e[0]*t[0]+e[1]*t[1]}function Ii(e){var t=Math.sqrt(Fi(e,e));return t&&(e[0]/=t,e[1]/=t),t}function qi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Ri(e,t){var n,r=[],i=[],s=nu.transform(e),o=nu.transform(t),u=s.translate,a=o.translate,f=s.rotate,l=o.rotate,c=s.skew,h=o.skew,p=s.scale,d=o.scale;return u[0]!=a[0]||u[1]!=a[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:mi(u[0],a[0])},{i:3,x:mi(u[1],a[1])})):a[0]||a[1]?r.push("translate("+a+")"):r.push(""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:mi(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),c!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:mi(c,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:mi(p[0],d[0])},{i:n-2,x:mi(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(e){for(var t,s=-1;++s<n;)r[(t=i[s]).i]=t.x(e);return r.join("")}}function Ui(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function zi(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Wi(e){for(var t=e.source,n=e.target,r=Vi(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var s=i.length;n!==r;)i.splice(s,0,n),n=n.parent;return i}function Xi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Vi(e,t){if(e===t)return e;for(var n=Xi(e),r=Xi(t),i=n.pop(),s=r.pop(),o=null;i===s;)o=i,i=n.pop(),s=r.pop();return o}function $i(e){e.fixed|=2}function Ji(e){e.fixed&=-7}function Ki(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Qi(e){e.fixed&=-5}function Gi(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var s,o=e.nodes,u=o.length,a=-1;++a<u;)s=o[a],null!=s&&(Gi(s,t,n),e.charge+=s.charge,r+=s.charge*s.cx,i+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function Yi(e,t){return nu.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=is,e}function Zi(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function es(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(s=e.children)&&(i=s.length))for(var i,s,o=-1;++o<i;)n.push(s[o]);for(;null!=(e=r.pop());)t(e)}function ts(e){return e.children}function ns(e){return e.value}function rs(e,t){return t.value-e.value}function is(e){return nu.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function ss(e){return e.x}function os(e){return e.y}function us(e,t,n){e.y0=t,e.y=n}function as(e){return nu.range(e.length)}function fs(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ls(e){for(var t,n=1,r=0,i=e[0][1],s=e.length;s>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function cs(e){return e.reduce(hs,0)}function hs(e,t){return e+t[1]}function ps(e,t){return ds(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ds(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];++n<=t;)s[n]=i*n+r;return s}function vs(e){return[nu.min(e),nu.max(e)]}function ms(e,t){return e.value-t.value}function gs(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function ys(e,t){e._pack_next=t,t._pack_prev=e}function bs(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function ws(e){function t(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(f=n.length)){var n,r,i,s,o,u,a,f,l=1/0,c=-1/0,h=1/0,p=-1/0;if(n.forEach(Es),r=n[0],r.x=-r.r,r.y=0,t(r),f>1&&(i=n[1],i.x=i.r,i.y=0,t(i),f>2))for(s=n[2],Ts(r,i,s),t(s),gs(r,s),r._pack_prev=s,gs(s,i),i=r._pack_next,o=3;f>o;o++){Ts(r,i,s=n[o]);var d=0,v=1,m=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(bs(u,s)){d=1;break}if(1==d)for(a=r._pack_prev;a!==u._pack_prev&&!bs(a,s);a=a._pack_prev,m++);d?(m>v||v==m&&i.r<r.r?ys(r,i=u):ys(r=a,i),o--):(gs(r,s),i=s,t(s))}var g=(l+c)/2,y=(h+p)/2,b=0;for(o=0;f>o;o++)s=n[o],s.x-=g,s.y-=y,b=Math.max(b,s.r+Math.sqrt(s.x*s.x+s.y*s.y));e.r=b,n.forEach(Ss)}}function Es(e){e._pack_next=e._pack_prev=e}function Ss(e){delete e._pack_next,delete e._pack_prev}function xs(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var s=-1,o=i.length;++s<o;)xs(i[s],t,n,r)}function Ts(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function Ns(e,t){return e.parent==t.parent?1:2}function Cs(e){var t=e.children;return t.length?t[0]:e.t}function ks(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ls(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function As(e){for(var t,n=0,r=0,i=e.children,s=i.length;--s>=0;)t=i[s],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Os(e,t,n){return e.a.parent===t.parent?e.a:n}function Ms(e){return 1+nu.max(e,function(e){return e.y})}function _s(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Ds(e){var t=e.children;return t&&t.length?Ds(t[0]):e}function Ps(e){var t,n=e.children;return n&&(t=n.length)?Ps(n[t-1]):e}function Hs(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Bs(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>s&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function js(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Fs(e){return e.rangeExtent?e.rangeExtent():js(e.range())}function Is(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function qs(e,t){var n,r=0,i=e.length-1,s=e[r],o=e[i];return s>o&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function Rs(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:xf}function Us(e,t,n,r){var i=[],s=[],o=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=nu.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function zs(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Us:Is,a=r?zi:Ui;return o=i(e,t,a,n),u=i(t,e,a,yi),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(Bi)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return $s(e,t)},s.tickFormat=function(t,n){return Js(e,t,n)},s.nice=function(t){return Xs(e,t),i()},s.copy=function(){return zs(e,t,n,r)},i()}function Ws(e,t){return nu.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Xs(e,t){return qs(e,Rs(Vs(e,t)[2]))}function Vs(e,t){null==t&&(t=10);var n=js(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return.15>=s?i*=10:.35>=s?i*=5:.75>=s&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function $s(e,t){return nu.range.apply(nu,Vs(e,t))}function Js(e,t,n){var r=Vs(e,t);if(n){var i=la.exec(n);if(i.shift(),"s"===i[8]){var s=nu.formatPrefix(Math.max(mu(r[0]),mu(r[1])));return i[7]||(i[7]="."+Ks(s.scale(r[2]))),i[8]="f",n=nu.format(i.join("")),function(e){return n(s.scale(e))+s.symbol}}i[7]||(i[7]="."+Qs(i[8],r)),n=i.join("")}else n=",."+Ks(r[2])+"f";return nu.format(n)}function Ks(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Qs(e,t){var n=Ks(t[2]);return e in Tf?Math.abs(n-Ks(Math.max(mu(t[0]),mu(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Gs(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function s(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return s(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=qs(r.map(i),n?Math:Cf);return e.domain(t),r=t.map(s),o},o.ticks=function(){var e=js(r),o=[],u=e[0],a=e[1],f=Math.floor(i(u)),l=Math.ceil(i(a)),c=t%1?2:t;if(isFinite(l-f)){if(n){for(;l>f;f++)for(var h=1;c>h;h++)o.push(s(f)*h);o.push(s(f))}else for(o.push(s(f));f++<l;)for(var h=c-1;h>0;h--)o.push(s(f)*h);for(f=0;o[f]<u;f++);for(l=o.length;o[l-1]>a;l--);o=o.slice(f,l)}return o},o.tickFormat=function(e,t){if(!arguments.length)return Nf;arguments.length<2?t=Nf:"function"!=typeof t&&(t=nu.format(t));var r,u=Math.max(.1,e/o.ticks().length),a=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/s(a(i(e)+r))<=u?t(e):""}},o.copy=function(){return Gs(e.copy(),t,n,r)},Ws(o,e)}function Ys(e,t,n){function r(t){return e(i(t))}var i=Zs(t),s=Zs(1/t);return r.invert=function(t){return s(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return $s(n,e)},r.tickFormat=function(e,t){return Js(n,e,t)},r.nice=function(e){return r.domain(Xs(n,e))},r.exponent=function(o){return arguments.length?(i=Zs(t=o),s=Zs(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return Ys(e.copy(),t,n)},Ws(r,e)}function Zs(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function eo(e,t){function n(n){return s[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):0/0))-1)%s.length]}function r(t,n){return nu.range(e.length).map(function(e){return t+n*e})}var i,s,o;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new u;for(var s,o=-1,a=r.length;++o<a;)i.has(s=r[o])||i.set(s,e.push(s));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(s=e,o=0,t={t:"range",a:arguments},n):s},n.rangePoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=e.length<2?(a=(a+f)/2,0):(f-a)/(e.length-1+u);return s=r(a+l*u/2,l),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=e.length<2?(a=f=Math.round((a+f)/2),0):0|(f-a)/(e.length-1+u);return s=r(a+Math.round(l*u/2+(f-a-(e.length-1+u)*l)/2),l),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=(c-l)/(e.length-u+2*a);return s=r(l+h*a,h),f&&s.reverse(),o=h*(1-u),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=Math.floor((c-l)/(e.length-u+2*a));return s=r(l+Math.round((c-l-(e.length-u)*h)/2),h),f&&s.reverse(),o=Math.round(h*(1-u)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return js(t.a[0])},n.copy=function(){return eo(e,t)},n.domain(e)}function to(r,i){function s(){var e=0,t=i.length;for(u=[];++e<t;)u[e-1]=nu.quantile(r,e/t);return o}function o(e){return isNaN(e=+e)?void 0:i[nu.bisect(u,e)]}var u;return o.domain=function(i){return arguments.length?(r=i.map(t).filter(n).sort(e),s()):r},o.range=function(e){return arguments.length?(i=e,s()):i},o.quantiles=function(){return u},o.invertExtent=function(e){return e=i.indexOf(e),0>e?[0/0,0/0]:[e>0?u[e-1]:r[0],e<u.length?u[e]:r[r.length-1]]},o.copy=function(){return to(r,i)},s()}function no(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(s*(t-e))))]}function i(){return s=n.length/(t-e),o=n.length-1,r}var s,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/s+e,[t,t+1/s]},r.copy=function(){return no(e,t,n)},i()}function ro(e,t){function n(n){return n>=n?t[nu.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return ro(e,t)},n}function io(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return $s(e,t)},t.tickFormat=function(t,n){return Js(e,t,n)},t.copy=function(){return io(e)},t}function so(){return 0}function oo(e){return e.innerRadius}function uo(e){return e.outerRadius}function ao(e){return e.startAngle}function fo(e){return e.endAngle}function lo(e){return e&&e.padAngle}function co(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function ho(e,t,n,r,i){var s=e[0]-t[0],o=e[1]-t[1],u=(i?r:-r)/Math.sqrt(s*s+o*o),a=u*o,f=-u*s,l=e[0]+a,c=e[1]+f,h=t[0]+a,p=t[1]+f,d=(l+h)/2,v=(c+p)/2,m=h-l,g=p-c,y=m*m+g*g,b=n-r,w=l*p-h*c,E=(0>g?-1:1)*Math.sqrt(b*b*y-w*w),S=(w*g-m*E)/y,x=(-w*m-g*E)/y,T=(w*g+m*E)/y,N=(-w*m+g*E)/y,C=S-d,k=x-v,L=T-d,A=N-v;return C*C+k*k>L*L+A*A&&(S=T,x=N),[[S-a,x-f],[S*n/b,x*n/b]]}function po(e){function t(t){function o(){f.push("M",s(e(l),u))}for(var a,f=[],l=[],c=-1,h=t.length,p=Nt(n),d=Nt(r);++c<h;)i.call(this,a=t[c],c)?l.push([+p.call(this,a,c),+d.call(this,a,c)]):l.length&&(o(),l=[]);return l.length&&o(),f.length?f.join(""):null}var n=Lr,r=Ar,i=An,s=vo,o=s.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?s=e:(s=_f.get(e)||vo).key,t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function vo(e){return e.join("L")}function mo(e){return vo(e)+"Z"}function go(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function yo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function bo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function wo(e,t){return e.length<4?vo(e):e[1]+xo(e.slice(1,-1),To(e,t))}function Eo(e,t){return e.length<3?vo(e):e[0]+xo((e.push(e[0]),e),To([e[e.length-2]].concat(e,[e[1]]),t))}function So(e,t){return e.length<3?vo(e):e[0]+xo(e,To(e,t))}function xo(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return vo(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;if(n&&(r+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],i=e[1],a=2),t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function To(e,t){for(var n,r=[],i=(1-t)/2,s=e[0],o=e[1],u=1,a=e.length;++u<a;)n=s,s=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function No(e){if(e.length<3)return vo(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",Ao(Hf,o),",",Ao(Hf,u)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Oo(a,o,u);return e.pop(),a.push("L",r),a.join("")}function Co(e){if(e.length<4)return vo(e);for(var t,n=[],r=-1,i=e.length,s=[0],o=[0];++r<3;)t=e[r],s.push(t[0]),o.push(t[1]);for(n.push(Ao(Hf,s)+","+Ao(Hf,o)),--r;++r<i;)t=e[r],s.shift(),s.push(t[0]),o.shift(),o.push(t[1]),Oo(n,s,o);return n.join("")}function ko(e){for(var t,n,r=-1,i=e.length,s=i+4,o=[],u=[];++r<4;)n=e[r%i],o.push(n[0]),u.push(n[1]);for(t=[Ao(Hf,o),",",Ao(Hf,u)],--r;++r<s;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),Oo(t,o,u);return t.join("")}function Lo(e,t){var n=e.length-1;if(n)for(var r,i,s=e[0][0],o=e[0][1],u=e[n][0]-s,a=e[n][1]-o,f=-1;++f<=n;)r=e[f],i=f/n,r[0]=t*r[0]+(1-t)*(s+i*u),r[1]=t*r[1]+(1-t)*(o+i*a);return No(e)}function Ao(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Oo(e,t,n){e.push("C",Ao(Df,t),",",Ao(Df,n),",",Ao(Pf,t),",",Ao(Pf,n),",",Ao(Hf,t),",",Ao(Hf,n))}function Mo(e,t){return(t[1]-e[1])/(t[0]-e[0])}function _o(e){for(var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=Mo(i,s);++t<n;)r[t]=(o+(o=Mo(i=s,s=e[t+1])))/2;return r[t]=o,r}function Do(e){for(var t,n,r,i,s=[],o=_o(e),u=-1,a=e.length-1;++u<a;)t=Mo(e[u],e[u+1]),mu(t)<Pu?o[u]=o[u+1]=0:(n=o[u]/t,r=o[u+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));for(u=-1;++u<=a;)i=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),s.push([i||0,o[u]*i||0]);return s}function Po(e){return e.length<3?vo(e):e[0]+xo(e,Do(e))}function Ho(e){for(var t,n,r,i=-1,s=e.length;++i<s;)t=e[i],n=t[0],r=t[1]-Iu,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Bo(e){function t(t){function a(){v.push("M",u(e(g),c),l,f(e(m.reverse()),c),"Z")}for(var h,p,d,v=[],m=[],g=[],y=-1,b=t.length,w=Nt(n),E=Nt(i),S=n===r?function(){return p}:Nt(r),x=i===s?function(){return d}:Nt(s);++y<b;)o.call(this,h=t[y],y)?(m.push([p=+w.call(this,h,y),d=+E.call(this,h,y)]),g.push([+S.call(this,h,y),+x.call(this,h,y)])):m.length&&(a(),m=[],g=[]);return m.length&&a(),v.length?v.join(""):null}var n=Lr,r=Lr,i=0,s=Ar,o=An,u=vo,a=u.key,f=u,l="L",c=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=s=e,t):s},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?u=e:(u=_f.get(e)||vo).key,f=u.reverse||u,l=u.closed?"M":"L",t):a},t.tension=function(e){return arguments.length?(c=e,t):c},t}function jo(e){return e.radius}function Fo(e){return[e.x,e.y]}function Io(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Iu;return[n*Math.cos(r),n*Math.sin(r)]}}function qo(){return 64}function Ro(){return"circle"}function Uo(e){var t=Math.sqrt(e/Bu);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function zo(e){return function(){var t,n;(t=this[e])&&(n=t[t.active])&&(--t.count?(delete t[t.active],t.active+=.5):delete this[e],n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Wo(e,t,n){return Eu(e,Uf),e.namespace=t,e.id=n,e}function Xo(e,t,n,r){var i=e.id,s=e.namespace;return q(e,"function"==typeof n?function(e,o,u){e[s][i].tween.set(t,r(n.call(e,e.__data__,o,u)))}:(n=r(n),function(e){e[s][i].tween.set(t,n)}))}function Vo(e){return null==e&&(e=""),function(){this.textContent=e}}function $o(e){return null==e?"__transition__":"__transition_"+e+"__"}function Jo(e,t,n,r,i){var s=e[n]||(e[n]={active:0,count:0}),o=s[r];if(!o){var a=i.time;o=s[r]={tween:new u,time:a,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++s.count,nu.timer(function(i){function u(n){if(s.active>r)return l();var i=s[s.active];i&&(--s.count,delete s[s.active],i.event&&i.event.interrupt.call(e,e.__data__,i.index)),s.active=r,o.event&&o.event.start.call(e,e.__data__,t),o.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&v.push(r)}),h=o.ease,c=o.duration,nu.timer(function(){return d.c=f(n||1)?An:f,1},0,a)}function f(n){if(s.active!==r)return 1;for(var i=n/c,u=h(i),a=v.length;a>0;)v[--a].call(e,u);return i>=1?(o.event&&o.event.end.call(e,e.__data__,t),l()):void 0}function l(){return--s.count?delete s[r]:delete e[n],1}var c,h,p=o.delay,d=ua,v=[];return d.t=p+a,i>=p?u(i-p):(d.c=u,void 0)},0,a)}}function Ko(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Qo(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function Go(e){return e.toISOString()}function Yo(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,s=nu.bisect(Gf,i);return s==Gf.length?[t.year,Vs(e.map(function(e){return e/31536e6}),n)[2]]:s?t[i/Gf[s-1]<Gf[s]/i?s-1:s]:[el,Vs(e,n)[2]]}return r.invert=function(t){return Zo(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Zo)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Zo(+n+1),t).length}var s=r.domain(),o=js(s),u=null==e?i(o,10):"number"==typeof e&&i(o,e);return u&&(e=u[0],t=u[1]),r.domain(qs(s,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Zo(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Zo(+t+1);return t}}:e))},r.ticks=function(e,t){var n=js(r.domain()),s=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return s&&(e=s[0],t=s[1]),e.range(n[0],Zo(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return Yo(e.copy(),t,n)},Ws(r,e)}function Zo(e){return new Date(e)}function eu(e){return JSON.parse(e.responseText)}function tu(e){var t=su.createRange();return t.selectNode(su.body),t.createContextualFragment(e.responseText)}var nu={version:"3.5.2"};Date.now||(Date.now=function(){return+(new Date)});var ru=[].slice,iu=function(e){return ru.call(e)},su=document,ou=su.documentElement,uu=window;try{iu(ou.childNodes)[0].nodeType}catch(au){iu=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{su.createElement("div").style.setProperty("opacity",0,"")}catch(fu){var lu=uu.Element.prototype,cu=lu.setAttribute,hu=lu.setAttributeNS,pu=uu.CSSStyleDeclaration.prototype,du=pu.setProperty;lu.setAttribute=function(e,t){cu.call(this,e,t+"")},lu.setAttributeNS=function(e,t,n){hu.call(this,e,t,n+"")},pu.setProperty=function(e,t,n){du.call(this,e,t+"",n)}}nu.ascending=e,nu.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},nu.min=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<s;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<s;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<s;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},nu.max=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<s;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<s;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<s;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},nu.extent=function(e,t){var n,r,i,s=-1,o=e.length;if(1===arguments.length){for(;++s<o;)if(null!=(r=e[s])&&r>=r){n=i=r;break}for(;++s<o;)null!=(r=e[s])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++s<o;)if(null!=(r=t.call(e,e[s],s))&&r>=r){n=i=r;break}for(;++s<o;)null!=(r=t.call(e,e[s],s))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},nu.sum=function(e,t){var r,i=0,s=e.length,o=-1;if(1===arguments.length)for(;++o<s;)n(r=+e[o])&&(i+=r);else for(;++o<s;)n(r=+t.call(e,e[o],o))&&(i+=r);return i},nu.mean=function(e,r){var i,s=0,o=e.length,u=-1,a=o;if(1===arguments.length)for(;++u<o;)n(i=t(e[u]))?s+=i:--a;else for(;++u<o;)n(i=t(r.call(e,e[u],u)))?s+=i:--a;return a?s/a:void 0},nu.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},nu.median=function(r,i){var s,o=[],u=r.length,a=-1;if(1===arguments.length)for(;++a<u;)n(s=t(r[a]))&&o.push(s);else for(;++a<u;)n(s=t(i.call(r,r[a],a)))&&o.push(s);return o.length?nu.quantile(o.sort(e),.5):void 0},nu.variance=function(e,r){var i,s,o=e.length,u=0,a=0,f=-1,l=0;if(1===arguments.length)for(;++f<o;)n(i=t(e[f]))&&(s=i-u,u+=s/++l,a+=s*(i-u));else for(;++f<o;)n(i=t(r.call(e,e[f],f)))&&(s=i-u,u+=s/++l,a+=s*(i-u));return l>1?a/(l-1):void 0},nu.deviation=function(){var e=nu.variance.apply(this,arguments);return e?Math.sqrt(e):e};var vu=r(e);nu.bisectLeft=vu.left,nu.bisect=nu.bisectRight=vu.right,nu.bisector=function(t){return r(1===t.length?function(n,r){return e(t(n),r)}:t)},nu.shuffle=function(e,t,n){(s=arguments.length)<3&&(n=e.length,2>s&&(t=0));for(var r,i,s=n-t;s;)i=0|Math.random()*s--,r=e[s+t],e[s+t]=e[i+t],e[i+t]=r;return e},nu.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},nu.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],s=new Array(0>r?0:r);r>n;)s[n]=[t=i,i=e[++n]];return s},nu.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,t=nu.min(arguments,i),n=new Array(t);++e<t;)for(var r,s=-1,o=n[e]=new Array(r);++s<r;)o[s]=arguments[s][e];return n},nu.transpose=function(e){return nu.zip.apply(nu,e)},nu.keys=function(e){var t=[];for(var n in e)t.push(n);return t},nu.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},nu.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},nu.merge=function(e){for(var t,n,r,i=e.length,s=-1,o=0;++s<i;)o+=e[s].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var mu=Math.abs;nu.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),1/0===(t-e)/n)throw new Error("infinite range");var r,i=[],o=s(mu(n)),u=-1;if(e*=o,t*=o,n*=o,0>n)for(;(r=e+n*++u)>t;)i.push(r/o);else for(;(r=e+n*++u)<t;)i.push(r/o);return i},nu.map=function(e,t){var n=new u;if(e instanceof u)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,s=e.length;if(1===arguments.length)for(;++i<s;)n.set(i,e[i]);else for(;++i<s;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var gu="__proto__",yu="\0";o(u,{has:l,get:function(e){return this._[a(e)]},set:function(e,t){return this._[a(e)]=t},remove:c,keys:h,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:f(t),value:this._[t]});return e},size:p,empty:d,forEach:function(e){for(var t in this._)e.call(this,f(t),this._[t])}}),nu.nest=function(){function e(t,o,a){if(a>=s.length)return r?r.call(i,o):n?o.sort(n):o;for(var f,l,c,h,p=-1,d=o.length,v=s[a++],m=new u;++p<d;)(h=m.get(f=v(l=o[p])))?h.push(l):m.set(f,[l]);return t?(l=t(),c=function(n,r){l.set(n,e(t,r,a))}):(l={},c=function(n,r){l[n]=e(t,r,a)}),m.forEach(c),l}function t(e,n){if(n>=s.length)return e;var r=[],i=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},s=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(nu.map,n,0),0)},i.key=function(e){return s.push(e),i},i.sortKeys=function(e){return o[s.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},nu.set=function(e){var t=new v;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},o(v,{has:l,add:function(e){return this._[a(e+="")]=!0,e},remove:c,values:h,size:p,empty:d,forEach:function(e){for(var t in this._)e.call(this,f(t))}}),nu.behavior={},nu.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=m(e,t,t[n]);return e};var bu=["webkit","ms","moz","Moz","o","O"];nu.dispatch=function(){for(var e=new b,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=w(e);return e},b.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},nu.event=null,nu.requote=function(e){return e.replace(wu,"\\$&")};var wu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Eu={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},Su=function(e,t){return t.querySelector(e)},xu=function(e,t){return t.querySelectorAll(e)},Tu=ou.matches||ou[g(ou,"matchesSelector")],Nu=function(e,t){return Tu.call(e,t)};"function"==typeof Sizzle&&(Su=function(e,t){return Sizzle(e,t)[0]||null},xu=Sizzle,Nu=Sizzle.matchesSelector),nu.selection=function(){return Au};var Cu=nu.selection.prototype=[];Cu.select=function(e){var t,n,r,i,s=[];e=N(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var a=-1,f=r.length;++a<f;)(i=r[a])?(t.push(n=e.call(i,i.__data__,a,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return T(s)},Cu.selectAll=function(e){var t,n,r=[];e=C(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)(n=o[u])&&(r.push(t=iu(e.call(n,n.__data__,u,i))),t.parentNode=n);return T(r)};var ku={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};nu.ns={prefix:ku,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),ku.hasOwnProperty(n)?{space:ku[n],local:e}:e}},Cu.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=nu.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(k(t,e[t]));return this}return this.each(k(e,t))},Cu.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=O(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!A(e[i]).test(t))return!1;return!0}for(t in e)this.each(M(t,e[t]));return this}return this.each(M(e,t))},Cu.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(D(n,e[n],t));return this}if(2>r)return uu.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(D(e,t,n))},Cu.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(P(t,e[t]));return this}return this.each(P(e,t))},Cu.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Cu.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Cu.append=function(e){return e=H(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Cu.insert=function(e,t){return e=H(e),t=N(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Cu.remove=function(){return this.each(B)},Cu.data=function(e,t){function n(e,n){var r,i,s,o=e.length,c=n.length,h=Math.min(o,c),p=new Array(c),d=new Array(c),v=new Array(o);if(t){var m,g=new u,y=new Array(o);for(r=-1;++r<o;)g.has(m=t.call(i=e[r],i.__data__,r))?v[r]=i:g.set(m,i),y[r]=m;for(r=-1;++r<c;)(i=g.get(m=t.call(n,s=n[r],r)))?i!==!0&&(p[r]=i,i.__data__=s):d[r]=j(s),g.set(m,!0);for(r=-1;++r<o;)g.get(y[r])!==!0&&(v[r]=e[r])}else{for(r=-1;++r<h;)i=e[r],s=n[r],i?(i.__data__=s,p[r]=i):d[r]=j(s);for(;c>r;++r)d[r]=j(n[r]);for(;o>r;++r)v[r]=e[r]}d.update=p,d.parentNode=p.parentNode=v.parentNode=e.parentNode,a.push(d),f.push(p),l.push(v)}var r,i,s=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(r=this[0]).length);++s<o;)(i=r[s])&&(e[s]=i.__data__);return e}var a=R([]),f=T([]),l=T([]);if("function"==typeof e)for(;++s<o;)n(r=this[s],e.call(r,r.parentNode.__data__,s));else for(;++s<o;)n(r=this[s],e);return f.enter=function(){return a},f.exit=function(){return l},f},Cu.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Cu.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=F(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return T(i)},Cu.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},Cu.sort=function(e){e=I.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Cu.each=function(e){return q(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Cu.call=function(e){var t=iu(arguments);return e.apply(t[0]=this,t),this},Cu.empty=function(){return!this.node()},Cu.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var s=n[r];if(s)return s}return null},Cu.size=function(){var e=0;return q(this,function(){++e}),e};var Lu=[];nu.selection.enter=R,nu.selection.enter.prototype=Lu,Lu.append=Cu.append,Lu.empty=Cu.empty,Lu.node=Cu.node,Lu.call=Cu.call,Lu.size=Cu.size,Lu.select=function(e){for(var t,n,r,i,s,o=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var f=-1,l=i.length;++f<l;)(s=i[f])?(t.push(r[f]=n=e.call(i.parentNode,s.__data__,f,u)),n.__data__=s.__data__):t.push(null)}return T(o)},Lu.insert=function(e,t){return arguments.length<2&&(t=U(this)),Cu.insert.call(this,e,t)},nu.select=function(e){var t=["string"==typeof e?Su(e,su):e];return t.parentNode=ou,T([t])},nu.selectAll=function(e){var t=iu("string"==typeof e?xu(e,su):e);return t.parentNode=ou,T([t])};var Au=nu.select(ou);Cu.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(z(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(z(e,t,n))};var Ou=nu.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ou.forEach(function(e){"on"+e in su&&Ou.remove(e)});var Mu="onselectstart"in su?null:g(ou.style,"userSelect"),_u=0;nu.mouse=function(e){return $(e,S())};var Du=/WebKit/.test(uu.navigator.userAgent)?-1:0;nu.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=S().changedTouches),t)for(var r,i=0,s=t.length;s>i;++i)if((r=t[i]).identifier===n)return $(e,r)},nu.behavior.drag=function(){function e(){this.on("mousedown.drag",i).on("touchstart.drag",s)}function t(e,t,i,s,o){return function(){function u(){var e,n,r=t(h,v);r&&(e=r[0]-b[0],n=r[1]-b[1],d|=e|n,b=r,p({type:"drag",x:r[0]+f[0],y:r[1]+f[1],dx:e,dy:n}))}function a(){t(h,v)&&(g.on(s+m,null).on(o+m,null),y(d&&nu.event.target===c),p({type:"dragend"}))}var f,l=this,c=nu.event.target,h=l.parentNode,p=n.of(l,arguments),d=0,v=e(),m=".drag"+(null==v?"":"-"+v),g=nu.select(i()).on(s+m,u).on(o+m,a),y=V(),b=t(h,v);r?(f=r.apply(l,arguments),f=[f.x-b[0],f.y-b[1]]):f=[0,0],p({type:"dragstart"})}}var n=x(e,"drag","dragstart","dragend"),r=null,i=t(y,nu.mouse,Q,"mousemove","mouseup"),s=t(J,nu.touch,K,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},nu.rebind(e,n,"on")},nu.touches=function(e,t){return arguments.length<2&&(t=S().touches),t?iu(t).map(function(t){var n=$(e,t);return n.identifier=t.identifier,n}):[]};var Pu=1e-6,Hu=Pu*Pu,Bu=Math.PI,ju=2*Bu,Fu=ju-Pu,Iu=Bu/2,qu=Bu/180,Ru=180/Bu,Uu=Math.SQRT2,zu=2,Wu=4;nu.interpolateZoom=function(e,t){function n(e){var t=e*y;if(g){var n=nt(v),o=s/(zu*h)*(n*rt(Uu*t+v)-tt(v));return[r+o*f,i+o*l,s*n/nt(Uu*t+v)]}return[r+e*f,i+e*l,s*Math.exp(Uu*t)]}var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2],f=o-r,l=u-i,c=f*f+l*l,h=Math.sqrt(c),p=(a*a-s*s+Wu*c)/(2*s*zu*h),d=(a*a-s*s-Wu*c)/(2*a*zu*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d),g=m-v,y=(g||Math.log(a/s))/Uu;return n.duration=1e3*y,n},nu.behavior.zoom=function(){function e(e){e.on(O,l).on($u+".zoom",h).on("dblclick.zoom",p).on(D,c)}function t(e){return[(e[0]-N.x)/N.k,(e[1]-N.y)/N.k]}function n(e){return[e[0]*N.k+N.x,e[1]*N.k+N.y]}function r(e){N.k=Math.max(k[0],Math.min(k[1],e))}function i(e,t){t=n(t),N.x+=e[0]-t[0],N.y+=e[1]-t[1]}function s(t,n,s,o){t.__chart__={x:N.x,y:N.y,k:N.k},r(Math.pow(2,o)),i(v=n,s),t=nu.select(t),L>0&&(t=t.transition().duration(L)),t.call(e.event)}function o(){w&&w.domain(b.range().map(function(e){return(e-N.x)/N.k}).map(b.invert)),T&&T.domain(S.range().map(function(e){return(e-N.y)/N.k}).map(S.invert))}function u(e){A++||e({type:"zoomstart"})}function a(e){o(),e({type:"zoom",scale:N.k,translate:[N.x,N.y]})}function f(e){--A||e({type:"zoomend"}),v=null}function l(){function e(){l=1,i(nu.mouse(r),h),a(o)}function n(){c.on(M,null).on(_,null),p(l&&nu.event.target===s),f(o)}var r=this,s=nu.event.target,o=P.of(r,arguments),l=0,c=nu.select(uu).on(M,e).on(_,n),h=t(nu.mouse(r)),p=V();Rf.call(r),u(o)}function c(){function e(){var e=nu.touches(d);return p=N.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=t(e))}),e}function n(){var t=nu.event.target;nu.select(t).on(w,o).on(S,h),x.push(t);for(var n=nu.event.changedTouches,r=0,i=n.length;i>r;++r)m[n[r].identifier]=null;var u=e(),a=Date.now();if(1===u.length){if(500>a-y){var f=u[0];s(d,f,m[f.identifier],Math.floor(Math.log(N.k)/Math.LN2)+1),E()}y=a}else if(u.length>1){var f=u[0],l=u[1],c=f[0]-l[0],p=f[1]-l[1];g=c*c+p*p}}function o(){var e,t,n,s,o=nu.touches(d);Rf.call(d);for(var u=0,f=o.length;f>u;++u,s=null)if(n=o[u],s=m[n.identifier]){if(t)break;e=n,t=s}if(s){var l=(l=n[0]-e[0])*l+(l=n[1]-e[1])*l,c=g&&Math.sqrt(l/g);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+s[0])/2,(t[1]+s[1])/2],r(c*p)}y=null,i(e,t),a(v)}function h(){if(nu.event.touches.length){for(var t=nu.event.changedTouches,n=0,r=t.length;r>n;++n)delete m[t[n].identifier];for(var i in m)return void e()}nu.selectAll(x).on(b,null),T.on(O,l).on(D,c),C(),f(v)}var p,d=this,v=P.of(d,arguments),m={},g=0,b=".zoom-"+nu.event.changedTouches[0].identifier,w="touchmove"+b,S="touchend"+b,x=[],T=nu.select(d),C=V();n(),u(v),T.on(O,null).on(D,n)}function h(){var e=P.of(this,arguments);g?clearTimeout(g):(d=t(v=m||nu.mouse(this)),Rf.call(this),u(e)),g=setTimeout(function(){g=null,f(e)},50),E(),r(Math.pow(2,.002*Xu())*N.k),i(v,d),a(e)}function p(){var e=nu.mouse(this),n=Math.log(N.k)/Math.LN2;s(this,e,t(e),nu.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var d,v,m,g,y,b,w,S,T,N={x:0,y:0,k:1},C=[960,500],k=Vu,L=250,A=0,O="mousedown.zoom",M="mousemove.zoom",_="mouseup.zoom",D="touchstart.zoom",P=x(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=P.of(this,arguments),t=N;If?nu.select(this).transition().each("start.zoom",function(){N=this.__chart__||{x:0,y:0,k:1},u(e)}).tween("zoom:zoom",function(){var n=C[0],r=C[1],i=v?v[0]:n/2,s=v?v[1]:r/2,o=nu.interpolateZoom([(i-N.x)/N.k,(s-N.y)/N.k,n/N.k],[(i-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(t){var r=o(t),u=n/r[2];this.__chart__=N={x:i-r[0]*u,y:s-r[1]*u,k:u},a(e)}}).each("interrupt.zoom",function(){f(e)}).each("end.zoom",function(){f(e)}):(this.__chart__=N,u(e),a(e),f(e))})},e.translate=function(t){return arguments.length?(N={x:+t[0],y:+t[1],k:N.k},o(),e):[N.x,N.y]},e.scale=function(t){return arguments.length?(N={x:N.x,y:N.y,k:+t},o(),e):N.k},e.scaleExtent=function(t){return arguments.length?(k=null==t?Vu:[+t[0],+t[1]],e):k},e.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],e):m},e.size=function(t){return arguments.length?(C=t&&[+t[0],+t[1]],e):C},e.duration=function(t){return arguments.length?(L=+t,e):L},e.x=function(t){return arguments.length?(w=t,b=t.copy(),N={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(T=t,S=t.copy(),N={x:0,y:0,k:1},e):T},nu.rebind(e,P,"on")};var Xu,Vu=[0,1/0],$u="onwheel"in su?(Xu=function(){return-nu.event.deltaY*(nu.event.deltaMode?120:1)},"wheel"):"onmousewheel"in su?(Xu=function(){return nu.event.wheelDelta},"mousewheel"):(Xu=function(){return-nu.event.detail},"MozMousePixelScroll");nu.color=st,st.prototype.toString=function(){return this.rgb()+""},nu.hsl=ot;var Ju=ot.prototype=new st;Ju.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new ot(this.h,this.s,this.l/e)},Ju.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ot(this.h,this.s,e*this.l)},Ju.rgb=function(){return ut(this.h,this.s,this.l)},nu.hcl=at;var Ku=at.prototype=new st;Ku.brighter=function(e){return new at(this.h,this.c,Math.min(100,this.l+Qu*(arguments.length?e:1)))},Ku.darker=function(e){return new at(this.h,this.c,Math.max(0,this.l-Qu*(arguments.length?e:1)))},Ku.rgb=function(){return ft(this.h,this.c,this.l).rgb()},nu.lab=lt;var Qu=18,Gu=.95047,Yu=1,Zu=1.08883,ea=lt.prototype=new st;ea.brighter=function(e){return new lt(Math.min(100,this.l+Qu*(arguments.length?e:1)),this.a,this.b)},ea.darker=function(e){return new lt(Math.max(0,this.l-Qu*(arguments.length?e:1)),this.a,this.b)},ea.rgb=function(){return ct(this.l,this.a,this.b)},nu.rgb=mt;var ta=mt.prototype=new st;ta.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new mt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new mt(i,i,i)},ta.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new mt(e*this.r,e*this.g,e*this.b)},ta.hsl=function(){return Et(this.r,this.g,this.b)},ta.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var na=nu.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});na.forEach(function(e,t){na.set(e,gt(t))}),nu.functor=Nt,nu.xhr=kt(Ct),nu.dsv=function(e,t){function n(e,n,s){arguments.length<3&&(s=n,n=null);var o=Lt(e,t,null==n?r:i(n),s);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function s(t){return t.map(o).join(e)}function o(e){return u.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var u=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(l>=f)return o;if(i)return i=!1,s;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<f;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}l=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++l):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;f>l;){var r=e.charCodeAt(l++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(l)&&(++l,++u);else if(r!==a)continue;return e.slice(t,l-u)}return e.slice(t)}for(var r,i,s={},o={},u=[],f=e.length,l=0,c=0;(r=n())!==o;){for(var h=[];r!==s&&r!==o;)h.push(r),r=n();t&&null==(h=t(h,c++))||u.push(h)}return u},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new v,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(s).join("\n")},n},nu.csv=nu.dsv(",","text/csv"),nu.tsv=nu.dsv("	","text/tab-separated-values");var ra,ia,sa,oa,ua,aa=uu[g(uu,"requestAnimationFrame")]||function(e){setTimeout(e,17)};nu.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,s={c:e,t:i,f:!1,n:null};ia?ia.n=s:ra=s,ia=s,sa||(oa=clearTimeout(oa),sa=1,aa(Mt))},nu.timer.flush=function(){_t(),Dt()},nu.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var fa=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ht);nu.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=nu.round(e,Pt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),fa[8+n/3]};var la=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ca=nu.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=nu.round(e,Pt(e,t))).toFixed(Math.max(0,Math.min(20,Pt(e*(1+1e-15),t))))}}),ha=nu.time={},pa=Date;Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){da.setUTCDate.apply(this._,arguments)},setDay:function(){da.setUTCDay.apply(this._,arguments)},setFullYear:function(){da.setUTCFullYear.apply(this._,arguments)},setHours:function(){da.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){da.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){da.setUTCMinutes.apply(this._,arguments)},setMonth:function(){da.setUTCMonth.apply(this._,arguments)},setSeconds:function(){da.setUTCSeconds.apply(this._,arguments)},setTime:function(){da.setTime.apply(this._,arguments)}};var da=Date.prototype;ha.year=It(function(e){return e=ha.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ha.years=ha.year.range,ha.years.utc=ha.year.utc.range,ha.day=It(function(e){var t=new pa(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ha.days=ha.day.range,ha.days.utc=ha.day.utc.range,ha.dayOfYear=function(e){var t=ha.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ha[e]=It(function(e){return(e=ha.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ha.year(e).getDay();return Math.floor((ha.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ha[e+"s"]=n.range,ha[e+"s"].utc=n.utc.range,ha[e+"OfYear"]=function(e){var n=ha.year(e).getDay();return Math.floor((ha.dayOfYear(e)+(n+t)%7)/7)}}),ha.week=ha.sunday,ha.weeks=ha.sunday.range,ha.weeks.utc=ha.sunday.utc.range,ha.weekOfYear=ha.sundayOfYear;var va={"-":"",_:" ",0:"0"},ma=/^\s*\d+/,ga=/^%/;nu.locale=function(e){return{numberFormat:Bt(e),timeFormat:Rt(e)}};var ya=nu.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});nu.format=ya.numberFormat,nu.geo={},fn.prototype={s:0,t:0,add:function(e){ln(e,this.t,ba),ln(ba.s,this.s,this),this.s?this.t+=ba.t:this.s=ba.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ba=new fn;nu.geo.stream=function(e,t){e&&wa.hasOwnProperty(e.type)?wa[e.type](e,t):cn(e,t)};var wa={Feature:function(e,t){cn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)cn(n[r].geometry,t)}},Ea={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){hn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)hn(n[r],t,0)},Polygon:function(e,t){pn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)cn(n[r],t)}};nu.geo.area=function(e){return Sa=0,nu.geo.stream(e,Ta),Sa};var Sa,xa=new fn,Ta={sphere:function(){Sa+=4*Bu},point:y,lineStart:y,lineEnd:y,polygonStart:function(){xa.reset(),Ta.lineStart=dn},polygonEnd:function(){var e=2*xa;Sa+=0>e?4*Bu+e:e,Ta.lineStart=Ta.lineEnd=Ta.point=y}};nu.geo.bounds=function(){function e(e,t){b.push(w=[l=e,h=e]),c>t&&(c=t),t>p&&(p=t)}function t(t,n){var r=vn([t*qu,n*qu]);if(g){var i=gn(g,r),s=[i[1],-i[0],0],o=gn(s,i);wn(o),o=En(o);var a=t-d,f=a>0?1:-1,v=o[0]*Ru*f,m=mu(a)>180;if(m^(v>f*d&&f*t>v)){var y=o[1]*Ru;y>p&&(p=y)}else if(v=(v+360)%360-180,m^(v>f*d&&f*t>v)){var y=-o[1]*Ru;c>y&&(c=y)}else c>n&&(c=n),n>p&&(p=n);m?d>t?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t):h>=l?(l>t&&(l=t),t>h&&(h=t)):t>d?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t)}else e(t,n);g=r,d=t}function n(){E.point=t}function r(){w[0]=l,w[1]=h,E.point=e,g=null}function i(e,n){if(g){var r=e-d;y+=mu(r)>180?r+(r>0?360:-360):r}else v=e,m=n;Ta.point(e,n),t(e,n)}function s(){Ta.lineStart()}function o(){i(v,m),Ta.lineEnd(),mu(y)>Pu&&(l=-(h=180)),w[0]=l,w[1]=h,g=null}function u(e,t){return(t-=e)<0?t+360:t}function a(e,t){return e[0]-t[0]}function f(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var l,c,h,p,d,v,m,g,y,b,w,E={point:e,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=s,E.lineEnd=o,y=0,Ta.polygonStart()},polygonEnd:function(){Ta.polygonEnd(),E.point=e,E.lineStart=n,E.lineEnd=r,0>xa?(l=-(h=180),c=-(p=90)):y>Pu?p=90:-Pu>y&&(c=-90),w[0]=l,w[1]=h}};return function(e){p=h=-(l=c=1/0),b=[],nu.geo.stream(e,E);var t=b.length;if(t){b.sort(a);for(var n,r=1,i=b[0],s=[i];t>r;++r)n=b[r],f(n[0],i)||f(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):s.push(i=n);for(var o,n,d=-1/0,t=s.length-1,r=0,i=s[t];t>=r;i=n,++r)n=s[r],(o=u(i[1],n[0]))>d&&(d=o,l=n[0],h=i[1])}return b=w=null,1/0===l||1/0===c?[[0/0,0/0],[0/0,0/0]]:[[l,c],[h,p]]}}(),nu.geo.centroid=function(e){Na=Ca=ka=La=Aa=Oa=Ma=_a=Da=Pa=Ha=0,nu.geo.stream(e,Ba);var t=Da,n=Pa,r=Ha,i=t*t+n*n+r*r;return Hu>i&&(t=Oa,n=Ma,r=_a,Pu>Ca&&(t=ka,n=La,r=Aa),i=t*t+n*n+r*r,Hu>i)?[0/0,0/0]:[Math.atan2(n,t)*Ru,et(r/Math.sqrt(i))*Ru]};var Na,Ca,ka,La,Aa,Oa,Ma,_a,Da,Pa,Ha,Ba={sphere:y,point:xn,lineStart:Nn,lineEnd:Cn,polygonStart:function(){Ba.lineStart=kn},polygonEnd:function(){Ba.lineStart=Nn}},ja=Dn(An,jn,In,[-Bu,-Bu/2]),Fa=1e9;nu.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=zn(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(nu.geo.conicEqualArea=function(){return Wn(Xn)}).raw=Xn,nu.geo.albers=function(){return nu.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},nu.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return t=null,n(s,o),t||(r(s,o),t)||i(s,o),t}var t,n,r,i,s=nu.geo.albers(),o=nu.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=nu.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-0.425&&-0.214>r?o:i>=.166&&.234>i&&r>=-0.214&&-0.115>r?u:s).invert(e)},e.stream=function(e){var t=s.stream(e),n=o.stream(e),r=u.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(s.precision(t),o.precision(t),u.precision(t),e):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),o.scale(.35*t),u.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(t){if(!arguments.length)return s.translate();var f=s.scale(),l=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[l-.455*f,c-.238*f],[l+.455*f,c+.238*f]]).stream(a).point,r=o.translate([l-.307*f,c+.201*f]).clipExtent([[l-.425*f+Pu,c+.12*f+Pu],[l-.214*f-Pu,c+.234*f-Pu]]).stream(a).point,i=u.translate([l-.205*f,c+.212*f]).clipExtent([[l-.214*f+Pu,c+.166*f+Pu],[l-.115*f-Pu,c+.234*f-Pu]]).stream(a).point,e},e.scale(1070)};var Ia,qa,Ra,Ua,za,Wa,Xa={point:y,lineStart:y,lineEnd:y,polygonStart:function(){qa=0,Xa.lineStart=Vn},polygonEnd:function(){Xa.lineStart=Xa.lineEnd=Xa.point=y,Ia+=mu(qa/2)}},Va={point:$n,lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},$a={point:Qn,lineStart:Gn,lineEnd:Yn,polygonStart:function(){$a.lineStart=Zn},polygonEnd:function(){$a.point=Qn,$a.lineStart=Gn,$a.lineEnd=Yn}};nu.geo.path=function(){function e(e){return e&&("function"==typeof u&&s.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(s)),nu.geo.stream(e,o)),s.result()}function t(){return o=null,e}var n,r,i,s,o,u=4.5;return e.area=function(e){return Ia=0,nu.geo.stream(e,i(Xa)),Ia},e.centroid=function(e){return ka=La=Aa=Oa=Ma=_a=Da=Pa=Ha=0,nu.geo.stream(e,i($a)),Ha?[Da/Ha,Pa/Ha]:_a?[Oa/_a,Ma/_a]:Aa?[ka/Aa,La/Aa]:[0/0,0/0]},e.bounds=function(e){return za=Wa=-(Ra=Ua=1/0),nu.geo.stream(e,i(Va)),[[Ra,Ua],[za,Wa]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||nr(e):Ct,t()):n},e.context=function(e){return arguments.length?(s=null==(r=e)?new Jn:new er(e),"function"!=typeof u&&s.pointRadius(u),t()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(s.pointRadius(+t),+t),e):u},e.projection(nu.geo.albersUsa()).context(null)},nu.geo.transform=function(e){return{stream:function(t){var n=new rr(t);for(var r in e)n[r]=e[r];return n}}},rr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},nu.geo.projection=sr,nu.geo.projectionMutator=or,(nu.geo.equirectangular=function(){return sr(ar)}).raw=ar.invert=ar,nu.geo.rotation=function(e){function t(t){return t=e(t[0]*qu,t[1]*qu),t[0]*=Ru,t[1]*=Ru,t}return e=lr(e[0]%360*qu,e[1]*qu,e.length>2?e[2]*qu:0),t.invert=function(t){return t=e.invert(t[0]*qu,t[1]*qu),t[0]*=Ru,t[1]*=Ru,t},t},fr.invert=ar,nu.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=lr(-e[0]*qu,-e[1]*qu,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Ru,e[1]*=Ru}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=dr((t=+r)*qu,i*qu),e):t},e.precision=function(r){return arguments.length?(n=dr(t*qu,(i=+r)*qu),e):i},e.angle(90)},nu.geo.distance=function(e,t){var n,r=(t[0]-e[0])*qu,i=e[1]*qu,s=t[1]*qu,o=Math.sin(r),u=Math.cos(r),a=Math.sin(i),f=Math.cos(i),l=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((n=c*o)*n+(n=f*l-a*c*u)*n),a*l+f*c*u)},nu.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return nu.range(Math.ceil(s/m)*m,i,m).map(h).concat(nu.range(Math.ceil(f/g)*g,a,g).map(p)).concat(nu.range(Math.ceil(r/d)*d,n,d).filter(function(e){return mu(e%m)>Pu}).map(l)).concat(nu.range(Math.ceil(u/v)*v,o,v).filter(function(e){return mu(e%g)>Pu}).map(c))}var n,r,i,s,o,u,a,f,l,c,h,p,d=10,v=d,m=90,g=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(p(a).slice(1),h(i).reverse().slice(1),p(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(s=+t[0][0],i=+t[1][0],f=+t[0][1],a=+t[1][1],s>i&&(t=s,s=i,i=t),f>a&&(t=f,f=a,a=t),e.precision(y)):[[s,f],[i,a]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],e):[m,g]},e.minorStep=function(t){return arguments.length?(d=+t[0],v=+t[1],e):[d,v]},e.precision=function(t){return arguments.length?(y=+t,l=mr(u,o,90),c=gr(r,n,y),h=mr(f,a,90),p=gr(s,i,y),e):y},e.majorExtent([[-180,-90+Pu],[180,90-Pu]]).minorExtent([[-180,-80-Pu],[180,80+Pu]])},nu.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=yr,i=br;return e.distance=function(){return nu.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},nu.geo.interpolate=function(e,t){return wr(e[0]*qu,e[1]*qu,t[0]*qu,t[1]*qu)},nu.geo.length=function(e){return Ja=0,nu.geo.stream(e,Ka),Ja};var Ja,Ka={sphere:y,point:y,lineStart:Er,lineEnd:y,polygonStart:y,polygonEnd:y},Qa=Sr(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(nu.geo.azimuthalEqualArea=function(){return sr(Qa)}).raw=Qa;var Ga=Sr(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},Ct);(nu.geo.azimuthalEquidistant=function(){return sr(Ga)}).raw=Ga,(nu.geo.conicConformal=function(){return Wn(xr)}).raw=xr,(nu.geo.conicEquidistant=function(){return Wn(Tr)}).raw=Tr;var Ya=Sr(function(e){return 1/e},Math.atan);(nu.geo.gnomonic=function(){return sr(Ya)}).raw=Ya,Nr.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Iu]},(nu.geo.mercator=function(){return Cr(Nr)}).raw=Nr;var Za=Sr(function(){return 1},Math.asin);(nu.geo.orthographic=function(){return sr(Za)}).raw=Za;var ef=Sr(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(nu.geo.stereographic=function(){return sr(ef)}).raw=ef,kr.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Iu]},(nu.geo.transverseMercator=function(){var e=Cr(kr),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=kr,nu.geom={},nu.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Nt(n),s=Nt(r),o=e.length,u=[],a=[];for(t=0;o>t;t++)u.push([+i.call(this,e[t],t),+s.call(this,e[t],t),t]);for(u.sort(Mr),t=0;o>t;t++)a.push([u[t][0],-u[t][1]]);var f=Or(u),l=Or(a),c=l[0]===f[0],h=l[l.length-1]===f[f.length-1],p=[];for(t=f.length-1;t>=0;--t)p.push(e[u[f[t]][2]]);for(t=+c;t<l.length-h;++t)p.push(e[u[l[t]][2]]);return p}var n=Lr,r=Ar;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},nu.geom.polygon=function(e){return Eu(e,tf),e};var tf=nu.geom.polygon.prototype=[];tf.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},tf.centroid=function(e){var t,n,r=-1,i=this.length,s=0,o=0,u=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=u,u=this[r],n=t[0]*u[1]-u[0]*t[1],s+=(t[0]+u[0])*n,o+=(t[1]+u[1])*n;return[s*e,o*e]},tf.clip=function(e){for(var t,n,r,i,s,o,u=Pr(e),a=-1,f=this.length-Pr(this),l=this[f-1];++a<f;){for(t=e.slice(),e.length=0,i=this[a],s=t[(r=t.length-u)-1],n=-1;++n<r;)o=t[n],_r(o,l,i)?(_r(s,l,i)||e.push(Dr(s,o,l,i)),e.push(o)):_r(s,l,i)&&e.push(Dr(s,o,l,i)),s=o;u&&e.push(e[0]),l=i}return e};var nf,rf,sf,of,uf,af=[],ff=[];Ur.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Wr),t.length},ei.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ti.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=si(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ri(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ii(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ii(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ri(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,s=e.L,o=e.R;if(n=s?o?si(o):s:o,i?i.L===e?i.L=n:i.R=n:this._=n,s&&o?(r=n.C,n.C=e.C,n.L=s,s.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return e.C=!1,void 0;do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ri(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ii(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ri(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ii(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ri(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ii(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},nu.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=u[0][0],i=u[0][1],s=u[1][0],o=u[1][1];return oi(n(e),u).cells.forEach(function(n,u){var a=n.edges,f=n.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=r&&f.x<=s&&f.y>=i&&f.y<=o?[[r,o],[s,o],[s,i],[r,i]]:[];l.point=e[u]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(s(e,t)/Pu)*Pu,y:Math.round(o(e,t)/Pu)*Pu,i:t}})}var r=Lr,i=Ar,s=r,o=i,u=lf;return e?t(e):(t.links=function(e){return oi(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return oi(n(e)).cells.forEach(function(n,r){for(var i,s,o=n.site,u=n.edges.sort(Wr),a=-1,f=u.length,l=u[f-1].edge,c=l.l===o?l.r:l.l;++a<f;)i=l,s=c,l=u[a].edge,c=l.l===o?l.r:l.l,r<s.i&&r<c.i&&ai(o,s,c)<0&&t.push([e[r],e[s.i],e[c.i]])}),t},t.x=function(e){return arguments.length?(s=Nt(r=e),t):r},t.y=function(e){return arguments.length?(o=Nt(i=e),t):i},t.clipExtent=function(e){return arguments.length?(u=null==e?lf:e,t):u===lf?null:u},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):u===lf?null:u&&u[1]},t)};var lf=[[-1e6,-1e6],[1e6,1e6]];nu.geom.delaunay=function(e){return nu.geom.voronoi().triangles(e)},nu.geom.quadtree=function(e,t,n,r,i){function s(e){function s(e,t,n,r,i,s,o,u){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var a=e.x,l=e.y;if(null!=a)if(mu(a-n)+mu(l-r)<.01)f(e,t,n,r,i,s,o,u);else{var c=e.point;e.x=e.y=e.point=null,f(e,c,a,l,i,s,o,u),f(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else f(e,t,n,r,i,s,o,u)}function f(e,t,n,r,i,o,u,a){var f=.5*(i+u),l=.5*(o+a),c=n>=f,h=r>=l,p=h<<1|c;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=ci()),c?i=f:u=f,h?o=l:a=l,s(e,t,n,r,i,o,u,a)}var l,c,h,p,d,v,m,g,y,b=Nt(u),w=Nt(a);if(null!=t)v=t,m=n,g=r,y=i;else if(g=y=-(v=m=1/0),c=[],h=[],d=e.length,o)for(p=0;d>p;++p)l=e[p],l.x<v&&(v=l.x),l.y<m&&(m=l.y),l.x>g&&(g=l.x),l.y>y&&(y=l.y),c.push(l.x),h.push(l.y);else for(p=0;d>p;++p){var E=+b(l=e[p],p),S=+w(l,p);v>E&&(v=E),m>S&&(m=S),E>g&&(g=E),S>y&&(y=S),c.push(E),h.push(S)}var x=g-v,T=y-m;x>T?y=m+x:g=v+T;var N=ci();if(N.add=function(e){s(N,e,+b(e,++p),+w(e,p),v,m,g,y)},N.visit=function(e){hi(e,N,v,m,g,y)},N.find=function(e){return pi(N,e[0],e[1],v,m,g,y)},p=-1,null==t){for(;++p<d;)s(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);return c=h=e=l=null,N}var o,u=Lr,a=Ar;return(o=arguments.length)?(u=fi,a=li,3===o&&(i=n,r=t,n=t=0),s(e)):(s.x=function(e){return arguments.length?(u=e,s):u},s.y=function(e){return arguments.length?(a=e,s):a},s.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),s):null==t?null:[[t,n],[r,i]]},s.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),s):null==t?null:[r-t,i-n]},s)},nu.interpolateRgb=di,nu.interpolateObject=vi,nu.interpolateNumber=mi,nu.interpolateString=gi;var cf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hf=new RegExp(cf.source,"g");nu.interpolate=yi,nu.interpolators=[function(e,t){var n=typeof t;return("string"===n?na.has(t)||/^(#|rgb\(|hsl\()/.test(t)?di:gi:t instanceof st?di:Array.isArray(t)?bi:"object"===n&&isNaN(t)?vi:mi)(e,t)}],nu.interpolateArray=bi;var pf=function(){return Ct},df=nu.map({linear:pf,poly:Ci,quad:function(){return xi},cubic:function(){return Ti},sin:function(){return ki},exp:function(){return Li},circle:function(){return Ai},elastic:Oi,back:Mi,bounce:function(){return _i}}),vf=nu.map({"in":Ct,out:Ei,"in-out":Si,"out-in":function(e){return Si(Ei(e))}});nu.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=df.get(n)||pf,r=vf.get(r)||Ct,wi(r(n.apply(null,ru.call(arguments,1))))},nu.interpolateHcl=Di,nu.interpolateHsl=Pi,nu.interpolateLab=Hi,nu.interpolateRound=Bi,nu.transform=function(e){var t=su.createElementNS(nu.ns.prefix.svg,"g");return(nu.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new ji(n?n.matrix:mf)})(e)},ji.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var mf={a:1,b:0,c:0,d:1,e:0,f:0};nu.interpolateTransform=Ri,nu.layout={},nu.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Wi(e[n]));return t}},nu.layout.chord=function(){function e(){var e,f,c,h,p,d={},v=[],m=nu.range(s),g=[];for(n=[],r=[],e=0,h=-1;++h<s;){for(f=0,p=-1;++p<s;)f+=i[h][p];v.push(f),g.push(nu.range(s)),e+=f}for(o&&m.sort(function(e,t){return o(v[e],v[t])}),u&&g.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})}),e=(ju-l*s)/e,f=0,h=-1;++h<s;){for(c=f,p=-1;++p<s;){var y=m[h],b=g[y][p],w=i[y][b],E=f,S=f+=w*e;d[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:S,value:w}}r[y]={index:y,startAngle:c,endAngle:f,value:(f-c)/e},f+=l}for(h=-1;++h<s;)for(p=h-1;++p<s;){var x=d[h+"-"+p],T=d[p+"-"+h];(x.value||T.value)&&n.push(x.value<T.value?{source:T,target:x}:{source:x,target:T})}a&&t()}function t(){n.sort(function(e,t){return a((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,s,o,u,a,f={},l=0;return f.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,f):i},f.padding=function(e){return arguments.length?(l=e,n=r=null,f):l},f.sortGroups=function(e){return arguments.length?(o=e,n=r=null,f):o},f.sortSubgroups=function(e){return arguments.length?(u=e,n=null,f):u},f.sortChords=function(e){return arguments.length?(a=e,n&&t(),f):a},f.chords=function(){return n||e(),n},f.groups=function(){return r||e(),r},f},nu.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=i-n,a=s*s+o*o;if(a>u*u/m){if(d>a){var f=t.charge/a;e.px-=s*f,e.py-=o*f}return!0}if(t.point&&a&&d>a){var f=t.pointCharge/a;e.px-=s*f,e.py-=o*f}}return!t.charge}}function t(e){e.px=nu.event.x,e.py=nu.event.y,u.resume()}var n,r,i,s,o,u={},a=nu.dispatch("start","tick","end"),f=[1,1],l=.9,c=gf,h=yf,p=-30,d=bf,v=.1,m=.64,g=[],y=[];return u.tick=function(){if((r*=.99)<.005)return a.end({type:"end",alpha:r=0}),!0;var t,n,u,c,h,d,m,b,w,E=g.length,S=y.length;for(n=0;S>n;++n)u=y[n],c=u.source,h=u.target,b=h.x-c.x,w=h.y-c.y,(d=b*b+w*w)&&(d=r*s[n]*((d=Math.sqrt(d))-i[n])/d,b*=d,w*=d,h.x-=b*(m=c.weight/(h.weight+c.weight)),h.y-=w*m,c.x+=b*(m=1-m),c.y+=w*m);if((m=r*v)&&(b=f[0]/2,w=f[1]/2,n=-1,m))for(;++n<E;)u=g[n],u.x+=(b-u.x)*m,u.y+=(w-u.y)*m;if(p)for(Gi(t=nu.geom.quadtree(g),r,o),n=-1;++n<E;)(u=g[n]).fixed||t.visit(e(u));for(n=-1;++n<E;)u=g[n],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*l,u.y-=(u.py-(u.py=u.y))*l);a.tick({type:"tick",alpha:r})},u.nodes=function(e){return arguments.length?(g=e,u):g},u.links=function(e){return arguments.length?(y=e,u):y},u.size=function(e){return arguments.length?(f=e,u):f},u.linkDistance=function(e){return arguments.length?(c="function"==typeof e?e:+e,u):c},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,u):h},u.friction=function(e){return arguments.length?(l=+e,u):l},u.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.chargeDistance=function(e){return arguments.length?(d=e*e,u):Math.sqrt(d)},u.gravity=function(e){return arguments.length?(v=+e,u):v},u.theta=function(e){return arguments.length?(m=e*e,u):Math.sqrt(m)},u.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(a.start({type:"start",alpha:r=e}),nu.timer(u.tick)),u):r},u.start=function(){function e(e,r){if(!n){for(n=new Array(a),u=0;a>u;++u)n[u]=[];for(u=0;f>u;++u){var i=y[u];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var s,o=n[t],u=-1,f=o.length;++u<f;)if(!isNaN(s=o[u][e]))return s;return Math.random()*r}var t,n,r,a=g.length,l=y.length,d=f[0],v=f[1];for(t=0;a>t;++t)(r=g[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=y[t],"number"==typeof r.source&&(r.source=g[r.source]),"number"==typeof r.target&&(r.target=g[r.target]),++r.source.weight,++r.target.weight;for(t=0;a>t;++t)r=g[t],isNaN(r.x)&&(r.x=e("x",d)),isNaN(r.y)&&(r.y=e("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof c)for(t=0;l>t;++t)i[t]=+c.call(this,y[t],t);else for(t=0;l>t;++t)i[t]=c;if(s=[],"function"==typeof h)for(t=0;l>t;++t)s[t]=+h.call(this,y[t],t);else for(t=0;l>t;++t)s[t]=h;if(o=[],"function"==typeof p)for(t=0;a>t;++t)o[t]=+p.call(this,g[t],t);else for(t=0;a>t;++t)o[t]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=nu.behavior.drag().origin(Ct).on("dragstart.force",$i).on("drag.force",t).on("dragend.force",Ji)),arguments.length?(this.on("mouseover.force",Ki).on("mouseout.force",Qi).call(n),void 0):n},nu.rebind(u,a,"on")};var gf=20,yf=1,bf=1/0;nu.layout.hierarchy=function(){function e(i){var s,o=[i],u=[];for(i.depth=0;null!=(s=o.pop());)if(u.push(s),(f=n.call(e,s,s.depth))&&(a=f.length)){for(var a,f,l;--a>=0;)o.push(l=f[a]),l.parent=s,l.depth=s.depth+1;r&&(s.value=0),s.children=f}else r&&(s.value=+r.call(e,s,s.depth)||0),delete s.children;return es(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),u}var t=rs,n=ts,r=ns;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(Zi(t,function(e){e.children&&(e.value=0)}),es(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},nu.layout.partition=function(){function e(t,n,r,i){var s=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,s&&(o=s.length)){var o,u,a,f=-1;for(r=t.value?r/t.value:0;++f<o;)e(u=s[f],n,a=u.value*r,i),n+=a}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,s=-1;++s<i;)r=Math.max(r,t(n[s]));return 1+r}function n(n,s){var o=r.call(this,n,s);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=nu.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},Yi(n,r)},nu.layout.pie=function(){function e(o){var u,a=o.length,f=o.map(function(n,r){return+t.call(e,n,r)}),l=+("function"==typeof r?r.apply(this,arguments):r),c=("function"==typeof i?i.apply(this,arguments):i)-l,h=Math.min(Math.abs(c)/a,+("function"==typeof s?s.apply(this,arguments):s)),p=h*(0>c?-1:1),d=(c-a*p)/nu.sum(f),v=nu.range(a),m=[];return null!=n&&v.sort(n===wf?function(e,t){return f[t]-f[e]}:function(e,t){return n(o[e],o[t])}),v.forEach(function(e){m[e]={data:o[e],value:u=f[e],startAngle:l,endAngle:l+=u*d+p,padAngle:h}}),m}var t=Number,n=wf,r=0,i=ju,s=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(s=t,e):s},e};var wf={};nu.layout.stack=function(){function e(u,a){if(!(h=u.length))return u;var f=u.map(function(n,r){return t.call(e,n,r)}),l=f.map(function(t){return t.map(function(t,n){return[s.call(e,t,n),o.call(e,t,n)]})}),c=n.call(e,l,a);f=nu.permute(f,c),l=nu.permute(l,c);var h,p,d,v,m=r.call(e,l,a),g=f[0].length;for(d=0;g>d;++d)for(i.call(e,f[0][d],v=m[d],l[0][d][1]),p=1;h>p;++p)i.call(e,f[p][d],v+=l[p-1][d][1],l[p][d][1]);return u}var t=Ct,n=as,r=fs,i=us,s=ss,o=os;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:Ef.get(t)||as,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:Sf.get(t)||fs,e):r},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var Ef=nu.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(ls),s=e.map(cs),o=nu.range(r).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(t=0;r>t;++t)n=o[t],a>u?(u+=s[n],f.push(n)):(a+=s[n],l.push(n));return l.reverse().concat(f)},reverse:function(e){return nu.range(e.length).reverse()},"default":as}),Sf=nu.map({silhouette:function(e){var t,n,r,i=e.length,s=e[0].length,o=[],u=0,a=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;s>n;++n)a[n]=(u-o[n])/2;return a},wiggle:function(e){var t,n,r,i,s,o,u,a,f,l=e.length,c=e[0],h=c.length,p=[];for(p[0]=a=f=0,n=1;h>n;++n){for(t=0,i=0;l>t;++t)i+=e[t][n][1];for(t=0,s=0,u=c[n][0]-c[n-1][0];l>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;s+=o*e[t][n][1]}p[n]=a-=i?s/i*u:0,f>a&&(f=a)}for(n=0;h>n;++n)p[n]-=f;return p},expand:function(e){var t,n,r,i=e.length,s=e[0].length,o=1/i,u=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;s>n;++n)u[n]=0;return u},zero:fs});nu.layout.histogram=function(){function e(e,s){for(var o,u,a=[],f=e.map(n,this),l=r.call(this,f,s),c=i.call(this,l,f,s),s=-1,h=f.length,p=c.length-1,d=t?1:1/h;++s<p;)o=a[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;if(p>0)for(s=-1;++s<h;)u=f[s],u>=l[0]&&u<=l[1]&&(o=a[nu.bisect(c,u,1,p)-1],o.y+=d,o.push(e[s]));return a}var t=!0,n=Number,r=vs,i=ps;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Nt(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return ds(e,t)}:Nt(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},nu.layout.pack=function(){function e(e,s){var o=n.call(this,e,s),u=o[0],a=i[0],f=i[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,es(u,function(e){e.r=+l(e.value)}),es(u,ws),r){var c=r*(t?1:Math.max(2*u.r/a,2*u.r/f))/2;es(u,function(e){e.r+=c}),es(u,ws),es(u,function(e){e.r-=c})}return xs(u,a/2,f/2,t?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t,n=nu.layout.hierarchy().sort(ms),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},Yi(e,n)},nu.layout.tree=function(){function e(e,i){var l=o.call(this,e,i),c=l[0],h=t(c);if(es(h,n),h.parent.m=-h.z,Zi(h,r),f)Zi(c,s);else{var p=c,d=c,v=c;Zi(c,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>v.depth&&(v=e)});var m=u(p,d)/2-p.x,g=a[0]/(d.x+u(d,p)/2+m),y=a[1]/(v.depth||1);Zi(c,function(e){e.x=(e.x+m)*g,e.y=e.depth*y})}return l}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,s=t.children,o=0,u=s.length;u>o;++o)r.push((s[o]=i={_:s[o],parent:t,children:(i=s[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){As(e);var s=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+u(e._,r._),e.m=e.z-s):e.z=s}else r&&(e.z=r.z+u(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,s=e,o=t,a=i.parent.children[0],f=i.m,l=s.m,c=o.m,h=a.m;o=ks(o),i=Cs(i),o&&i;)a=Cs(a),s=ks(s),s.a=e,r=o.z+c-i.z-f+u(o._,i._),r>0&&(Ls(Os(o,e,n),e,r),f+=r,l+=r),c+=o.m,f+=i.m,h+=a.m,l+=s.m;o&&!ks(s)&&(s.t=o,s.m+=c-l),i&&!Cs(a)&&(a.t=i,a.m+=f-h,n=e)}return n}function s(e){e.x*=a[0],e.y=e.depth*a[1]}var o=nu.layout.hierarchy().sort(null).value(null),u=Ns,a=[1,1],f=null;return e.separation=function(t){return arguments.length?(u=t,e):u},e.size=function(t){return arguments.length?(f=null==(a=t)?s:null,e):f?null:a},e.nodeSize=function(t){return arguments.length?(f=null==(a=t)?null:s,e):f?a:null},Yi(e,o)},nu.layout.cluster=function(){function e(e,s){var o,u=t.call(this,e,s),a=u[0],f=0;es(a,function(e){var t=e.children;t&&t.length?(e.x=_s(t),e.y=Ms(t)):(e.x=o?f+=n(e,o):0,e.y=0,o=e)});var l=Ds(a),c=Ps(a),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return es(a,i?function(e){e.x=(e.x-a.x)*r[0],e.y=(a.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(a.y?e.y/a.y:1))*r[1]}),u}var t=nu.layout.hierarchy().sort(null).value(null),n=Ns,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},Yi(e,t)},nu.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,s=e.length;++i<s;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var s=n.children;if(s&&s.length){var o,u,a,f=c(n),l=[],h=s.slice(),d=1/0,v="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?1&n.depth?f.dy:f.dx:Math.min(f.dx,f.dy);for(e(h,f.dx*f.dy/n.value),l.area=0;(a=h.length)>0;)l.push(o=h[a-1]),l.area+=o.area,"squarify"!==p||(u=r(l,v))<=d?(h.pop(),d=u):(l.area-=l.pop().area,i(l,v,f,!1),v=Math.min(f.dx,f.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,v,f,!0),l.length=l.area=0),s.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var s,o=c(t),u=r.slice(),a=[];for(e(u,o.dx*o.dy/t.value),a.area=0;s=u.pop();)a.push(s),a.area+=s.area,null!=s.z&&(i(a,s.z?o.dx:o.dy,o,!u.length),a.length=a.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,s=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(s>n&&(s=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*s*d)):1/0}function i(e,t,n,r){var i,s=-1,o=e.length,u=n.x,f=n.y,l=t?a(e.area/t):0;if(t==n.dx){for((r||l>n.dy)&&(l=n.dy);++s<o;)i=e[s],i.x=u,i.y=f,i.dy=l,u+=i.dx=Math.min(n.x+n.dx-u,l?a(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++s<o;)i=e[s],i.x=u,i.y=f,i.dx=l,f+=i.dy=Math.min(n.y+n.dy-f,l?a(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-f,n.x+=l,n.dx-=l}}function s(r){var i=o||u(r),s=i[0];return s.x=0,s.y=0,s.dx=f[0],s.dy=f[1],o&&u.revalue(s),e([s],s.dx*s.dy/s.value),(o?n:t)(s),h&&(o=i),i}var o,u=nu.layout.hierarchy(),a=Math.round,f=[1,1],l=null,c=Hs,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(f=e,s):f},s.padding=function(e){function t(t){var n=e.call(s,t,t.depth);return null==n?Hs(t):Bs(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Bs(t,e)}if(!arguments.length)return l;var r;return c=null==(l=e)?Hs:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,s},s.round=function(e){return arguments.length?(a=e?Math.round:Number,s):a!=Number},s.sticky=function(e){return arguments.length?(h=e,o=null,s):h},s.ratio=function(e){return arguments.length?(d=e,s):d},s.mode=function(e){return arguments.length?(p=e+"",s):p},Yi(s,u)},nu.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=nu.random.normal.apply(nu,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=nu.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},nu.scale={};var xf={floor:Ct,ceil:Ct};nu.scale.linear=function(){return zs([0,1],[0,1],yi,!1)};var Tf={s:1,g:1,p:1,r:1,e:1};nu.scale.log=function(){return Gs(nu.scale.linear().domain([0,1]),10,!0,[1,10])};var Nf=nu.format(".0e"),Cf={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};nu.scale.pow=function(){return Ys(nu.scale.linear(),1,[0,1])},nu.scale.sqrt=function(){return nu.scale.pow().exponent(.5)},nu.scale.ordinal=function(){return eo([],{t:"range",a:[[]]})},nu.scale.category10=function(){return nu.scale.ordinal().range(kf)},nu.scale.category20=function(){return nu.scale.ordinal().range(Lf)},nu.scale.category20b=function(){return nu.scale.ordinal().range(Af)},nu.scale.category20c=function(){return nu.scale.ordinal().range(Of)};var kf=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yt),Lf=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yt),Af=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yt),Of=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yt);nu.scale.quantile=function(){return to([],[])},nu.scale.quantize=function(){return no(0,1,[0,1])},nu.scale.threshold=function(){return ro([.5],[0,1])},nu.scale.identity=function(){return io([0,1])},nu.svg={},nu.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),f=Math.max(0,+r.apply(this,arguments)),l=o.apply(this,arguments)-Iu,c=u.apply(this,arguments)-Iu,h=Math.abs(c-l),p=l>c?0:1;if(e>f&&(d=f,f=e,e=d),h>=Fu)return t(f,p)+(e?t(e,1-p):"")+"Z";var d,v,m,g,y,b,w,E,S,x,T,N,C=0,k=0,L=[];if((g=(+a.apply(this,arguments)||0)/2)&&(m=s===Mf?Math.sqrt(e*e+f*f):+s.apply(this,arguments),p||(k*=-1),f&&(k=et(m/f*Math.sin(g))),e&&(C=et(m/e*Math.sin(g)))),f){y=f*Math.cos(l+k),b=f*Math.sin(l+k),w=f*Math.cos(c-k),E=f*Math.sin(c-k);var A=Math.abs(c-l-2*k)<=Bu?0:1;if(k&&co(y,b,w,E)===p^A){var O=(l+c)/2;y=f*Math.cos(O),b=f*Math.sin(O),w=E=null}}else y=b=0;if(e){S=e*Math.cos(c-C),x=e*Math.sin(c-C),T=e*Math.cos(l+C),N=e*Math.sin(l+C);var M=Math.abs(l-c+2*C)<=Bu?0:1;if(C&&co(S,x,T,N)===1-p^M){var _=(l+c)/2;S=e*Math.cos(_),x=e*Math.sin(_),T=N=null}}else S=x=0;if((d=Math.min(Math.abs(f-e)/2,+i.apply(this,arguments)))>.001){v=f>e^p?0:1;var D=null==T?[S,x]:null==w?[y,b]:Dr([y,b],[T,N],[w,E],[S,x]),P=y-D[0],H=b-D[1],B=w-D[0],j=E-D[1],F=1/Math.sin(Math.acos((P*B+H*j)/(Math.sqrt(P*P+H*H)*Math.sqrt(B*B+j*j)))/2),I=Math.sqrt(D[0]*D[0]+D[1]*D[1]);if(null!=w){var q=Math.min(d,(f-I)/(F+1)),R=ho(null==T?[S,x]:[T,N],[y,b],f,q,p),U=ho([w,E],[S,x],f,q,p);d===q?L.push("M",R[0],"A",q,",",q," 0 0,",v," ",R[1],"A",f,",",f," 0 ",1-p^co(R[1][0],R[1][1],U[1][0],U[1][1]),",",p," ",U[1],"A",q,",",q," 0 0,",v," ",U[0]):L.push("M",R[0],"A",q,",",q," 0 1,",v," ",U[0])}else L.push("M",y,",",b);if(null!=T){var z=Math.min(d,(e-I)/(F-1)),W=ho([y,b],[T,N],e,-z,p),X=ho([S,x],null==w?[y,b]:[w,E],e,-z,p);d===z?L.push("L",X[0],"A",z,",",z," 0 0,",v," ",X[1],"A",e,",",e," 0 ",p^co(X[1][0],X[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",z,",",z," 0 0,",v," ",W[0]):L.push("L",X[0],"A",z,",",z," 0 0,",v," ",W[0])}else L.push("L",S,",",x)}else L.push("M",y,",",b),null!=w&&L.push("A",f,",",f," 0 ",A,",",p," ",w,",",E),L.push("L",S,",",x),null!=T&&L.push("A",e,",",e," 0 ",M,",",1-p," ",T,",",N);return L.push("Z"),L.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+ -e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=oo,r=uo,i=so,s=Mf,o=ao,u=fo,a=lo;return e.innerRadius=function(t){return arguments.length?(n=Nt(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Nt(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Nt(t),e):i},e.padRadius=function(t){return arguments.length?(s=t==Mf?Mf:Nt(t),e):s},e.startAngle=function(t){return arguments.length?(o=Nt(t),e):o},e.endAngle=function(t){return arguments.length?(u=Nt(t),e):u},e.padAngle=function(t){return arguments.length?(a=Nt(t),e):a},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-Iu;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Mf="auto";nu.svg.line=function(){return po(Ct)};var _f=nu.map({linear:vo,"linear-closed":mo,step:go,"step-before":yo,"step-after":bo,basis:No,"basis-open":Co,"basis-closed":ko,bundle:Lo,cardinal:So,"cardinal-open":wo,"cardinal-closed":Eo,monotone:Po});_f.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Df=[0,2/3,1/3,0],Pf=[0,1/3,2/3,0],Hf=[0,1/6,2/3,1/6];nu.svg.line.radial=function(){var e=po(Ho);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},yo.reverse=bo,bo.reverse=yo,nu.svg.area=function(){return Bo(Ct)},nu.svg.area.radial=function(){var e=Bo(Ho);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},nu.svg.chord=function(){function e(e,u){var a=t(this,s,e,u),f=t(this,o,e,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(n(a,f)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,f.r,f.p0)+r(f.r,f.p1,f.a1-f.a0)+i(f.r,f.p1,a.r,a.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),s=u.call(e,i,r),o=a.call(e,i,r)-Iu,l=f.call(e,i,r)-Iu;return{r:s,a0:o,a1:l,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(l),s*Math.sin(l)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Bu)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var s=yr,o=br,u=jo,a=ao,f=fo;return e.radius=function(t){return arguments.length?(u=Nt(t),e):u},e.source=function(t){return arguments.length?(s=Nt(t),e):s},e.target=function(t){return arguments.length?(o=Nt(t),e):o},e.startAngle=function(t){return arguments.length?(a=Nt(t),e):a},e.endAngle=function(t){return arguments.length?(f=Nt(t),e):f},e},nu.svg.diagonal=function(){function e(e,i){var s=t.call(this,e,i),o=n.call(this,e,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var t=yr,n=br,r=Fo;return e.source=function(n){return arguments.length?(t=Nt(n),e):t},e.target=function(t){return arguments.length?(n=Nt(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},nu.svg.diagonal.radial=function(){var e=nu.svg.diagonal(),t=Fo,n=e.projection;return e.projection=function(e){return arguments.length?n(Io(t=e)):t},e},nu.svg.symbol=function(){function e(e,r){return(Bf.get(t.call(this,e,r))||Uo)(n.call(this,e,r))}var t=Ro,n=qo;return e.type=function(n){return arguments.length?(t=Nt(n),e):t},e.size=function(t){return arguments.length?(n=Nt(t),e):n},e};var Bf=nu.map({circle:Uo,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ff)),n=t*Ff;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/jf),n=t*jf/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/jf),n=t*jf/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});nu.svg.symbolTypes=Bf.keys();var jf=Math.sqrt(3),Ff=Math.tan(30*qu);Cu.transition=function(e){for(var t,n,r=If||++zf,i=$o(e),s=[],o=qf||{time:Date.now(),ease:Ni,delay:0,duration:250},u=-1,a=this.length;++u<a;){s.push(t=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(n=f[l])&&Jo(n,l,i,r,o),t.push(n)}return Wo(s,i,r)},Cu.interrupt=function(e){return this.each(null==e?Rf:zo($o(e)))};var If,qf,Rf=zo($o()),Uf=[],zf=0;Uf.call=Cu.call,Uf.empty=Cu.empty,Uf.node=Cu.node,Uf.size=Cu.size,nu.transition=function(e,t){return e&&e.transition?If?e.transition(t):e:Au.transition(e)},nu.transition.prototype=Uf,Uf.select=function(e){var t,n,r,i=this.id,s=this.namespace,o=[];e=N(e);for(var u=-1,a=this.length;++u<a;){o.push(t=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(r=f[l])&&(n=e.call(r,r.__data__,l,u))?("__data__"in r&&(n.__data__=r.__data__),Jo(n,l,s,i,r[s][i]),t.push(n)):t.push(null)}return Wo(o,s,i)},Uf.selectAll=function(e){var t,n,r,i,s,o=this.id,u=this.namespace,a=[];e=C(e);for(var f=-1,l=this.length;++f<l;)for(var c=this[f],h=-1,p=c.length;++h<p;)if(r=c[h]){s=r[u][o],n=e.call(r,r.__data__,h,f),a.push(t=[]);for(var d=-1,v=n.length;++d<v;)(i=n[d])&&Jo(i,d,u,o,s),t.push(i)}return Wo(a,u,o)},Uf.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=F(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]);for(var n=this[s],u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return Wo(i,this.namespace,this.id)},Uf.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):q(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Uf.attr=function(e,t){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(u);return n!==e&&(t=o(n,e),function(e){this.setAttribute(u,t(e))})})}function s(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(u.space,u.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(u.space,u.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Ri:yi,u=nu.ns.qualify(e);return Xo(this,"attr."+e,t,u.local?s:i)},Uf.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=nu.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Uf.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(t){return null==t?r:(t+="",function(){var r,i=uu.getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=yi(i,t),function(t){this.style.setProperty(e,r(t),n)})})}var s=arguments.length;if(3>s){if("string"!=typeof e){2>s&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Xo(this,"style."+e,t,i)},Uf.styleTween=function(e,t,n){function r(r,i){var s=t.call(this,r,i,uu.getComputedStyle(this,null).getPropertyValue(e));return s&&function(t){this.style.setProperty(e,s(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Uf.text=function(e){return Xo(this,"text",e,Vo)},Uf.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Uf.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=nu.ease.apply(nu,arguments)),q(this,function(r){r[n][t].ease=e}))},Uf.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:q(this,"function"==typeof e?function(r,i,s){r[n][t].delay=+e.call(r,r.__data__,i,s)}:(e=+e,function(r){r[n][t].delay=e}))},Uf.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:q(this,"function"==typeof e?function(r,i,s){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,s))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Uf.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=qf,s=If;try{If=n,q(this,function(t,i,s){qf=t[r][n],e.call(t,t.__data__,i,s)})}finally{qf=i,If=s}}else q(this,function(i){var s=i[r][n];(s.event||(s.event=nu.dispatch("start","end","interrupt"))).on(e,t)});return this},Uf.transition=function(){for(var e,t,n,r,i=this.id,s=++zf,o=this.namespace,u=[],a=0,f=this.length;f>a;a++){u.push(e=[]);for(var t=this[a],l=0,c=t.length;c>l;l++)(n=t[l])&&(r=n[o][i],Jo(n,l,o,s,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Wo(u,o,s)},nu.svg.axis=function(){function e(e){e.each(function(){var e,f=nu.select(this),l=this.__chart__||n,c=this.__chart__=n.copy(),h=null==a?c.ticks?c.ticks.apply(c,u):c.domain():a,p=null==t?c.tickFormat?c.tickFormat.apply(c,u):Ct:t,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Pu),m=nu.transition(d.exit()).style("opacity",Pu).remove(),g=nu.transition(d.order()).style("opacity",1),y=Math.max(i,0)+o,b=Fs(c),w=f.selectAll(".domain").data([0]),E=(w.enter().append("path").attr("class","domain"),nu.transition(w));v.append("line"),v.append("text");var S,x,T,N,C=v.select("line"),k=g.select("line"),L=d.select("text").text(p),A=v.select("text"),O=g.select("text"),M="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=Ko,S="x",T="y",x="x2",N="y2",L.attr("dy",0>M?"0em":".71em").style("text-anchor","middle"),E.attr("d","M"+b[0]+","+M*s+"V0H"+b[1]+"V"+M*s)):(e=Qo,S="y",T="x",x="y2",N="x2",L.attr("dy",".32em").style("text-anchor",0>M?"end":"start"),E.attr("d","M"+M*s+","+b[0]+"H0V"+b[1]+"H"+M*s)),C.attr(N,M*i),A.attr(T,M*y),k.attr(x,0).attr(N,M*i),O.attr(S,0).attr(T,M*y),c.rangeBand){var _=c,D=_.rangeBand()/2;l=c=function(e){return _(e)+D}}else l.rangeBand?l=c:m.call(e,c,l);v.call(e,l,c),g.call(e,c,c)})}var t,n=nu.scale.linear(),r=Wf,i=6,s=6,o=3,u=[10],a=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Xf?t+"":Wf,e):r},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickValues=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,s=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(s=+t,e):s},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var Wf="bottom",Xf={top:1,right:1,bottom:1,left:1};nu.svg.brush=function(){function e(s){s.each(function(){var s=nu.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=s.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),s.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=s.selectAll(".resize").data(d,Ct);u.exit().remove(),u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Vf[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",e.empty()?"none":null);var l,c=nu.transition(s),h=nu.transition(o);a&&(l=Fs(a),h.attr("x",l[0]).attr("width",l[1]-l[0]),n(c)),f&&(l=Fs(f),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(c)),t(c)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+l[+/e$/.test(e)]+","+c[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",l[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(e){e.select(".extent").attr("y",c[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1]-c[0])}function i(){function i(){32==nu.event.keyCode&&(L||(y=null,O[0]-=l[1],O[1]-=c[1],L=2),E())}function d(){32==nu.event.keyCode&&2==L&&(O[0]+=l[1],O[1]+=c[1],L=0,E())}function v(){var e=nu.mouse(w),i=!1;b&&(e[0]+=b[0],e[1]+=b[1]),L||(nu.event.altKey?(y||(y=[(l[0]+l[1])/2,(c[0]+c[1])/2]),O[0]=l[+(e[0]<y[0])],O[1]=c[+(e[1]<y[1])]):y=null),C&&m(e,a,0)&&(n(T),i=!0),k&&m(e,f,1)&&(r(T),i=!0),i&&(t(T),x({type:"brush",mode:L?"move":"resize"}))}function m(e,t,n){var r,i,u=Fs(t),a=u[0],f=u[1],d=O[n],v=n?c:l,m=v[1]-v[0];return L&&(a-=d,f-=m+d),r=(n?p:h)?Math.max(a,Math.min(f,e[n])):e[n],L?i=(r+=d)+m:(y&&(d=Math.max(a,Math.min(f,2*y[n]-r))),r>d?(i=r,r=d):i=d),v[0]!=r||v[1]!=i?(n?o=null:s=null,v[0]=r,v[1]=i,!0):void 0}function g(){v(),T.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),nu.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),x({type:"brushend"})}var y,b,w=this,S=nu.select(nu.event.target),x=u.of(w,arguments),T=nu.select(w),N=S.datum(),C=!/^(n|s)$/.test(N)&&a,k=!/^(e|w)$/.test(N)&&f,L=S.classed("extent"),A=V(),O=nu.mouse(w),M=nu.select(uu).on("keydown.brush",i).on("keyup.brush",d);if(nu.event.changedTouches?M.on("touchmove.brush",v).on("touchend.brush",g):M.on("mousemove.brush",v).on("mouseup.brush",g),T.interrupt().selectAll("*").interrupt(),L)O[0]=l[0]-O[0],O[1]=c[0]-O[1];else if(N){var _=+/w$/.test(N),D=+/^n/.test(N);b=[l[1-_]-O[0],c[1-D]-O[1]],O[0]=l[_],O[1]=c[D]}else nu.event.altKey&&(y=O.slice());T.style("pointer-events","none").selectAll(".resize").style("display",null),nu.select("body").style("cursor",S.style("cursor")),x({type:"brushstart"}),v()}var s,o,u=x(e,"brushstart","brush","brushend"),a=null,f=null,l=[0,0],c=[0,0],h=!0,p=!0,d=$f[0];return e.event=function(e){e.each(function(){var e=u.of(this,arguments),t={x:l,y:c,i:s,j:o},n=this.__chart__||t;this.__chart__=t,If?nu.select(this).transition().each("start.brush",function(){s=n.i,o=n.j,l=n.x,c=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=bi(l,t.x),r=bi(c,t.y);return s=o=null,function(i){l=t.x=n(i),c=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=t.i,o=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(a=t,d=$f[!a<<1|!f],e):a},e.y=function(t){return arguments.length?(f=t,d=$f[!a<<1|!f],e):f},e.clamp=function(t){return arguments.length?(a&&f?(h=!!t[0],p=!!t[1]):a?h=!!t:f&&(p=!!t),e):a&&f?[h,p]:a?h:f?p:null},e.extent=function(t){var n,r,i,u,h;return arguments.length?(a&&(n=t[0],r=t[1],f&&(n=n[0],r=r[0]),s=[n,r],a.invert&&(n=a(n),r=a(r)),n>r&&(h=n,n=r,r=h),(n!=l[0]||r!=l[1])&&(l=[n,r])),f&&(i=t[0],u=t[1],a&&(i=i[1],u=u[1]),o=[i,u],f.invert&&(i=f(i),u=f(u)),i>u&&(h=i,i=u,u=h),(i!=c[0]||u!=c[1])&&(c=[i,u])),e):(a&&(s?(n=s[0],r=s[1]):(n=l[0],r=l[1],a.invert&&(n=a.invert(n),r=a.invert(r)),n>r&&(h=n,n=r,r=h))),f&&(o?(i=o[0],u=o[1]):(i=c[0],u=c[1],f.invert&&(i=f.invert(i),u=f.invert(u)),i>u&&(h=i,i=u,u=h))),a&&f?[[n,i],[r,u]]:a?[n,r]:f&&[i,u])},e.clear=function(){return e.empty()||(l=[0,0],c=[0,0],s=o=null),e},e.empty=function(){return!!a&&l[0]==l[1]||!!f&&c[0]==c[1]},nu.rebind(e,u,"on")};var Vf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$f=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Jf=ha.format=ya.timeFormat,Kf=Jf.utc,Qf=Kf("%Y-%m-%dT%H:%M:%S.%LZ");Jf.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?Go:Qf,Go.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Go.toString=Qf.toString,ha.second=It(function(e){return new pa(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ha.seconds=ha.second.range,ha.seconds.utc=ha.second.utc.range,ha.minute=It(function(e){return new pa(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ha.minutes=ha.minute.range,ha.minutes.utc=ha.minute.utc.range,ha.hour=It(function(e){var t=e.getTimezoneOffset()/60;return new pa(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ha.hours=ha.hour.range,ha.hours.utc=ha.hour.utc.range,ha.month=It(function(e){return e=ha.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ha.months=ha.month.range,ha.months.utc=ha.month.utc.range;var Gf=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Yf=[[ha.second,1],[ha.second,5],[ha.second,15],[ha.second,30],[ha.minute,1],[ha.minute,5],[ha.minute,15],[ha.minute,30],[ha.hour,1],[ha.hour,3],[ha.hour,6],[ha.hour,12],[ha.day,1],[ha.day,2],[ha.week,1],[ha.month,1],[ha.month,3],[ha.year,1]],Zf=Jf.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",An]]),el={range:function(e,t,n){return nu.range(Math.ceil(e/n)*n,+t,n).map(Zo)},floor:Ct,ceil:Ct};Yf.year=ha.year,ha.scale=function(){return Yo(nu.scale.linear(),Yf,Zf)};var tl=Yf.map(function(e){return[e[0].utc,e[1]]}),nl=Kf.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",An]]);tl.year=ha.year.utc,ha.scale.utc=function(){return Yo(nu.scale.linear(),tl,nl)},nu.text=kt(function(e){return e.responseText}),nu.json=function(e,t){return Lt(e,"application/json",eu,t)},nu.html=function(e,t){return Lt(e,"text/html",tu,t)},nu.xml=kt(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define(nu):"object"==typeof module&&module.exports&&(module.exports=nu),this.d3=nu}(),function(){function t(e,t){return(new Date(t,e+1,0)).getDate()}function n(e,t,n){return function(r,i,s){var o=e(r),u=[];o<r&&t(o);if(s>1)while(o<i){var a=new Date(+o);n(a)%s===0&&u.push(a),t(o)}else while(o<i)u.push(new Date(+o)),t(o);return u}}var e=window.nv||{};e.version="0.0.1a",e.dev=!1,window.nv=e,e.tooltip={},e.utils={},e.models={},e.charts={},e.graphs=[],e.logs={},e.dispatch=d3.dispatch("render_start","render_end"),e.dev&&(e.dispatch.on("render_start",function(t){e.logs.startTime=+(new Date)}),e.dispatch.on("render_end",function(t){e.logs.endTime=+(new Date),e.logs.totalTime=e.logs.endTime-e.logs.startTime,e.log("total",e.logs.totalTime)})),e.log=function(){if(e.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(e.dev&&console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},e.render=function(n){n=n||1,e.render.active=!0,e.dispatch.render_start(),setTimeout(function(){var t,r;for(var i=0;i<n&&(r=e.render.queue[i]);i++)t=r.generate(),typeof r.callback==typeof Function&&r.callback(t),e.graphs.push(t);e.render.queue.splice(0,i),e.render.queue.length?setTimeout(arguments.callee,0):(e.render.active=!1,e.dispatch.render_end())},0)},e.render.active=!1,e.render.queue=[],e.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},e.identity=function(e){return e},e.strip=function(e){return e.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)},d3.time.monthEnds=n(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(e){return e.getMonth()}),d3.svg.axisStatic=function(){function h(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function p(e){return e.rangeExtent?e.rangeExtent():h(e.range())}function d(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function v(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function m(e,t,n){i=[];if(n&&t.length>1){var r=h(e.domain()),i,s=-1,o=t.length,u=(t[1]-t[0])/++n,a,f;while(++s<o)for(a=n;--a>0;)(f=+t[s]-a*u)>=r[0]&&i.push(f);for(--s,a=0;++a<n&&(f=+t[s]+a*u)<r[1];)i.push(f)}return i}function g(l){l.each(function(){var l=d3.select(this),c=u==null?e.ticks?e.ticks.apply(e,o):e.domain():u,h=a==null?e.tickFormat?e.tickFormat.apply(e,o):String:a,g=m(e,c,f),y=l.selectAll(".tick.minor").data(g,String),b=y.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1),w=y.exit().remove(),E=y.style("opacity",1),S=l.selectAll(".tick.major").data(c,String),x=S.enter().insert("g","path").attr("class","tick major").style("opacity",1),T=S.exit().remove(),N=S.style("opacity",1),C,k=p(e),L=l.selectAll(".domain").data([0]),A=(L.enter().append("path").attr("class","domain"),L),O=e.copy();x.append("line"),x.append("text");var M=x.select("line"),_=N.select("line"),D=S.select("text").text(h),P=x.select("text"),H=N.select("text");switch(t){case"bottom":C=d,b.attr("y2",r),E.attr("x2",0).attr("y2",r),M.attr("y2",n),P.attr("y",Math.max(n,0)+s),_.attr("x2",0).attr("y2",n),H.attr("x",0).attr("y",Math.max(n,0)+s),D.attr("dy",".71em").style("text-anchor","middle"),A.attr("d","M"+k[0]+","+i+"V0H"+k[1]+"V"+i);break;case"top":C=d,b.attr("y2",-r),E.attr("x2",0).attr("y2",-r),M.attr("y2",-n),P.attr("y",-(Math.max(n,0)+s)),_.attr("x2",0).attr("y2",-n),H.attr("x",0).attr("y",-(Math.max(n,0)+s)),D.attr("dy","0em").style("text-anchor","middle"),A.attr("d","M"+k[0]+","+ -i+"V0H"+k[1]+"V"+ -i);break;case"left":C=v,b.attr("x2",-r),E.attr("x2",-r).attr("y2",0),M.attr("x2",-n),P.attr("x",-(Math.max(n,0)+s)),_.attr("x2",-n).attr("y2",0),H.attr("x",-(Math.max(n,0)+s)).attr("y",0),D.attr("dy",".32em").style("text-anchor","end"),A.attr("d","M"+ -i+","+k[0]+"H0V"+k[1]+"H"+ -i);break;case"right":C=v,b.attr("x2",r),E.attr("x2",r).attr("y2",0),M.attr("x2",n),P.attr("x",Math.max(n,0)+s),_.attr("x2",n).attr("y2",0),H.attr("x",Math.max(n,0)+s).attr("y",0),D.attr("dy",".32em").style("text-anchor","start"),A.attr("d","M"+i+","+k[0]+"H0V"+k[1]+"H"+i)}if(e.ticks)x.call(C,O),N.call(C,O),T.call(C,O),b.call(C,O),E.call(C,O),w.call(C,O);else{var B=O.rangeBand()/2,j=function(e){return O(e)+B};x.call(C,j),N.call(C,j)}})}var e=d3.scale.linear(),t=l,n=6,r=6,i=6,s=3,o=[10],u=null,a,f=0,l="bottom",c={top:1,right:1,bottom:1,left:1};return g.scale=function(t){return arguments.length?(e=t,g):e},g.orient=function(e){return arguments.length?(t=e in c?e+"":l,g):t},g.ticks=function(){return arguments.length?(o=arguments,g):o},g.tickValues=function(e){return arguments.length?(u=e,g):u},g.tickFormat=function(e){return arguments.length?(a=e,g):a},g.tickSize=function(e,t){if(!arguments.length)return n;var s=arguments.length-1;return n=+e,r=s>1?+t:n,i=s>0?+arguments[s]:n,g},g.tickPadding=function(e){return arguments.length?(s=+e,g):s},g.tickSubdivide=function(e){return arguments.length?(f=+e,g):f},g},function(){var e=window.nv.tooltip={};e.show=function(t,n,r,i,s,o){var u=document.createElement("div"),a=document.createElement("div"),f=document.createElement("div");return r=r||"s",i=i||10,a.className="tooltip-inner",f.className="tooltip-arrow",a.innerHTML=n,u.style.left=0,u.style.top=-1e3,u.style.opacity=0,u.className="tooltip xy-tooltip in",u.appendChild(a),u.appendChild(f),s.appendChild(u),e.position(s,u,t,r,i),u.style.opacity=1,u},e.cleanup=function(){var e=document.getElementsByClassName("tooltip"),t=[],n=e.length;while(n>0)n-=1,e[n].className.indexOf("xy-tooltip")!==-1&&(t.push(e[n]),e[n].style.transitionDelay="0 !important",e[n].style.opacity=0,e[n].className="nvtooltip-pending-removal out");setTimeout(function(){var e;while(t.length)e=t.pop(),e.parentNode.removeChild(e)},500)},e.position=function(e,t,n,r,i){function d(){var e=n[0]-s/2;return e<l&&(e=l),e+s>u&&(e=u-s),e}function v(){var e=n[1]-o/2;return e<f&&(e=f),e+o>f+a&&(e=f-o),e}function m(e){var r=n[0]-s/2-e-5,i=t.getElementsByClassName("tooltip-arrow")[0];i.style.marginLeft=r+"px"}function g(e){var r=n[1]-o/2-e-5,i=t.getElementsByClassName("tooltip-arrow")[0];i.style.marginTop=r+"px"}r=r||"s",i=i||10;var s=parseInt(t.offsetWidth,10),o=parseInt(t.offsetHeight,10),u=e.clientWidth,a=e.clientHeight,f=e.scrollTop,l=e.scrollLeft,c=t.className.replace(/ top| right| bottom| left/g,""),h,p;switch(r){case"e":p=v(),h=n[0]-s-i,g(p),h<l?(h=n[0]+i,c+=" right"):c+=" left";break;case"w":p=v(),h=n[0]+i,g(p),h+s>u?(h=n[0]-s-i,c+=" left"):c+=" right";break;case"n":h=d(),p=n[1]+i,m(h),p+o>f+a?(p=n[1]-o-i,c+=" top"):c+=" bottom";break;case"s":h=d(),p=n[1]-o-i,m(h),f>p?(p=n[1]+10,c+=" bottom"):c+=" top"}t.style.left=h+"px",t.style.top=p+"px",t.className=c}}(),e.utils.windowSize=function(){var e={width:640,height:480};return document.body&&document.body.offsetWidth&&(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight),document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e.width=window.innerWidth,e.height=window.innerHeight),e},e.utils.windowResize=function(e){window.attachEvent?window.attachEvent("onresize",e):window.addEventListener&&window.addEventListener("resize",e,!0)},e.utils.windowUnResize=function(e){window.detachEvent?window.detachEvent("onresize",e):window.removeEventListener&&window.removeEventListener("resize",e,!0)},e.utils.resizeOnPrint=function(e){if(window.matchMedia){var t=window.matchMedia("print");t.addListener(function(t){t.matches&&e()})}else window.attachEvent?window.attachEvent("onbeforeprint",e):window.onbeforeprint=e},e.utils.unResizeOnPrint=function(e){if(window.matchMedia){var t=window.matchMedia("print");t.removeListener(function(t){t.matches&&e()})}else window.detachEvent?window.detachEvent("onbeforeprint",e):window.onbeforeprint=null},e.utils.getColor=function(t){return arguments.length?Object.prototype.toString.call(t)==="[object Array]"?function(e,n){return e.color||t[n%t.length]}:t:e.utils.defaultColor()},e.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}},e.utils.customTheme=function(e,t,n){t=t||function(e){return e.key},n=n||d3.scale.category20().range();var r=n.length;return function(i,s){var o=t(i);return r||(r=n.length),typeof e[o]!="undefined"?typeof e[o]=="function"?e[o]():e[o]:n[--r]}},e.utils.pjax=function(t,n){function r(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),e.utils.pjax(t,n)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},e.utils.colorLinearGradient=function(t,n,r,i,s){var o="lg_gradient_"+n,u=s.select("#"+o);return u.empty()&&(r.position==="middle"?e.utils.createLinearGradient(o,r,s,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"20%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"80%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}]):e.utils.createLinearGradient(o,r,s,[{offset:"0%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1},{offset:"50%","stop-color":d3.rgb(i).toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1}])),"url(#"+o+")"},e.utils.createLinearGradient=function(e,t,n,r){var i=t.orientation==="horizontal"?"0%":"100%",s=t.orientation==="horizontal"?"100%":"0%",o=n.append("linearGradient").attr("id",e).attr("x1","0%").attr("y1","0%").attr("x2",i).attr("y2",s).attr("spreadMethod","pad");for(var u=0;u<r.length;u+=1){var a=r[u],f=o.append("stop");for(var l in a)a.hasOwnProperty(l)&&f.attr(l,a[l])}},e.utils.colorRadialGradient=function(t,n,r,i,s){var o="rg_gradient_"+n,u=s.select("#"+o);return u.empty()&&e.utils.createRadialGradient(o,r,s,[{offset:r.s,"stop-color":d3.rgb(i).brighter().toString(),"stop-opacity":1},{offset:"100%","stop-color":d3.rgb(i).darker().toString(),"stop-opacity":1}]),"url(#"+o+")"},e.utils.createRadialGradient=function(e,t,n,r){var i=n.append("radialGradient").attr("id",e).attr("r",t.r).attr("cx",t.x).attr("cy",t.y).attr("gradientUnits",t.u).attr("spreadMethod","pad");for(var s=0;s<r.length;s+=1){var o=r[s],u=i.append("stop");for(var a in o)o.hasOwnProperty(a)&&u.attr(a,o[a])}},e.utils.getAbsoluteXY=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,s=n.left+r,o=n.top+i;return{left:s,top:o}},e.utils.roundedRectangle=function(e,t,n,r,i){return"M"+e+","+t+"h"+(n-i*2)+"a"+i+","+i+" 0 0 1 "+i+","+i+"v"+(r-2-i*2)+"a"+i+","+i+" 0 0 1 "+ -i+","+i+"h"+(i*2-n)+"a"+ -i+","+i+" 0 0 1 "+ -i+","+ -i+"v"+(-r+i*2+2)+"a"+i+","+i+" 0 0 1 "+i+","+ -i+"z"},e.utils.dropShadow=function(e,t,n){var r=n||{},i=r.height||"130%",s=r.offset||2,o=r.blur||1;if(t.select("#"+e).empty()){var u=t.append("filter").attr("id",e).attr("height",i),a=u.append("feOffset").attr("in","SourceGraphic").attr("result","offsetBlur").attr("dx",s).attr("dy",s),f=u.append("feColorMatrix").attr("in","offsetBlur").attr("result","matrixOut").attr("type","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"),l=u.append("feGaussianBlur").attr("in","matrixOut").attr("result","blurOut").attr("stdDeviation",o),c=u.append("feMerge");c.append("feMergeNode"),c.append("feMergeNode").attr("in","SourceGraphic")}return"url(#"+e+")"},e.utils.stringSetLengths=function(e,t,n){var r=[],i=t.select(".tmp-text-strings").select("text");return i.empty()&&(i=t.append("g").attr("class","tmp-text-strings").append("text")),i.style("display","inline"),e.forEach(function(e,t){i.text(e,n),r.push(i.node().getBBox().width)}),i.text("").style("display","none"),r},e.utils.maxStringSetLength=function(t,n,r){var i=e.utils.stringSetLengths(t,n,r);return d3.max(i)},e.utils.stringEllipsify=function(e,t,n){var r=t.select(".tmp-text-strings").select("text"),i=e,s=0,o=0;r.empty()&&(r=t.append("g").attr("class","tmp-text-strings").append("text")),r.style("display","inline"),r.text("..."),o=r.node().getBBox().width,r.text(i),s=r.node().getBBox().width,strLen=s;while(s>n&&s>30)i=i.slice(0,-1),r.text(i),s=r.node().getBBox().width+o;return r.text("").style("display","none"),i+(strLen>n?"...":"")},e.utils.getTextContrast=function(e,t,n){var r=e,i=d3.lab(r),s=i.l,o=s>50?i.darker(4+(s-75)/25).l:i.brighter(4+(25-s)/25).l,u=d3.lab(o,0,0),a=u.toString();return n&&n(i,u),a},e.utils.isRTLChar=function(e){var t="---",n=new RegExp("["+t+"]");return n.test(e)},e.utils.polarToCartesian=function(e,t,n,r){var i=r*Math.PI/180,s=e+n*Math.cos(i),o=t+n*Math.sin(i);return[s,o]},e.utils.getTextBBox=function(e,t){var n=e.node().getBBox();return t||(n.width=parseInt(n.width,10),n.height=parseInt(n.height,10)),n},e.models.axis=function(){function y(t){return t.each(function(t){function H(){var e=0,t=0;M.each(function(n,r){var i=this.getBoundingClientRect(),s=parseInt(i.width,10),o=parseInt(i.height/1.15,10);s>e&&(e=s),o>t&&(t=o)}),D=e,P=t}function B(t){return e.scale().rangeBand?e.scale().rangeBand()*t<D:!1}function j(t){var r=u==="rtl"?t%360>0?"end":"start":t%360>0?"start":"end",i=Math.abs(Math.sin(t*Math.PI/180));n=I()+2,n+=i?i*D:D,n+=i?i*P:0,M.attr("transform",function(n,r,i){return"translate(0,"+e.tickPadding()+") rotate("+t+")"}).attr("y","0").style("text-anchor",r)}function F(){M.selectAll("tspan").remove(),M.attr("dy",".71em").attr("y",e.tickPadding()).attr("transform","translate(0,0)").text(function(e,t){return _[t]}),H()}function I(){return e.tickPadding()+(i?m:0)}var b=d3.select(this),w=b.selectAll("g.nv-wrap.nv-axis").data([t]),E=w.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g").attr("class","nv-axis-inner"),S=w.select(".nv-axis-inner"),x=e.orient()==="left"||e.orient()==="right"?"vertical":"horizontal",T=null,N="",C=e.tickFormat(),k=typeof r.rangeExtent=="function"?r.rangeExtent()[1]:Math.abs(r.range()[0]-r.range()[1]),L={y:0,dy:0,x:0,a:"middle",t:""},A={};v!==null?e.ticks(v):(e.orient()==="top"||e.orient()==="bottom")&&e.ticks(Math.ceil(Math.abs(r.range()[1]-r.range()[0])/100)),l&&!isFinite(String(l))&&(l=30);var O=S.selectAll(".tick").data(t,function(e){return e});O.exit().remove(),S.call(e),g=g||e.scale(),C===null&&(C=g.tickFormat()),n=I();var M=S.selectAll("g.tick").select("text"),_=M[0].map(function(e,t,n){return d3.select(e).text()}),D=0,P=0;H();switch(e.orient()){case"top":i&&(L.y=-n,L.dy="-.71em",L.x=k/2),s&&(A={data:r.domain(),translate:function(e,t){return"translate("+r(e)+",0)"},dy:"0em",x:0,y:-e.tickPadding(),transform:"",anchor:l?l%360>0?"start":"end":"middle"});break;case"bottom":var q=!1,R=!1,U=!1;a&&B(1.25)&&(M.each(function(t){var n=this.textContent,r=d3.select(this),i=n.replace("/","/ ").split(" "),s=0,o=i.length,u=.71,a=e.scale().rangeBand();if(this.getBoundingClientRect().width>a){this.textContent="";do{var f,l=r.append("tspan").text(i[s]+" ").attr("dy",u+"em").attr("x","0px");s===0&&(u=1),s+=1;while(s<o){f=l.text(),l.text(f+" "+i[s]);if(!(this.getBoundingClientRect().width<=a)){l.text(f);break}s+=1}}while(s<o)}}),H(),B(1.25)?F():(q=!0,n=1)),!q&&f&&B(1.25)&&(M.text(function(e,t){return _[t]}),H(),M.attr("transform",function(e,t){return"translate(0,"+t%2*(P+2)+")"}),B(2.5)?F():(R=!0,n=P+2)),!q&&!R&&l%360&&B(1.25)?(j(l),U=!0):(N="middle",n+=I()+P),i&&(L.y=n,L.dy=".71em",L.x=k/2),c&&S.selectAll(".tick").each(function(e,n){d3.select(this).selectAll("text,line").style("opacity",n%Math.ceil(t[0].values.length/(k/100))!==0?0:1)}),s&&(A={data:[r.domain()[0],r.domain()[r.domain().length-1]],translate:function(e,t){return"translate("+(r(e)+(p?r.rangeBand()/2:e>0?-8:4))+",0)"},dy:".71em",x:0,y:e.tickPadding(),rotate:function(e){return"rotate("+l+" 0,0)"},anchor:l?l%360>0?"start":"end":"middle"});break;case"right":n+=D,i&&(L={y:h?-(n+2):-10,dy:0,x:h?k/2:e.tickPadding(),a:h?"middle":"begin",t:h?"rotate(90)":""}),s&&(A={data:r.domain(),translate:function(e,t){return"translate(0,"+r(e)+")"},dy:".32em",x:e.tickPadding(),y:0,rotate:"",anchor:u==="rtl"?"end":"start"}),d?u==="rtl"?d==="start"?N="end":d==="end"?N="start":N=d:N=d:N=u==="rtl"?"end":"start";break;case"left":n+=D+2,i&&(L={y:h?-(n+2):-10,dy:0,x:h?-k/2:-e.tickPadding(),a:h?"middle":"end",t:h?"rotate(-90)":""}),s&&(A={data:r.domain(),translate:function(e,t){return"translate(0,"+r(e)+")"},dy:".32em",x:-e.tickPadding(),y:0,rotate:"",anchor:u==="rtl"?"start":"end"}),d?u==="rtl"?d==="start"?N="end":d==="end"?N="start":N=d:N=d:N=u==="rtl"?"start":"end"}var z=S.selectAll("text.nv-axislabel").data([i]);N!==""&&S.selectAll("g.tick").each(function(e,t){d3.select(this).select("text").style("text-anchor",N)}),z.exit().remove(),z.enter().append("text").attr("class","nv-axislabel"),i&&(z.text(function(e){return e}).attr("y",L.y).attr("dy",L.dy).attr("x",L.x).attr("transform",L.t).style("text-anchor",L.a),z.each(function(t,n){T+=e.orient()==="left"||e.orient()==="right"?parseInt(this.getBoundingClientRect().width/1.15,10):parseInt(this.getBoundingClientRect().height/1.15,10)}),n+=T);if(s){var W=w.selectAll("g.nv-axisMaxMin").data(A.data);W.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),W.exit().remove(),W.attr("transform",A.translate).select("text").text(function(e,t){var n=C(e);return(""+n).match("NaN")?"":n}).attr("dy",A.dy).attr("x",A.x).attr("y",A.y).attr("transform",A.rotate).style("text-anchor",A.anchor),W.attr("transform",A.translate).select("text").style("opacity",1)}s&&(e.orient()==="left"||e.orient()==="right")&&(S.selectAll("g.tick").each(function(e,t){d3.select(this).select("text").style("opacity",1);if(r(e)>r.range()[0]-10||r(e)<r.range()[1]+10)e<1e-10&&e>-1e-10&&(d3.select(this).select("text").style("opacity",0),d3.select(this).select("line").style("opacity",0)),d3.select(this).select("text").style("opacity",0)}),r.domain()[0]===r.domain()[1]&&r.domain()[0]===0&&w.selectAll("g.nv-axisMaxMin").style("opacity",function(e,t){return t?0:1}));if(s&&(e.orient()==="top"||e.orient()==="bottom")){var X=[];w.selectAll("g.nv-axisMaxMin").each(function(e,t){try{t?X.push(r(e)-this.getBoundingClientRect().width-4):X.push(r(e)+this.getBoundingClientRect().width+4)}catch(n){t?X.push(r(e)-4):X.push(r(e)+4)}}),S.selectAll("g.tick").each(function(e,t){d3.select(this).select("text").style("opacity",1);if(r(e)<X[0]||r(e)>X[1])e<1e-10&&e>-1e-10&&(d3.select(this).select("text").style("opacity",0),d3.select(this).select("line").style("opacity",0)),d3.select(this).select("text").style("opacity",0)})}o&&S.selectAll("line.tick").filter(function(e){return!parseFloat(Math.round(e*1e5)/1e6)}).classed("zero",!0),g=r.copy(),y.labelThickness=function(){return T}}),y}var e=d3.svg.axisStatic(),t={top:0,right:0,bottom:0,left:0},n=0,r=d3.scale.linear(),i=null,s=!0,o=!0,u="ltr",a=!1,f=!1,l=0,c=!1,h=!0,p=!1,d=null,v=null,m=8;e.scale(r).orient("bottom").tickFormat(function(e){return e});var g;return y.axis=e,d3.rebind(y,e,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(y,r,"domain","range","rangeBand","rangeBands"),y.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return y},y.width=function(e){return arguments.length?(n=e,y):n},y.height=function(e){return arguments.length?(n=e,y):n},y.ticks=function(e){return arguments.length?(v=e,y):v},y.axisLabel=function(e){return arguments.length?(i=e,y):i},y.showMaxMin=function(e){return arguments.length?(s=e,y):s},y.highlightZero=function(e){return arguments.length?(o=e,y):o},y.scale=function(t){return arguments.length?(r=t,e.scale(r),p=typeof r.rangeBands=="function",d3.rebind(y,r,"domain","range","rangeBand","rangeBands"),y):r},y.wrapTicks=function(e){return arguments.length?(a=e,y):a},y.rotateTicks=function(e){return arguments.length?(l=e,y):l},y.staggerTicks=function(e){return arguments.length?(f=e,y):f},y.reduceXTicks=function(e){return arguments.length?(c=e,y):c},y.rotateYLabel=function(e){return arguments.length?(h=e,y):h},y.axisLabelDistance=function(e){return arguments.length?(m=e,y):m},y.maxTickWidth=function(e){return arguments.length?(maxTickWidth=e,y):maxTickWidth},y.textAnchor=function(e){return arguments.length?(d=e,y):d},y.direction=function(e){return arguments.length?(u=e,y):u},y},e.models.legend=function(){function A(y){return y.each(function(y){function Q(){z.style("opacity",T*.9).style("display",T?"inline":"none"),$.style("opacity",T).style("display",T?"inline":"none"),X.text(T===1?A.strings().close:A.strings().open)}var O=d3.select(this),M=n,_=r,D=[],P=0,H=0,B="",j=o==="start"?!0:!1,F=s==="rtl"?!0:!1;if(!y||!y.length||!y.filter(function(e){return!e.values||e.values.length}).length)return A;g=!0,B=!y[0].type||y[0].type==="bar"?"bar":"line",i=F?i==="left"?"right":"left":i;var I=O.selectAll("g.nv-chart-legend").data([y]),q=I.enter().append("g").attr("class","nv-chart-legend");q.append("defs").append("clipPath").attr("id","nv-edge-clip-"+b).append("rect");var R=I.select("defs"),U=I.select("#nv-edge-clip-"+b+" rect");q.append("rect").attr("class","nv-legend-background");var z=I.select(".nv-legend-background"),W=e.utils.dropShadow("legend_back_"+b,R,{blur:2});q.append("text").attr("class","nv-legend-link");var X=I.select(".nv-legend-link");q.append("g").attr("class","nv-legend-mask").append("g").attr("class","nv-legend");var V=I.select(".nv-legend-mask"),$=I.select("g.nv-legend");$.attr("transform","translate(0,0)");var J=$.selectAll(".nv-series").data(function(e){return e},function(e){return e.key}),K=J.enter().append("g").attr("class","nv-series");J.exit().remove(),U.attr("x",.5).attr("y",.5).attr("width",0).attr("height",0),z.attr("x",.5).attr("y",.5).attr("width",0).attr("height",0).style("opacity",0).style("pointer-events","all").on("click",function(e,t){d3.event.stopPropagation()}),X.text(T===1?A.strings().close:A.strings().open).attr("text-anchor",i==="left"?F?"end":"start":F?"start":"end").attr("dy",".36em").attr("dx",0).style("opacity",0).on("click",function(e,t){d3.event.preventDefault(),d3.event.stopPropagation(),x.toggleMenu(e,t)}),K.on("mouseover",function(e,t){x.legendMouseover(e,t)}).on("mouseout",function(e,t){x.legendMouseout(e,t)}).on("click",function(e,t){d3.event.preventDefault(),d3.event.stopPropagation(),x.legendClick(e,t)}),B==="bar"?(K.append("rect").attr("x",-u-2).attr("y",-u-2).attr("width",u*2+4).attr("height",u*2+4).style("fill","#FFE").style("opacity",.1),K.append("circle").attr("r",u).style("stroke-width",2),J.selectAll("circle").attr("class",function(e,t){return S(e,e.hasOwnProperty("series")?e.series:t)}).attr("fill",function(e,t){return E(e,e.hasOwnProperty("series")?e.series:t)}).attr("stroke",function(e,t){return E(e,e.hasOwnProperty("series")?e.series:t)}),K.append("text").attr("dy",j?".36em":".71em"),J.select("text").text(w)):(K.append("circle").attr("r",function(e,t){return e.type==="dash"?0:u}).style("stroke-width",2),K.append("line").attr("x0",0).attr("y0",0).attr("y1",0).style("stroke-width","4px"),K.append("circle").attr("r",function(e,t){return e.type==="dash"?0:u}).style("stroke-width",2),J.select("line").attr("class",function(e,t){return S(e,e.hasOwnProperty("series")?e.series:t)}).attr("stroke",function(e,t){return E(e,e.hasOwnProperty("series")?e.series:t)}),J.selectAll("circle").attr("class",function(e,t){return S(e,e.hasOwnProperty("series")?e.series:t)}).attr("fill",function(e,t){return E(e,e.hasOwnProperty("series")?e.series:t)}).attr("stroke",function(e,t){return E(e,e.hasOwnProperty("series")?e.series:t)}),K.append("text").attr("dy",j?".36em":".71em").attr("dx",0),J.select("text").text(w).attr("text-anchor",o)),J.classed("disabled",function(e){return e.disabled}),A.calculateWidth=function(){var e=f+(j?a+c:0);return D=[],$.style("display","inline"),J.select("text").each(function(e,t){var n=d3.select(this).node().getBBox().width;D.push(Math.max(Math.floor(n)+f,50))}),A.width(d3.sum(D)+D.length*e-f),A.width()},A.getLineHeight=function(){$.style("display","inline");var e=Math.floor(J.select("text").node().getBBox().height);return e},A.arrange=function(e){function n(e){return D[e]+f+(j?a+c:0)}D.length===0&&this.calculateWidth();var r=D.length,s=1,g=r,y=[],w=[],E=e-t.left-t.right,S=0,x=0,O=l*(j?1:.6),M=this.getLineHeight(),I=a+(j?0:M)+O,q={top:7,right:7,bottom:7,left:7},R=0,K=0,Q,G,Y;if(h){while(g>0){y=[];for(Q=0;Q<r;Q+=1)n(Q)>(y[Q%g]||0)&&(y[Q%g]=n(Q));if(d3.sum(y)-f<E)break;g-=1}g=g||1,s=Math.ceil(r/g),S=d3.sum(y)-f;for(Q=0;Q<r;Q+=1)G=Q%g,j?G===0?R=F?S:0:R+=y[G-1]*(F?-1:1):G===0?R=(F?S:0)+(y[G]-f)/2*(F?-1:1):R+=(y[G-1]+y[G])/2*(F?-1:1),K=Math.floor(Q/g)*I,w[Q]={x:R,y:K}}else if(F){R=E;for(Q=0;Q<r;Q+=1)R-n(Q)+f<0&&(S=Math.max(S,n(Q)-f),R=E,Q&&(s+=1)),R-n(Q)+f>S&&(S=R-n(Q)+f),w[Q]={x:R,y:(s-1)*(O+a)},R-=n(Q)}else{R=0;for(Q=0;Q<r;Q+=1)Q&&R+n(Q)-f>E&&(R=0,s+=1),R+n(Q)-f>S&&(S=R+n(Q)-f),w[Q]={x:R,y:(s-1)*(O+a)},R+=n(Q)}if(!d&&(p||s<=m)){T=0,v=!1,N=!1,A.width(t.left+S+t.right).height(t.top+s*I-O+t.bottom);switch(i){case"left":Y=0;break;case"center":Y=(e-A.width())/2;break;case"right":Y=0}U.attr("y",0).attr("width",A.width()).attr("height",A.height()),z.attr("x",Y).attr("width",A.width()).attr("height",A.height()).attr("rx",0).attr("ry",0).attr("filter","none").style("display","inline").style("opacity",0),V.attr("clip-path","none").attr("transform",function(e,n){var r=Y+t.left+(j?u*(F?-1:1):0),i=t.top+q.top;return"translate("+r+","+i+")"}),$.style("opacity",1).style("display","inline"),J.attr("transform",function(e,t){var n=w[t];return"translate("+n.x+","+n.y+")"}),J.selectAll("rect").attr("x",-u-f/2).attr("y",-u-O/2).attr("width",function(e,t){return D[e.series]}).attr("height",u*2+O),J.selectAll("text").attr("text-anchor",o).attr("dy",j?".36em":".71em").attr("transform",function(e,t){var n=j?(u+c)*(F?-1:1):0,r=j?0:u+3;return"translate("+n+","+r+")"}),J.selectAll("circle").attr("transform",function(e,t){var n=j||B==="bar"?0:u*3*(t?1:-1);return"translate("+n+",0)"}),J.selectAll("line").attr("x1",function(e,t){return e.type==="dash"?u*8:u*4}).attr("transform",function(e,t){var n=u*(e.type==="dash"?-4:-2);return"translate("+n+",0)"}).style("stroke-dasharray",function(e,t){return e.type==="dash"?"8, 8":"0,0"})}else v=!0,N=!0,A.width(q.left+d3.max(D)-f+a+c+q.right).height(t.top+a+t.top),P=q.top+a*r+l*(r-1)+q.bottom,H=Math.min(_-A.height(),P),U.attr("x",.5-q.top-u).attr("y",.5-q.top-u).attr("width",A.width()).attr("height",H),z.attr("x",.5).attr("y",.5+A.height()).attr("width",A.width()).attr("height",H).attr("rx",2).attr("ry",2).attr("filter",W).style("opacity",T*.9).style("display",T?"inline":"none"),X.attr("transform",function(e,n){var r=i==="left"?.5:.5+A.width(),s=t.top+u;return"translate("+r+","+s+")"}).style("opacity",1),V.attr("clip-path","url(#nv-edge-clip-"+b+")").attr("transform",function(e,t){var n=q.left+u,r=A.height()+q.top+u;return"translate("+n+","+r+")"}),$.style("opacity",T).style("display",T?"inline":"none").attr("transform",function(e,t){var n=F?d3.max(D)-f-a:0;return"translate("+n+",0)"}),J.attr("transform",function(e,t){var n=t*(a+l);return"translate(0,"+n+")"}),J.selectAll("circle").attr("transform",""),J.selectAll("line").attr("x1",16).attr("transform","translate(-8,0)").style("stroke-dasharray","inherit"),J.selectAll("text").attr("text-anchor","start").attr("dy",".36em").attr("transform",function(e,t){var n=(u+c)*(F?-1:1);return"translate("+n+",0)"});if(C){var Z=H-P,et=function(e){var t=e?tt:null,n=d3.behavior.zoom().on("zoom",t),r=d3.behavior.drag().origin(function(e){return e}).on("drag",t);z.call(n),$.call(n),z.call(r),$.call(r)},tt=function(){var e=0,t=0,n="",r=0,i=0;if(d3.event){if(d3.event.type==="zoom"&&d3.event.sourceEvent)r=d3.event.sourceEvent.deltaX||0,i=d3.event.sourceEvent.deltaY||0,e=(Math.abs(r)>Math.abs(i)?r:i)*-1;else if(d3.event.type==="drag")r=d3.event.dx||0,i=d3.event.dy||0,e=i;else if(d3.event.type!=="click")return 0;t=Math.abs(i)>Math.abs(r)?i:0}k=Math.min(Math.max(k+e,Z),-1),n="translate(0,"+k+")",(k+e>0||k+e<Z)&&L(t),$.attr("transform",n)};et(N)}},x.on("toggleMenu",function(e){d3.event.stopPropagation(),T=1-T,Q()}),x.on("closeMenu",function(e){T===1&&(T=0,Q())})}),A}var t={top:10,right:10,bottom:15,left:10},n=0,r=0,i="right",s="ltr",o="start",u=6,a=u*2,f=10,l=12,c=5,h=!0,p=!1,d=!1,v=!1,m=3,g=!1,y={close:"Hide legend",type:"Show legend"},b=Math.floor(Math.random()*1e4),w=function(e){return e.key.length>0||!isNaN(parseFloat(e.key))&&isFinite(e.key)?e.key:"undefined"},E=function(t,n){return e.utils.defaultColor()(t,n)},S=function(e,t){return""},x=d3.dispatch("legendClick","legendMouseover","legendMouseout","toggleMenu","closeMenu"),T=0,N=!1,C=!0,k=0,L=function(e){return};return A.dispatch=x,A.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,A):t},A.width=function(e){return arguments.length?(n=Math.round(e),A):n},A.height=function(e){return arguments.length?(r=Math.round(e),A):r},A.id=function(e){return arguments.length?(b=e,A):b},A.key=function(e){return arguments.length?(w=e,A):w},A.color=function(t){return arguments.length?(E=e.utils.getColor(t),A):E},A.classes=function(e){return arguments.length?(S=e,A):S},A.align=function(e){return arguments.length?(i=e,A):i},A.position=function(e){return arguments.length?(o=e,A):o},A.showAll=function(e){return arguments.length?(p=e,A):p},A.showMenu=function(e){return arguments.length?(d=e,A):d},A.collapsed=function(e){return v},A.rowsCount=function(e){return arguments.length?(m=e,A):m},A.spacing=function(e){return arguments.length?(l=e,A):l},A.gutter=function(e){return arguments.length?(f=e,A):f},A.radius=function(e){return arguments.length?(u=e,A):u},A.strings=function(e){return arguments.length?(y=e,A):y},A.equalColumns=function(e){return arguments.length?(h=e,A):h},A.enabled=function(e){return arguments.length?(g=e,A):g},A.direction=function(e){return arguments.length?(s=e,A):s},A},e.models.scroll=function(){function f(l,c,h,p){var d=l.select("defs"),v=c.select("defs"),m,g,y=h.select(".nv-x.nv-axis"),b=h.select(".nv-barsWrap"),w,E,S=0;return f.init=function(e,t){S=e,u=t,this.gradients(a),this.mask(a),this.scrollTarget(a),this.backShadows(a),this.foreShadows(a),this.assignEvents(a),this.resize(a)},f.pan=function(e){var t=0,r=0,i="",s=0,o=0;if(d3.event){if(d3.event.type==="zoom")s=d3.event.sourceEvent.deltaX||0,o=d3.event.sourceEvent.deltaY||0,t=(Math.abs(s)>Math.abs(o)?s:o)*-1;else if(d3.event.type==="drag")s=d3.event.dx||0,o=d3.event.dy||0,t=n?s:o;else if(d3.event.type!=="click")return 0;r=Math.abs(o)>Math.abs(s)?o:0}return S=Math.min(Math.max(S+t,e),-1),i="translate("+(n?S+",0":"0,"+S)+")",(S+t>0||S+t<e)&&u(r),E.attr("transform",i),b.attr("transform",i),y.select(".nv-wrap.nv-axis").attr("transform",i),S},f.assignEvents=function(e){var t=e?o:null,n=d3.behavior.zoom().on("zoom",t),r=d3.behavior.drag().origin(function(e){return e}).on("drag",t);h.call(n),g.call(n),h.call(r),g.call(r)},f.resize=function(e){if(!e)return;var o=p.labelThickness()+p.tickPadding()/2,u=n,a=u?t.left:o,f=t.top,l=r+(u?0:t[p.orient()]-o),c=i+(u?t[p.orient()]-o:0),h=u?"height":"width",d=u?c:l;m.attr("x",u?0:-t.left).attr("y",0).attr("width",r+(u?0:t.left)).attr("height",i+(u?t.bottom:0)),g.attr("x",a).attr("y",f).attr("width",l).attr("height",c),w.select(".nv-back-shadow-prev").attr("x",a).attr("y",f).attr(h,d),w.select(".nv-back-shadow-more").attr("x",a+(u?r-5:1)).attr("y",f+(u?0:i-4)).attr(h,d),E.select(".nv-fore-shadow-prev").attr("x",a+(u?1:0)).attr("y",f+(u?0:1)).attr(h,d),E.select(".nv-fore-shadow-more").attr("x",a+(u?s-20:0)).attr("y",f+(u?0:s-19)).attr(h,d)},f.gradients=function(t){v.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-back-gradient-prev-"+e);var r=v.select("#nv-back-gradient-prev-"+e);v.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-back-gradient-more-"+e);var i=v.select("#nv-back-gradient-more-"+e);v.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-fore-gradient-prev-"+e);var s=v.select("#nv-fore-gradient-prev-"+e);v.append("linearGradient").attr("class","nv-scroll-gradient").attr("id","nv-fore-gradient-more-"+e);var o=v.select("#nv-fore-gradient-more-"+e);d.selectAll(".nv-scroll-gradient").attr("gradientUnits","objectBoundingBox").attr("x1",0).attr("y1",0).attr("x2",n?1:0).attr("y2",n?0:1),r.append("stop").attr("stop-color","#000").attr("stop-opacity","0.3").attr("offset",0),r.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",1),i.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",0),i.append("stop").attr("stop-color","#000").attr("stop-opacity","0.3").attr("offset",1),s.append("stop").attr("stop-color","#FFF").attr("stop-opacity","1").attr("offset",0),s.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",1),o.append("stop").attr("stop-color","#FFF").attr("stop-opacity","0").attr("offset",0),o.append("stop").attr("stop-color","#FFF").attr("stop-opacity","1").attr("offset",1)},f.mask=function(t){v.append("clipPath").attr("class","nv-scroll-mask").attr("id","nv-edge-clip-"+e).append("rect"),m=d.select(".nv-scroll-mask rect"),h.attr("clip-path",t?"url(#nv-edge-clip-"+e+")":"")},f.scrollTarget=function(e){c.select(".nv-scroll-background").append("rect").attr("class","nv-scroll-target").attr("fill","transparent"),g=l.select(".nv-scroll-target")},f.backShadows=function(t){var r=c.select(".nv-scroll-background").append("g").attr("class","nv-back-shadow-wrap");r.append("rect").attr("class","nv-back-shadow-prev"),r.append("rect").attr("class","nv-back-shadow-more"),w=l.select(".nv-back-shadow-wrap");if(t){var i=n?"width":"height";w.select("rect.nv-back-shadow-prev").attr("fill","url(#nv-back-gradient-prev-"+e+")").attr(i,7),w.select("rect.nv-back-shadow-more").attr("fill","url(#nv-back-gradient-more-"+e+")").attr(i,7)}else w.selectAll("rect").attr("fill","transparent")},f.foreShadows=function(t){var r=c.select(".nv-scroll-background").insert("g").attr("class","nv-fore-shadow-wrap");r.append("rect").attr("class","nv-fore-shadow-prev"),r.append("rect").attr("class","nv-fore-shadow-more"),E=l.select(".nv-fore-shadow-wrap");if(t){var i=n?"width":"height";E.select("rect.nv-fore-shadow-prev").attr("fill","url(#nv-fore-gradient-prev-"+e+")").attr(i,20),E.select("rect.nv-fore-shadow-more").attr("fill","url(#nv-fore-gradient-more-"+e+")").attr(i,20)}else E.selectAll("rect").attr("fill","transparent")},f}var e,t={},n,r,i,s,o,u,a;return f.id=function(t){return arguments.length?(e=t,f):e},f.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,f):t},f.width=function(e){return arguments.length?(r=e,f):r},f.height=function(e){return arguments.length?(i=e,f):i},f.vertical=function(e){return arguments.length?(n=e,f):n},f.minDimension=function(e){return arguments.length?(s=e,f):s},f.panHandler=function(e){return arguments.length?(o=d3.functor(e),f):o},f.enable=function(e){return arguments.length?(a=e,f):a},f},e.models.scatter=function(){function I(q){return q.each(function(q){function G(){function i(e,t,n,r){return{series:q[r],point:q[r].values[n],pointIndex:n,seriesIndex:r,pos:[e.offsetX,e.offsetY],id:u,e:e}}if(!b)return!1;var e,t=d3.merge(q.map(function(e,t){return e.values.map(function(e,n){return[a(c(e,n))*(Math.random()/1e12+1),f(h(e,n))*(Math.random()/1e12+1),t,n,e]}).filter(function(e,t){return w(e[4],t)})}));if(_===!0){if(T){var s=V.select("defs").selectAll(".nv-point-clips").data([u]).enter();s.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+u);var o=V.select("#nv-points-clip-"+u).selectAll("circle").data(t);o.enter().append("circle").attr("r",N),o.exit().remove(),o.attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}),V.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+u+")")}t.length<3&&(t.push([a.range()[0]-20,f.range()[0]-20,null,null]),t.push([a.range()[1]+20,f.range()[1]+20,null,null]),t.push([a.range()[0]-20,f.range()[0]+20,null,null]),t.push([a.range()[1]+20,f.range()[1]-20,null,null]));var l=d3.geom.polygon([[-10,-10],[-10,r+10],[n+10,r+10],[n+10,-10]]),p=d3.geom.voronoi(t).map(function(e,n){return{data:l.clip(e),series:t[n][2],point:t[n][3]}}).filter(function(e){return e.series!==null}),d=V.select(".nv-point-paths").selectAll("path").data(p);d.enter().append("path").attr("class",function(e,t){return"nv-path-"+t}),d.exit().remove(),d.attr("d",function(e){return"M"+e.data.join("L")+"Z"}),d.on("click",function(e){if(F)return 0;M.elementClick(i(d3.event,e,e.point,e.series))}).on("mouseover",function(e){if(F)return 0;M.elementMouseover(i(d3.event,e,e.point,e.series))}).on("mouseout",function(e,t){if(F)return 0;M.elementMouseout(i(d3.event,e,e.point,e.series))}).on("mousemove",function(e,t){M.elementMousemove(i(d3.event,e,e.point,e.series))})}else V.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").style("pointer-events","auto").on("click",function(e,t){if(F||!q[e.series])return 0;M.elementClick(i(d3.event,e,t,e.series))}).on("mouseover",function(e,t){if(F||!q[e.series])return 0;M.elementMouseover(i(d3.event,e,t,e.series))}).on("mouseout",function(e,t){if(F||!q[e.series])return 0;M.elementMouseout(i(d3.event,e,t,e.series))}).on("mousemove",function(e,t){M.elementMousemove(i(d3.event,e,t,e.series))});F=!1}var R=n-t.left-t.right,U=r-t.top-t.bottom,W=d3.select(this);q=q.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,e}),e});var X=C&&k&&L?[]:d3.merge(q.map(function(e){return e.values.map(function(e,t){return{x:c(e,t),y:h(e,t),size:p(e,t)}})}));a.domain(C||d3.extent(X.map(function(e){return e.x}).concat(m))),E&&q[0]?S!==0?a.range([(R*S+R)/(2*q[0].values.length),R-R*(1+S)/(2*q[0].values.length)]):a.range([0+Math.sqrt(A[1]/Math.PI),R-Math.sqrt(A[1]/Math.PI)]):a.range([0,R]),f.domain(k||d3.extent(X.map(function(e){return e.y}).concat(g))).range([U,0]),D&&f.nice(),l.domain(L||d3.extent(X.map(function(e){return e.size}).concat(y))).range(A);if(a.domain()[0]===a.domain()[1]||f.domain()[0]===f.domain()[1])O=!0;a.domain()[0]===a.domain()[1]&&(a.domain()[0]?a.domain([a.domain()[0]-a.domain()[0]*.01,a.domain()[1]+a.domain()[1]*.01]):a.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+f.domain()[0]*.01,f.domain()[1]-f.domain()[1]*.01]):f.domain([-1,1])),l.domain().length<2&&l.domain([0,l.domain()]),P=P||a,H=H||f,B=B||l;var V=W.selectAll("g.nv-wrap.nv-scatter").data([q]),$=V.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+u+(O?" nv-single-point":"")),J=$.append("defs"),K=$.append("g"),Q=V.select("g");I.gradient=function(t,n){return e.utils.colorRadialGradient(t,u+"-"+n,{x:.5,y:.5,r:.5,s:0,u:"objectBoundingBox"},i(t,n),V.select("defs"))},K.append("g").attr("class","nv-groups"),K.append("g").attr("class","nv-point-paths"),V.attr("transform","translate("+t.left+","+t.top+")"),J.append("clipPath").attr("id","nv-edge-clip-"+u).append("rect"),V.select("#nv-edge-clip-"+u+" rect").attr("width",R).attr("height",U),Q.attr("clip-path",x?"url(#nv-edge-clip-"+u+")":""),F=!0;var Y=V.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});Y.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(Y.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),Y.attr("class",function(e,t){return o(e,e.series)}).attr("fill",function(e,t){return s(e,e.series)}).attr("stroke",function(e,t){return s(e,e.series)}).classed("hover",function(e){return e.hover}),d3.transition(Y).style("stroke-opacity",1).style("fill-opacity",.5);if(v){var Z=Y.selectAll("circle.nv-point").data(function(e){return e.values});Z.enter().append("circle").attr("cx",function(e,t){return P(c(e,t))}).attr("cy",function(e,t){return H(h(e,t))}).attr("r",function(e,t){return Math.sqrt(l(p(e,t))/Math.PI)}),Z.exit().remove(),d3.transition(Y.exit().selectAll("path.nv-point")).attr("cx",function(e,t){return a(c(e,t))}).attr("cy",function(e,t){return f(h(e,t))}).remove(),Z.attr("class",function(e,t){return"nv-point nv-point-"+t}),d3.transition(Z).attr("cx",function(e,t){return a(c(e,t))}).attr("cy",function(e,t){return f(h(e,t))}).attr("r",function(e,t){return Math.sqrt(l(p(e,t))/Math.PI)})}else{var Z=Y.selectAll("path.nv-point").data(function(e){return e.values});Z.enter().append("path").attr("transform",function(e,t){return"translate("+P(c(e,t))+","+H(h(e,t))+")"}).attr("d",d3.svg.symbol().type(d).size(function(e,t){return l(p(e,t))})),Z.exit().remove(),d3.transition(Y.exit().selectAll("path.nv-point")).attr("transform",function(e,t){return"translate("+a(c(e,t))+","+f(h(e,t))+")"}).remove(),Z.attr("class",function(e,t){return"nv-point nv-point-"+t}),d3.transition(Z).attr("transform",function(e,t){return"translate("+a(c(e,t))+","+f(h(e,t))+")"}).attr("d",d3.svg.symbol().type(d).size(function(e,t){return l(p(e,t))}))}clearTimeout(j),j=setTimeout(G,300),P=a.copy(),H=f.copy(),B=l.copy()}),I}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=i,o=function(e,t){return"nv-group nv-series-"+e.series},u=Math.floor(Math.random()*1e5),a=d3.scale.linear(),f=d3.scale.linear(),l=d3.scale.linear(),c=function(e){return e.x},h=function(e){return e.y},p=function(e){return e.size||1},d=function(e){return e.shape||"circle"},v=!0,m=[],g=[],y=[],b=!0,w=function(e){return!e.notActive},E=!1,S=.1,x=!1,T=!0,N=function(){return 10},C=null,k=null,L=null,A=[16,256],O=!1,M=d3.dispatch("elementClick","elementMouseover","elementMouseout","elementMousemove"),_=!0,D=!1,P,H,B,j,F=!1;return M.on("elementMouseover.point",function(e){b&&d3.select(".nv-chart-"+u+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!0)}),M.on("elementMouseout.point",function(e){b&&d3.select(".nv-chart-"+u+" .nv-series-"+e.seriesIndex+" .nv-point-"+e.pointIndex).classed("hover",!1)}),I.dispatch=M,I.color=function(e){return arguments.length?(i=e,I):i},I.fill=function(e){return arguments.length?(s=e,I):s},I.classes=function(e){return arguments.length?(o=e,I):o},I.gradient=function(e){return arguments.length?(gradient=e,I):gradient},I.x=function(e){return arguments.length?(c=d3.functor(e),I):c},I.y=function(e){return arguments.length?(h=d3.functor(e),I):h},I.size=function(e){return arguments.length?(p=d3.functor(e),I):p},I.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,I):t},I.width=function(e){return arguments.length?(n=e,I):n},I.height=function(e){return arguments.length?(r=e,I):r},I.xScale=function(e){return arguments.length?(a=e,I):a},I.yScale=function(e){return arguments.length?(f=e,I):f},I.zScale=function(e){return arguments.length?(l=e,I):l},I.xDomain=function(e){return arguments.length?(C=e,I):C},I.yDomain=function(e){return arguments.length?(k=e,I):k},I.sizeDomain=function(e){return arguments.length?(L=e,I):L},I.sizeRange=function(e){return arguments.length?(A=e,I):A},I.forceX=function(e){return arguments.length?(m=e,I):m},I.forceY=function(e){return arguments.length?(g=e,I):g},I.forceSize=function(e){return arguments.length?(y=e,I):y},I.interactive=function(e){return arguments.length?(b=e,I):b},I.pointActive=function(e){return arguments.length?(w=e,I):w},I.padData=function(e){return arguments.length?(E=e,I):E},I.padDataOuter=function(e){return arguments.length?(S=e,I):S},I.clipEdge=function(e){return arguments.length?(x=e,I):x},I.clipVoronoi=function(e){return arguments.length?(T=e,I):T},I.useVoronoi=function(e){return arguments.length?(_=e,_===!1&&(T=!1),I):_},I.clipRadius=function(e){return arguments.length?(N=e,I):N},I.shape=function(e){return arguments.length?(d=e,I):d},I.onlyCircles=function(e){return arguments.length?(v=e,I):v},I.id=function(e){return arguments.length?(u=e,I):u},I.singlePoint=function(e){return arguments.length?(O=e,I):O},I.nice=function(e){return arguments.length?(D=e,I):D},I},e.models.bubbleChart=function(){function P(s){return s.each(function(s){function H(e){if(e&&e.length)return c.selectAll(".nv-noData").remove(),!1;c.select(".nvd3.nv-wrap").remove();var i=n||parseInt(c.style("width"),10)||960,s=r||parseInt(c.style("height"),10)||400,o=c.selectAll(".nv-noData").data([P.strings().noData]);return o.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),o.attr("x",t.left+i/2).attr("y",t.top+s/2).text(function(e){return e}),!0}function B(e){function t(e){return 32-(new Date(e.getFullYear(),e.getMonth(),32)).getDate()}var n=d3.extent(d3.merge(e.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(a(e))})}))),r=d3.time.month.range(d3.time.month.floor(n[0]),d3.time.month.ceil(n[1])),i=r.map(function(e){return d3.time.day.offset(d3.time.month.floor(e),t(e)/2-1)});return i}function j(e){var t=d3.nest().key(d).entries(e),n=1e3/t.length,r=n*.25,i=[0,1],s=[0,1],o=d3.scale.linear().domain(i).range(s),u=[],a=0;return t.map(function(e,t){return e.total=0,e.values=e.values.sort(function(e,t){return t.y<e.y?-1:t.y>e.y?1:0}).map(function(t){return e.total+=t.y,t}),e.group=t,e}).sort(function(e,t){return e.total<t.total?-1:e.total>t.total?1:0}).map(function(e,t){return a+=e.total,i=d3.extent(e.values.map(function(e){return e.y})),s=[n*t+r,n*(t+1)-r],o.domain(i).range(s),e.values=e.values.map(function(t){return t.group=e.group,t.opportunity=t.y,t.y=o(t.opportunity),t}),u.push({y:d3.min(e.values.map(function(e){return e.y})),key:e.key}),e}),u}var c=d3.select(this),h=s.properties,p=s?s.data:null,m=this,g,y,w,x,k;P.container=this,P.update=function(){c.transition().call(P)};if(H(p))return P;C.disabled=p.map(function(e){return!!e.disabled}),g=d3.nest().key(v).entries(p),g=g.sort(function(e,t){return parseInt(e.key,10)<parseInt(t.key,10)?-1:parseInt(e.key,10)>parseInt(t.key,10)?1:0}).map(function(e,t){return e.series=t,e.classes=e.values[0].classes,e.color=e.values[0].color,e}),y=d3.extent(d3.merge(g.map(function(e){return e.values.map(function(e,t){return d3.time.format("%Y-%m-%d").parse(e.x)})}))),w=[d3.time.month.floor(y[0]),d3.time.day.offset(d3.time.month.ceil(y[1]),-1)],k=j(p),x=d3.extent(d3.merge(g.map(function(e){return e.values.map(function(e,t){return f(e,t)})})).concat(l)),T=A.xScale(),N=A.yScale(),O.scale(T).tickValues(B(g)),M.scale(N).ticks(k.length).tickValues(k.map(function(e,t){return k[t].y})),P.render=function(){var s=n||parseInt(c.style("width"),10)||960,a=r||parseInt(c.style("height"),10)||400,f=s-t.left-t.right,l=a-t.top-t.bottom,d=f,v=l,m={top:0,right:0,bottom:0,left:0},y=Math.sqrt(A.sizeRange()[1]/Math.PI);if(H(p))return;M.tickFormat(function(t,n){return e.utils.stringEllipsify(k[n].key,c,Math.max(f*.2,75))});var b=c.selectAll("g.nv-wrap.nv-bubbleChart").data([g]),E=b.enter().append("g").attr("class","nvd3 nv-wrap nv-bubbleChart").append("g"),S=b.select("g").attr("class","nv-chartWrap");E.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF"),S.select(".nv-background").attr("width",f+t.left+t.right).attr("height",l+t.top+t.bottom),E.append("g").attr("class","nv-titleWrap");var T=S.select(".nv-titleWrap");E.append("g").attr("class","nv-x nv-axis");var N=S.select(".nv-x.nv-axis");E.append("g").attr("class","nv-y nv-axis");var C=S.select(".nv-y.nv-axis");E.append("g").attr("class","nv-bubblesWrap");var L=S.select(".nv-bubblesWrap");E.append("g").attr("class","nv-legendWrap");var D=S.select(".nv-legendWrap");b.attr("transform","translate("+t.left+","+t.top+")");var B={width:0,height:0};T.select(".nv-title").remove(),i&&h.title&&(T.append("text").attr("class","nv-title").attr("x",u==="rtl"?f:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(h.title).attr("stroke","none").attr("fill","black"),B=e.utils.getTextBBox(S.select(".nv-title")),m.top+=B.height+12);if(o){_.id("legend_"+P.id()).strings(P.strings().legend).align("center").height(l-m.top),D.datum(g).call(_),_.arrange(f);var j=e.utils.getTextBBox(D.select(".nv-legend-link")),F=f-B.width-6,I=i&&_.collapsed()&&F>j.width?!0:!1,q=u==="rtl"||!_.collapsed()?0:f-_.width(),R=B.height;I?R=B.height-_.height()/2-j.height/2:i||(R=-_.margin().top),D.attr("transform","translate("+q+","+R+")"),m.top+=I?0:_.height()-12}v=l-m.top-m.bottom,N.call(O),m[O.orient()]+=O.height(),m.top+=y,v=l-m.top-m.bottom,C.call(M),m[M.orient()]+=M.width(),d=f-m.left-m.right,A.xDomain(w).yDomain(x).width(d).height(v).id(P.id()),L.datum(g.filter(function(e){return!e.disabled})).attr("transform","translate("+m.left+","+m.top+")").transition().duration(P.delay()).call(A),N.attr("transform","translate("+m.left+","+(O.orient()==="bottom"?v+m.top:m.top)+")").transition().call(O),M.tickSize(-d,0),C.attr("transform","translate("+(M.orient()==="left"?m.left:m.left+d)+","+m.top+")").transition().call(M)},P.render(),_.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,g.filter(function(e){return!e.disabled}).length||g.map(function(e){return e.disabled=!1,c.selectAll(".nv-series").classed("disabled",!1),e}),C.disabled=g.map(function(e){return!!e.disabled}),L.stateChange(C),c.transition().call(P.render)}),L.on("tooltipShow",function(e){S&&D(e,m.parentNode)}),L.on("tooltipHide",function(){S&&e.tooltip.cleanup()}),L.on("tooltipMove",function(t){E&&e.tooltip.position(m.parentNode,E,t.pos)}),L.on("changeState",function(e){typeof e.disabled!="undefined"&&(p.forEach(function(t,n){t.disabled=e.disabled[n]}),C.disabled=e.disabled),c.transition().call(P)}),L.on("chartClick",function(){L.tooltipHide(),_.enabled()&&_.dispatch.closeMenu()}),A.dispatch.on("elementClick",function(e){L.chartClick(),b(e)})}),P}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o=!0,u="ltr",a=function(e){return e.x},f=function(e){return e.y},l=[0],c,h,p=200,d=function(e){return e.y},v=function(e){return e.y},m=!1,g=0,y=!1,b=function(e){return},w=d3.time.format("%Y-%m-%d"),E=null,S=!0,x=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},T,N,C={},k={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},L=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),A=e.models.scatter().padData(!0).padDataOuter(0).size(function(e){return e.y}).sizeRange([256,1024]).singlePoint(!0),O=e.models.axis().orient("bottom").tickSize(0).tickPadding(4).highlightZero(!1).showMaxMin(!1).ticks(d3.time.months,1).tickFormat(function(e){return d3.time.format("%b")(new Date(e))}),M=e.models.axis().orient("left").tickPadding(7).highlightZero(!1).showMaxMin(!1),_=e.models.legend().align("center").key(function(e){return e.key+"%"}),D=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=t.point.x,u=t.point.y,a=x(t.series.key,o,u,t,P);E=e.tooltip.show([i,s],a,t.value<0?"n":"s",null,n)};return A.dispatch.on("elementMouseover.tooltip",function(e){L.tooltipShow(e)}),A.dispatch.on("elementMouseout.tooltip",function(e){L.tooltipHide(e)}),A.dispatch.on("elementMousemove.tooltip",function(e){L.tooltipMove(e)}),P.dispatch=L,P.scatter=A,P.legend=_,P.xAxis=O,P.yAxis=M,d3.rebind(P,A,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(P,A,"size","zScale","sizeDomain","forceSize","interactive","clipVoronoi","clipRadius"),d3.rebind(P,O,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),P.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){return A.gradient(e,e.series)}:i;return A.color(i),A.fill(o),A.classes(s),_.color(i),_.classes(s),P},P.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return P},P.width=function(e){return arguments.length?(n=e,P):n},P.height=function(e){return arguments.length?(r=e,P):r},P.showTitle=function(e){return arguments.length?(i=e,P):i},P.showLegend=function(e){return arguments.length?(o=e,P):o},P.tooltip=function(e){return arguments.length?(E=e,P):E},P.tooltips=function(e){return arguments.length?(S=e,P):S},P.tooltipContent=function(e){return arguments.length?(x=e,P):x},P.state=function(e){return arguments.length?(C=e,P):C},P.delay=function(e){return arguments.length?(p=e,P):p},P.bubbleClick=function(e){return arguments.length?(b=e,P):b},P.groupBy=function(e){return arguments.length?(d=e,P):d},P.filterBy=function(e){return arguments.length?(v=e,P):v},P.colorFill=function(e){return P},P.strings=function(e){if(!arguments.length)return k;for(var t in e)e.hasOwnProperty(t)&&(k[t]=e[t]);return P},P.direction=function(e){return arguments.length?(u=e,M.direction(e),_.direction(e),P):u},P},e.models.funnel=function(){function k(u){return u.each(function(u){function H(){T=it(P),N=st(),C=ot(P)}function B(){var e=rt(N,T),t=T-2*i*N,n=0,r=24;u.map(function(s,o){return s.values=s.values.map(function(s){return s.height=0,D>0&&(s.height=nt(e*s.value/D,t)),s.height<r/2?(n+=s.height-r/2,s.height=r/2):n<0&&s.height+n>r/2&&(s.height+=n,n=0),t+=2*i*s.height,s}),s}),u=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(f)(u);var o=p?[]:d3.extent(d3.merge(u.map(function(e){return e.values.map(function(e,t){return f(e,t)+e.y0})})).concat(c));s.domain(p||o).range([N,0])}function W(e,t,n){return{value:l(t,n),point:t,id:o,series:u[t.series],pos:[e.offsetX,e.offsetY],pointIndex:n,seriesIndex:t.series,e:e}}function $(){X.selectAll("text").remove(),X.append("text").text(dt).call(gt,"nv-label",.85,"11px","middle",pt),X.select(".nv-label").call(Q,v?G:Y,ut,function(e,t){gt(e,"nv-label",t,"11px","middle",pt)}),X.append("text").text(y).call(gt,"nv-value",.85,"15px","middle",pt),X.select(".nv-value").append("tspan").text(vt),X.call(yt),X.call(lt),X.classed("nv-label-side",function(e){return e.tooTall||e.tooWide})}function J(){V=X.filter(".nv-label-side"),X.selectAll("polyline").remove(),V.selectAll(".nv-label").remove(),V.append("text").text(dt).call(gt,"nv-label",.85,"11px","start","#555"),V.select(".nv-label").call(Q,v?G:Y,v?at:Z,function(e,t){gt(e,"nv-label",t,"11px","start","#555")}),V.call(yt),V.select(".nv-value").style({"font-size":"15px","text-anchor":"start",fill:"#555"}),V.call(ct);var e=0;V.reverse().each(function(t,n){if(!e){t.labelBottom=t.labelTop+t.labelHeight+M,e=t.labelBottom;return}t.labelTop=Math.max(e,t.labelTop),t.labelBottom=t.labelTop+t.labelHeight+M,e=t.labelBottom}),V.reverse(),e&&e-M>d3.max(s.range())&&(e=0,V.each(function(t,n){if(!e){t.labelBottom=d3.max(s.range())-1,t.labelTop=t.labelBottom-t.labelHeight,e=t.labelTop;return}t.labelBottom=Math.min(e,t.labelBottom),t.labelTop=t.labelBottom-t.labelHeight-M,e=t.labelTop}),e<0&&V.each(function(t,n){t.labelTop-=e,t.labelBottom-=e})),e=0,V.call(ht)}function K(){$(),J()}function Q(e,t,n,r){e.each(function(e){var i=d3.select(this);t(e,i,n,r)})}function G(e,t,n,r){var i=t.text(),s=parseFloat(t.attr("dy")),o,u=i.split(/\s+/).reverse(),a=[],f=0,l=n(e,0),c=d3.select(t.node().parentNode);t.text(null);while(o=u.pop())a.push(o),t.text(a.join(" ")),t.node().getComputedTextLength()>l&&a.length>1&&(a.pop(),t.text(a.join(" ")),a=[o],t=c.append("text"),t.text(o).call(r,++f*1.1+s))}function Y(t,n,r,i){var s=n.text(),o=parseFloat(n.attr("dy")),u=r(t);n.text(e.utils.stringEllipsify(s,A,u)).call(i,o)}function Z(e){var t=x-L/1.1,n=s(e.y0),r=n*i,o=Math.abs(e.labelBottom-n)*i*.5,u=t+r-(o+O*4);return Math.max(u,m)}function et(e,t,n){var r=s(e.y0),o=s(e.y0+e.y),u=n/2-i*r,a=n/2-i*o,f=C;return f-u+","+r*t+" "+(f-a)+","+o*t+" "+(f+a)+","+o*t+" "+(f+u)+","+r*t}function tt(e,t){var n=e.length;e.each(function(t,r,o){t.y1=0;var u=o?d3.select(e[o-1][r]).data()[0]:null,a=o<n-1?d3.select(e[o+1][r]).data()[0]:null,f=Math.round(t.labelHeight)+3.5,l=Math.round(s(t.y0)-t.labelTop)-.5,c=u?u.labelWidth-(t.labelBottom-u.labelBottom)*i:0,h=t.labelWidth,p=a&&f<l?a.labelWidth:0,d=Math.round(Math.max(c,h,p))+O,v=Math.round(at(t,P))-_-O,u="0,"+f+" "+d+","+f+" "+(d+Math.abs(f-l)*i)+","+l+" "+v+","+l;t.labelWidth=d,d3.select(this).attr("points",u)})}function nt(e,t){var n=t/i/2;return Math.abs(Math.sqrt(e/i+n*n))-n}function rt(e,t){return e*(t-e*i)}function it(e){return Math.round(Math.max(Math.min(L/1.1,x-e),40))}function st(){return Math.min(T*1.1,(T-T*i)/(2*i))}function ot(e){return T/2+e}function ut(e){var t=T,n=s(e.y0+e.y1/2);return t-n*i*2}function at(e,t){var n=Math.max((x-T)/2,t),r=s(e.y0+e.y1);return n+r*i}function ft(e){return d3.select(e).node().getBBox()}function lt(e){e.each(function(e){var t=ft(this);e.labelHeight=t.height,e.labelWidth=t.width,e.labelTop=s(e.y0+e.y/2)-e.labelHeight/2,e.labelBottom=e.labelTop+e.labelHeight+M,e.y1=e.y-e.labelHeight,e.tooWide=e.labelWidth>ut(e),e.tooTall=e.labelHeight>e.height-4})}function ct(e){e.each(function(e){var t=ft(this);e.labelHeight=t.height,e.labelWidth=t.width,e.labelTop=s(e.y0+e.y),e.labelBottom=e.labelTop+e.labelHeight+M})}function ht(e){var t=(x-T)/2,n=0;e.each(function(e){var t=s(e.y0),r=e.labelBottom>=t?1:0,o=Math.abs(e.labelBottom+O-t)*i,u=t*i,a=e.labelWidth+o+O*3-u;a>=n&&(n=a)}),n=Math.round(n*10)/10,n<=0?(_=t,P=t):n>0&&n<t?(_=t-n,P=t):(_=0,P=n)}function pt(t,n,r){var i=d3.select(this.parentNode).style("fill"),s=e.utils.getTextContrast(i,n);return s}function dt(e){return u[e.series].key}function vt(e){var t=u[e.series].count;return t?" ("+t+")":""}function mt(t){var n=e.utils.isRTLChar(t.slice(-1)),r=n?"rtl":"ltr";return"ltr"}function gt(e,t,n,r,i,s){e.attr("x",0).attr("y",0).attr("dy",n+"em").attr("class",t).attr("direction",function(){return mt(e.text())}).style("pointer-events","none").style("text-anchor",i).style("font-size",r).style("fill",s)}function yt(e){e.each(function(e){var t=d3.select(this),n=t.selectAll(".nv-label")[0].length+1,r=.85*n+"em";t.select(".nv-value").attr("dy",r)})}var x=n-t.left-t.right,L=r-t.top-t.bottom,A=d3.select(this),O=5,M=5,_=0,D=0,P=0;u.map(function(e,t){return e.values=e.values.map(function(e){return e.series=t,typeof e.value=="undefined"&&(e.value=a(e)),D+=e.value,e}),e}),H(),B();var j=A.selectAll("g.nv-wrap.nv-funnel").data([u]),F=j.enter().append("g").attr("class","nvd3 nv-wrap nv-funnel"),I=F.append("defs"),q=F.append("g"),R=j.select("g");k.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,o+"-"+n,r,b(t,n),j.select("defs"))},q.append("g").attr("class","nv-groups"),j.attr("transform","translate("+t.left+","+t.top+")"),I.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),j.select("#nv-edge-clip-"+o+" rect").attr("width",x+1).attr("height",L+1),R.attr("clip-path",h?"url(#nv-edge-clip-"+o+")":"");var U=j.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});U.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),U.attr("class",E).attr("fill",w).classed("hover",function(e){return e.hover}).classed("nv-active",function(e){return e.active==="active"}).classed("nv-inactive",function(e){return e.active==="inactive"}).style({stroke:"#FFFFFF","stroke-width":2}),U.transition().duration(g).style("stroke-opacity",1).style("fill-opacity",1),U.exit().transition().duration(g).selectAll("polygon.nv-bar").delay(function(e,t){return t*d/u[0].values.length}).attr("points",function(e){return et(e,0,T)}).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),U.exit().transition().duration(g).selectAll("g.nv-label-value").delay(function(e,t){return t*d/u[0].values.length}).attr("y",0).attr("transform","translate("+C+",0)").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();var z=U.selectAll("polygon.nv-bar").data(function(e){return e.values});z.exit().remove(),z.enter().append("polygon").attr("class","nv-bar").attr("points",function(e){return et(e,0,T)}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0);var n=W(d3.event,e,t);S.elementMouseover(n)}).on("mousemove",function(e,t){var n=W(d3.event,e,t);S.elementMousemove(n)}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),S.elementMouseout()}).on("click",function(e,t){d3.event.stopPropagation();var n=W(d3.event,e,t);S.elementClick(n)}).on("dblclick",function(e,t){d3.event.stopPropagation();var n=W(d3.event,e,t);S.elementDblClick(n)});var X=U.selectAll(".nv-label-value").data(function(e){return e.values});X.enter().append("g").attr("class","nv-label-value").attr("transform","translate("+C+",0)");var V=X.filter(".nv-label-side");K(),H(),B(),K(),H(),B(),K(),H(),z.attr("points",function(e){var t=e.active&&e.active==="active"?1.05:1;return et(e,1,T*t)}),X.attr("transform",function(e){var t=e.tooTall?0:C,n=e.tooTall?0:e.labelTop;return"translate("+t+","+n+")"}),V.attr("transform",function(e){return"translate("+_+","+e.labelTop+")"}),V.append("polyline").attr("class","nv-label-leader").style({"fill-opacity":0,stroke:"#999","stroke-width":1,"stroke-opacity":.5}),V.reverse(),V.selectAll("polyline").call(tt),V.reverse()}),k}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=.3,s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=function(e){return e.height},l=function(e){return e.value},c=[0],h=!0,p,d=0,v=!0,m=75,g=0,y=function(e){return e.label||e.value||e},b=function(t,n){return e.utils.defaultColor()(t,t.series)},w=b,E=function(e,t){return"nv-group nv-series-"+e.series},S=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),T=0,N=0,C=0;return k.dispatch=S,k.color=function(e){return arguments.length?(b=e,k):b},k.fill=function(e){return arguments.length?(w=e,k):w},k.classes=function(e){return arguments.length?(E=e,k):E},k.gradient=function(e){return arguments.length?(gradient=e,k):gradient},k.x=function(e){return arguments.length?(u=e,k):u},k.y=function(e){return arguments.length?(a=e,k):a},k.margin=function(e){return arguments.length?(t=e,k):t},k.width=function(e){return arguments.length?(n=e,k):n},k.height=function(e){return arguments.length?(r=e,k):r},k.xScale=function(e){return arguments.length?(x=e,k):x},k.yScale=function(e){return arguments.length?(s=e,k):s},k.yDomain=function(e){return arguments.length?(p=e,k):p},k.forceY=function(e){return arguments.length?(c=e,k):c},k.id=function(e){return arguments.length?(o=e,k):o},k.delay=function(e){return arguments.length?(d=e,k):d},k.clipEdge=function(e){return arguments.length?(h=e,k):h},k.fmtValueLabel=function(e){return arguments.length?(y=d3.functor(e),k):y},k.wrapLabels=function(e){return arguments.length?(v=e,k):v},k.minLabelWidth=function(e){return arguments.length?(m=e,k):m},k},e.models.funnelChart=function(){function E(f){return f.each(function(f){function K(e,t){var n=[[0]],r=t.filter(function(e){return!e.disabled}).map(function(e){return e.values.map(function(e,t){return e.y0+e.y})}),i=d3.merge(n.concat(r));return y.domain(i).range(i.map(function(e){return c(e)})),i}function Q(){S.select(".nvd3.nv-wrap").remove();var e=S.selectAll(".nv-noData").data([E.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),e.attr("x",t.left+T/2).attr("y",t.top+N/2).text(function(e){return e})}var l=f.properties,d=f.data,S=d3.select(this),x=this,T=(n||parseInt(S.style("width"),10)||960)-t.left-t.right,N=(r||parseInt(S.style("height"),10)||400)-t.top-t.bottom,C=T,k=N,L={top:0,right:0,bottom:0,left:0},A=30;E.update=function(){S.transition().duration(h).call(E)},E.dataSeriesActivate=function(e){var t=e.series;t.active=!t.active||t.active==="inactive"?"active":"inactive",t.values[0].active=t.active,t.active==="active"&&d.filter(function(e){return e.active!=="active"}).map(function(e){return e.values[0].active="inactive",e.active="inactive",e}),d.filter(function(e){return e.active==="active"}).length||d.map(function(e){return e.active="",e.values[0].active="",S.selectAll(".nv-series").classed("nv-inactive",!1),e}),S.call(E)},E.container=this;if(!d||!d.length||!d.filter(function(e){return e.values.length}).length)return Q(),E;d.map(function(e,t){return e.series=t,e.values.map(function(t){t.series=e.series}),e.total=d3.sum(e.values,function(e,t){return m.y()(e,t)}),e.total||(e.disabled=!0),e});var O=d.filter(function(e,t){return!e.disabled});O.length||(O=[{values:[]}]);var M=d3.sum(O,function(e){return e.total}),_=d3.sum(O,function(e){return e.count});p.disabled=d.map(function(e){return!!e.disabled}),c=m.yScale();if(!M)return Q(),E;S.selectAll(".nv-noData").remove();var D=S.selectAll("g.nv-wrap.nv-funnelChart").data([O]),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-funnelChart").append("g"),H=D.select("g").attr("class","nv-chartWrap");P.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF"),H.select(".nv-background").attr("width",T+t.left+t.right).attr("height",N+t.top+t.bottom),P.append("g").attr("class","nv-titleWrap");var B=H.select(".nv-titleWrap");P.append("g").attr("class","nv-funnelWrap");var j=H.select(".nv-funnelWrap");P.append("g").attr("class","nv-legendWrap");var F=H.select(".nv-legendWrap");D.attr("transform","translate("+t.left+","+t.top+")");var I={width:0,height:0};B.select(".nv-title").remove(),i&&l.title&&(B.append("text").attr("class","nv-title").attr("x",o==="rtl"?T:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(l.title).attr("stroke","none").attr("fill","black"),I=e.utils.getTextBBox(H.select(".nv-title")),L.top+=I.height+12);if(s){g.id("legend_"+E.id()).strings(E.strings().legend).align("center").height(N-L.top),F.datum(d).call(g),g.arrange(T);var q=e.utils.getTextBBox(F.select(".nv-legend-link")),R=T-I.width-6,U=i&&g.collapsed()&&R>q.width?!0:!1,z=o==="rtl"||!g.collapsed()?0:T-g.width(),W=I.height;U?W=I.height-g.height()/2-q.height/2:i||(W=-g.margin().top),F.attr("transform","translate("+z+","+W+")");var X=T-N/1.1,V=Math.min(X-m.minLabelWidth(),X/2),$=g.collapsed()&&V>q.width+10;L.top+=$||U?0:g.height()-12}k=N-L.top-L.bottom,m.width(C).height(k),j.datum(O).attr("transform","translate("+L.left+","+L.top+")").call(m);var J=K(y,O);g.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,d.filter(function(e){return!e.disabled}).length||d.map(function(e){return e.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),e}),p.disabled=d.map(function(e){return!!e.disabled}),v.stateChange(p),S.transition().duration(h).call(E)}),v.on("tooltipShow",function(e){a&&b(e,x.parentNode,l)}),v.on("tooltipMove",function(t){u&&e.tooltip.position(x.parentNode,u,t.pos)}),v.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),v.on("changeState",function(e){typeof e.disabled!="undefined"&&(O.forEach(function(t,n){t.disabled=e.disabled[n]}),p.disabled=e.disabled),S.transition().duration(h).call(E)}),v.on("chartClick",function(){v.tooltipHide(),g.enabled()&&g.dispatch.closeMenu()}),m.dispatch.on("elementClick",function(e){v.chartClick(),a&&b(e,x.parentNode,l),w(d,e,E)})}),E}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!0,o="ltr",u=null,a=!0,f=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},l,c,h=0,p={},d={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},v=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),m=e.models.funnel(),g=e.models.legend().align("center"),y=d3.scale.linear(),b=function(t,n,r){var i=0;r.total>0&&(i=(t.point.value*100/r.total).toFixed(1));var s=t.pos[0],o=t.pos[1],a=i,l=t.point.value,c=f(t.series.key,a,l,t,E);u=e.tooltip.show([s,o],c,t.value<0?"n":"s",null,n)},w=function(e,t,n){return};return m.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)}),m.dispatch.on("elementMousemove.tooltip",function(e){v.tooltipMove(e)}),m.dispatch.on("elementMouseout.tooltip",function(){v.tooltipHide()}),E.dispatch=v,E.funnel=m,E.legend=g,d3.rebind(E,m,"id","x","y","xDomain","yDomain","forceX","forceY","color","fill","classes","gradient"),d3.rebind(E,m,"fmtValueLabel","clipEdge","delay","wrapLabels","minLabelWidth"),E.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){var n={orientation:r.orientation||"vertical",position:r.position||"middle"};return m.gradient(e,e.series,n)}:i;return m.color(i),m.fill(o),m.classes(s),g.color(i),g.classes(s),E},E.x=function(e){return arguments.length?(getX=e,funnelWrap.x(e),E):getX},E.y=function(e){return arguments.length?(getY=e,m.y(e),E):getY},E.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return E},E.width=function(e){return arguments.length?(n=e,E):n},E.height=function(e){return arguments.length?(r=e,E):r},E.showTitle=function(e){return arguments.length?(i=e,E):i},E.showLegend=function(e){return arguments.length?(s=e,E):s},E.tooltip=function(e){return arguments.length?(u=e,E):u},E.tooltips=function(e){return arguments.length?(a=e,E):a},E.tooltipContent=function(e){return arguments.length?(f=e,E):f},E.state=function(e){return arguments.length?(p=e,E):p},E.strings=function(e){if(!arguments.length)return d;for(var t in e)e.hasOwnProperty(t)&&(d[t]=e[t]);return E},E.seriesClick=function(e){return arguments.length?(w=e,E):w},E.direction=function(e){return arguments.length?(o=e,g.direction(e),E):o},E},e.models.gauge=function(){function k(i){return i.each(function(i){function J(e){V.transition().duration(N).ease("elastic").attr("transform","rotate("+Q(e)+")")}function K(e){return e*Math.PI/180}function Q(e){return x+O(e)*A}function G(){return"translate("+b+","+b+")"}var s=i.properties,o=i.data,u=n-t.left-t.right,c=r-t.top-t.bottom,b=Math.min(u/2,c)/((100+C)/100),L=d3.select(this),A=T-x,O=d3.scale.linear().range([0,1]).domain([E,S]),M=0,_=o.map(function(e,t){var n={key:e.key,series:e.series,y0:M,y1:e.y,color:e.color,classes:e.classes};return M=e.y,n}),D=[0].concat(o.map(function(e){return e.y})),P=function(e){return e*b/100},H=s.values[0].t,B=L.selectAll("g.nv-wrap.nv-gauge").data([o]),j=B.enter().append("g").attr("class","nvd3 nv-wrap nv-gauge"),F=j.append("defs"),I=j.append("g"),q=B.select("g");k.gradient=function(t,n){return e.utils.colorRadialGradient(t,a+"-"+n,{x:0,y:0,r:b,s:g/100,u:"userSpaceOnUse"},p(t,n),B.select("defs"))},I.append("g").attr("class","nv-arc-group"),I.append("g").attr("class","nv-labels"),I.append("g").attr("class","nv-pointer"),I.append("g").attr("class","nv-odometer"),B.attr("transform","translate("+(t.left/2+t.right/2+P(C))+","+(t.top+P(C))+")");var R=d3.svg.arc().innerRadius(P(g)).outerRadius(b).startAngle(function(e,t){return K(Q(e.y0))}).endAngle(function(e,t){return K(Q(e.y1))}),U=q.select(".nv-arc-group").attr("transform",G);U.selectAll(".nv-arc-path").data(_).enter().append("path").attr("class","nv-arc-path").attr("stroke","#ffffff").attr("stroke-width",3).attr("d",R).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),m.elementMouseover({point:e,pointIndex:t,pos:[d3.event.offsetX,d3.event.offsetY],id:a})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),m.elementMouseout({point:e,index:t,id:a})}).on("mousemove",function(e,t){m.elementMousemove({point:e,pointIndex:t,pos:[d3.event.offsetX,d3.event.offsetY],id:a})}).on("click",function(e,t){m.elementClick({point:e,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}).on("dblclick",function(e,t){m.elementDblClick({point:e,index:t,pos:d3.event,id:a}),d3.event.stopPropagation()}),U.selectAll(".nv-arc-path").transition().duration(10).attr("class",v).attr("fill",d).attr("d",R);var z=q.select(".nv-labels").attr("transform",G);z.selectAll("text").transition().duration(0).attr("transform",function(e){return"rotate("+Q(e)+") translate(0,"+(-b-P(1.5))+")"}).style("font-size",P(.6)+"em"),z.selectAll("text").data(D).enter().append("text").attr("transform",function(e){return"rotate("+Q(e)+") translate(0,"+(-b-P(1.5))+")"}).text(f).style("text-anchor","middle").style("font-size",P(.6)+"em");if(h){var W=[[Math.round(P(y)/2),0],[0,-Math.round(P(w))],[-Math.round(P(y)/2),0],[0,Math.round(P(y))],[Math.round(P(y)/2),0]],X=q.select(".nv-pointer").attr("transform",G);X.selectAll("path").transition().duration(120).attr("d",d3.svg.line().interpolate("monotone"));var V=X.selectAll("path").data([W]).enter().append("path").attr("d",d3.svg.line().interpolate("monotone")).attr("transform","rotate("+x+")");J(H),q.selectAll(".nv-odom").remove(),q.select(".nv-odomText").transition().duration(0).style("font-size",P(.7)+"em"),q.select(".nv-odometer").append("text").attr("class","nv-odom nv-odomText").attr("x",0).attr("y",0).attr("text-anchor","middle").text(l(H)).style("stroke","none").style("fill","black").style("font-size",P(.7)+"em");var $=q.select(".nv-odomText").node().getBBox();q.select(".nv-odometer").insert("path",".nv-odomText").attr("class","nv-odom nv-odomBox").attr("d",e.utils.roundedRectangle(-$.width/2,-$.height+P(1.5),$.width+P(4),$.height+P(2),P(2))).attr("fill","#eeffff").attr("stroke","black").attr("stroke-width","2px").attr("opacity",.8),q.select(".nv-odometer").attr("transform","translate("+b+","+(t.top+P(70)+$.width)+")")}else q.select(".nv-odometer").select(".nv-odomText").remove(),q.select(".nv-odometer").select(".nv-odomBox").remove(),q.select(".nv-pointer").selectAll("path").remove();k.setGaugePointer=J}),k}var t={top:0,right:0,bottom:0,left:0},n=null,r=null,i=!0,s=function(e){return e.values},o=function(e){return e.key},u=function(e){return e.y},a=Math.floor(Math.random()*1e4),f=d3.format(",g"),l=d3.format(",.f"),c=!0,h=!0,p=function(t,n){return e.utils.defaultColor()(t,t.series)},d=p,v=function(e,t){return"nv-arc-path nv-series-"+e.series},m=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),g=50,y=5,b=5,w=90,E=0,S=10,x=-90,T=90,N=750,C=10;return k.dispatch=m,k.color=function(e){return arguments.length?(p=e,k):p},k.fill=function(e){return arguments.length?(d=e,k):d},k.classes=function(e){return arguments.length?(v=e,k):v},k.gradient=function(e){return arguments.length?(gradient=e,k):gradient},k.margin=function(e){return arguments.length?(t=e,k):t},k.width=function(e){return arguments.length?(n=e,k):n},k.height=function(e){return arguments.length?(r=e,k):r},k.values=function(e){return arguments.length?(s=e,k):s},k.x=function(e){return arguments.length?(o=e,k):o},k.y=function(e){return arguments.length?(u=d3.functor(e),k):u},k.showLabels=function(e){return arguments.length?(c=e,k):c},k.id=function(e){return arguments.length?(a=e,k):a},k.valueFormat=function(e){return arguments.length?(l=e,k):l},k.labelThreshold=function(e){return arguments.length?(labelThreshold=e,k):labelThreshold},k.ringWidth=function(e){return arguments.length?(g=e,k):g},k.pointerWidth=function(e){return arguments.length?(y=e,k):y},k.pointerTailLength=function(e){return arguments.length?(b=e,k):b},k.pointerHeadLength=function(e){return arguments.length?(w=e,k):w},k.minValue=function(e){return arguments.length?(E=e,k):E},k.maxValue=function(e){return arguments.length?(S=e,k):S},k.minAngle=function(e){return arguments.length?(x=e,k):x},k.maxAngle=function(e){return arguments.length?(T=e,k):T},k.transitionMs=function(e){return arguments.length?(N=e,k):N},k.labelFormat=function(e){return arguments.length?(f=e,k):f},k.labelInset=function(e){return arguments.length?(C=e,k):C},k.setPointer=function(e){return arguments.length?(k.setGaugePointer(e),k):k.setGaugePointer},k.isRendered=function(e){return svg!==undefined},k.showPointer=function(e){return arguments.length?(h=e,k):h},k},e.models.gaugeChart=function(){function g(f){return f.each(function(f){var l=f.properties,c=f.data,h=d3.select(this),y=this,b=(n||parseInt(h.style("width"),10)||960)-t.left-t.right,w=(r||parseInt(h.style("height"),10)||400)-t.top-t.bottom,E=b,S=w,x={top:0,right:0,bottom:0,left:0};g.update=function(){h.transition().call(g)},g.container=this;if(!c||!c.length){var T=h.selectAll(".nv-noData").data([g.strings().noData]);return T.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),T.attr("x",t.left+b/2).attr("y",t.top+w/2).text(function(e){return e}),g}h.selectAll(".nv-noData").remove(),c.map(function(e,t){e.series=t});var N=h.selectAll("g.nv-wrap.nv-gaugeChart").data([c]),C=N.enter().append("g").attr("class","nvd3 nv-wrap nv-gaugeChart").append("g"),k=N.select("g").attr("class","nv-chartWrap");C.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF"),k.select(".nv-background").attr("width",b+t.left+t.right).attr("height",w+t.top+t.bottom),C.append("g").attr("class","nv-titleWrap");var L=k.select(".nv-titleWrap");C.append("g").attr("class","nv-gaugeWrap");var A=k.select(".nv-gaugeWrap");C.append("g").attr("class","nv-legendWrap");var O=k.select(".nv-legendWrap");N.attr("transform","translate("+t.left+","+t.top+")");var M={width:0,height:0};L.select(".nv-title").remove(),i&&l.title&&(L.append("text").attr("class","nv-title").attr("x",o==="rtl"?b:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(l.title).attr("stroke","none").attr("fill","black"),M=e.utils.getTextBBox(k.select(".nv-title")),x.top+=M.height+12);var _={width:0,height:0};if(s){v.id("legend_"+g.id()).strings(g.strings().legend).align("center").height(w-x.top),O.datum(c).call(v),v.arrange(b);var _=e.utils.getTextBBox(O.select(".nv-legend-link")),D=b-M.width-6,P=i&&v.collapsed()&&D>_.width?!0:!1,H=o==="rtl"||!v.collapsed()?0:b-v.width(),B=M.height;P?B=M.height-v.height()/2-_.height/2:i||(B=-v.margin().top),O.attr("transform","translate("+H+","+B+")"),x.top+=P?0:v.height()-12}S=w-x.top-x.bottom,d.width(E).height(S),A.datum(f).attr("transform","translate("+x.left+","+x.top+")").transition().call(d),p.on("tooltipShow",function(e){a&&m(e,y.parentNode)}),p.on("tooltipMove",function(t){u&&e.tooltip.position(y.parentNode,u,t.pos)}),p.on("tooltipHide",function(){a&&e.tooltip.cleanup()}),p.on("chartClick",function(){v.enabled()&&v.dispatch.closeMenu()})}),g}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!0,o="ltr",u=null,a=!0,f=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+t+"</p>"},l,c,h={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},p=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove"),d=e.models.gauge(),v=e.models.legend().align("center"),m=function(t,n){var r=t.pos[0],i=t.pos[1],s=d.valueFormat()(t.point.y1-t.point.y0),o=f(t.point.key,s,t,g);u=e.tooltip.show([r,i],o,null,null,n)};return d.dispatch.on("elementMouseover.tooltip",function(e){p.tooltipShow(e)}),d.dispatch.on("elementMousemove.tooltip",function(e){p.tooltipMove(e)}),d.dispatch.on("elementMouseout.tooltip",function(){p.tooltipHide()}),g.dispatch=p,g.gauge=d,g.legend=v,d3.rebind(g,d,"id","x","y","color","fill","classes","gradient"),d3.rebind(g,d,"valueFormat","values","showLabels","showPointer","setPointer","ringWidth","labelThreshold","maxValue","minValue","transitionMs"),g.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-arc-path nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-arc-path nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-arc-path nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){return d.gradient(e,e.series)}:i;return d.color(i),d.fill(o),d.classes(s),v.color(i),v.classes(s),g},g.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return g},g.width=function(e){return arguments.length?(n=e,g):n},g.height=function(e){return arguments.length?(r=e,g):r},g.showTitle=function(e){return arguments.length?(i=e,g):i},g.showLegend=function(e){return arguments.length?(s=e,g):s},g.tooltip=function(e){return arguments.length?(u=e,g):u},g.tooltips=function(e){return arguments.length?(a=e,g):a},g.tooltipContent=function(e){return arguments.length?(f=e,g):f},g.strings=function(e){if(!arguments.length)return h;for(var t in e)e.hasOwnProperty(t)&&(h[t]=e[t]);return g},g.direction=function(e){return arguments.length?(o=e,v.direction(e),g):o},g},e.models.line=function(){function b(h){return h.each(function(h){var v=r-n.left-n.right,w=i-n.top-n.bottom,E=d3.select(this);l=t.xScale(),c=t.yScale(),g=g||l,y=y||c;var S=E.selectAll("g.nv-wrap.nv-line").data([h]),T=S.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),N=T.append("defs"),C=T.append("g"),k=S.select("g");b.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,b.id()+"-"+n,r,d(t,n),S.select("defs"))},C.append("g").attr("class","nv-groups"),C.append("g").attr("class","nv-scatterWrap"),S.attr("transform","translate("+n.left+","+n.top+")"),t.width(v).height(w);var L=S.select(".nv-scatterWrap");d3.transition(L).call(t),N.append("clipPath").attr("id","nv-edge-clip-"+t.id()).append("rect"),S.select("#nv-edge-clip-"+t.id()+" rect").attr("width",v).attr("height",w),k.attr("clip-path",f?"url(#nv-edge-clip-"+t.id()+")":""),L.attr("clip-path",f?"url(#nv-edge-clip-"+t.id()+")":"");var A=S.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});A.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),d3.transition(A.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),A.classed("hover",function(e){return e.hover}).attr("class",m).attr("fill",d).attr("stroke",d),d3.transition(A).style("stroke-opacity",1).style("fill-opacity",.5);var O=A.selectAll("path.nv-area").data(function(e){return a(e)?[e]:[]});O.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y0(function(e,t){return y(o(e,t))}).y1(function(e,t){return y(c.domain()[0]<=0?c.domain()[1]>=0?0:c.domain()[1]:c.domain()[0])}).apply(this,[e.values])}),O.exit().remove(),d3.transition(A.exit().selectAll("path.nv-area")).attr("d",function(e){return d3.svg.area().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y0(function(e,t){return y(o(e,t))}).y1(function(e,t){return y(c.domain()[0]<=0?c.domain()[1]>=0?0:c.domain()[1]:c.domain()[0])}).apply(this,[e.values])}),d3.transition(O).attr("d",function(e){return d3.svg.area().interpolate(p).defined(u).x(function(e,t){return l(s(e,t))}).y0(function(e,t){return c(o(e,t))}).y1(function(e,t){return y(c.domain()[0]<=0?c.domain()[1]>=0?0:c.domain()[1]:c.domain()[0])}).apply(this,[e.values])});var M=A.selectAll("path.nv-line").data(function(e){return[e.values]});M.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y(function(e,t){return y(o(e,t))})),d3.transition(A.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(p).defined(u).x(function(e,t){return g(s(e,t))}).y(function(e,t){return y(o(e,t))})),d3.transition(M).attr("d",d3.svg.line().interpolate(p).defined(u).x(function(e,t){return l(s(e,t))}).y(function(e,t){return c(o(e,t))})),g=l.copy(),y=c.copy()}),b}var t=e.models.scatter(),n={top:0,right:0,bottom:0,left:0},r=960,i=500,s=function(e){return e.x},o=function(e){return e.y},u=function(e,t){return!isNaN(o(e,t))&&o(e,t)!==null},a=function(e){return e&&e.area||!1},f=!1,l,c,h=200,p="linear",d=function(t,n){return e.utils.defaultColor()(t,t.series)},v=d,m=function(e,t){return"nv-group nv-series-"+e.series};t.size(16).sizeDomain([16,256]);var g,y;return b.dispatch=t.dispatch,b.scatter=t,d3.rebind(b,t,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","useVoronoi","clipVoronoi","clipRadius","padData","nice"),b.color=function(e){return arguments.length?(d=e,t.color(d),b):d},b.fill=function(e){return arguments.length?(v=e,t.fill(v),b):v},b.classes=function(e){return arguments.length?(m=e,t.classes(m),b):m},b.gradient=function(e){return arguments.length?(gradient=e,b):gradient},b.margin=function(e){return arguments.length?(n.top=typeof e.top!="undefined"?e.top:n.top,n.right=typeof e.right!="undefined"?e.right:n.right,n.bottom=typeof e.bottom!="undefined"?e.bottom:n.bottom,n.left=typeof e.left!="undefined"?e.left:n.left,b):n},b.width=function(e){return arguments.length?(r=e,b):r},b.height=function(e){return arguments.length?(i=e,b):i},b.x=function(e){return arguments.length?(s=e,t.x(e),b):s},b.y=function(e){return arguments.length?(o=e,t.y(e),b):o},b.delay=function(e){return arguments.length?(h=e,b):h},b.clipEdge=function(e){return arguments.length?(f=e,b):f},b.interpolate=function(e){return arguments.length?(p=e,b):p},b.defined=function(e){return arguments.length?(u=e,b):u},b.isArea=function(e){return arguments.length?(a=d3.functor(e),b):a},b},e.models.lineChart=function(){function S(l){return l.each(function(l){function tt(){N.select(".nvd3.nv-wrap").remove();var e=N.selectAll(".nv-noData").data([S.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),e.attr("x",t.left+k/2).attr("y",t.top+L/2).text(function(e){return e})}var d=l.properties,T=l.data,N=d3.select(this),C=this,k=(n||parseInt(N.style("width"),10)||960)-t.left-t.right,L=(r||parseInt(N.style("height"),10)||400)-t.top-t.bottom,A=k,O=L,M={top:0,right:0,bottom:0,left:0},_=0,D=0,P=0,H=0,B=0;S.update=function(){N.transition().duration(S.delay()).call(S)},S.container=this;if(!T||!T.length||!T.filter(function(e){return e.values.length}).length)return tt(),S;T.map(function(e,t){e.series=t,e.total=d3.sum(e.values,function(e,t){return m.y()(e,t)}),e.total||(e.disabled=!0)});var j=T.filter(function(e){return!e.disabled});j=j.length?j:[{values:[]}];var F=d3.sum(j,function(e){return e.total});p.disabled=T.map(function(e){return!!e.disabled}),p.interpolate=m.interpolate(),p.isArea=!m.isArea();var I=[{key:"Linear",disabled:m.interpolate()!=="linear"},{key:"Basis",disabled:m.interpolate()!=="basis"},{key:"Monotone",disabled:m.interpolate()!=="monotone"},{key:"Cardinal",disabled:m.interpolate()!=="cardinal"},{key:"Line",disabled:m.isArea()()===!0},{key:"Area",disabled:m.isArea()()===!1}];c=m.xScale(),h=m.yScale(),g.scale(c),y.scale(h);if(!F)return tt(),S;N.selectAll(".nv-noData").remove();var q=N.selectAll("g.nv-wrap.nv-lineChart").data([T]),R=q.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),U=q.select("g").attr("class","nv-chartWrap");R.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF"),U.select(".nv-background").attr("width",k+t.left+t.right).attr("height",L+t.top+t.bottom),R.append("g").attr("class","nv-titleWrap");var z=U.select(".nv-titleWrap");R.append("g").attr("class","nv-x nv-axis");var W=U.select(".nv-x.nv-axis");R.append("g").attr("class","nv-y nv-axis");var X=U.select(".nv-y.nv-axis");R.append("g").attr("class","nv-linesWrap");var V=U.select(".nv-linesWrap");R.append("g").attr("class","nv-controlsWrap");var $=U.select(".nv-controlsWrap");R.append("g").attr("class","nv-legendWrap");var J=U.select(".nv-legendWrap");q.attr("transform","translate("+t.left+","+t.top+")");var K={width:0,height:0};z.select(".nv-title").remove(),i&&d.title&&(z.append("text").attr("class","nv-title").attr("x",u==="rtl"?k:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(d.title).attr("stroke","none").attr("fill","black"),K=e.utils.getTextBBox(U.select(".nv-title")),M.top+=K.height+12),s&&(w.id("controls_"+S.id()).strings(S.strings().controls).align("left").height(L-M.top),$.datum(I).call(w),_=w.calculateWidth()),o&&(b.id("legend_"+S.id()).strings(S.strings().legend).align("right").height(L-M.top),J.datum(T).call(b),D=b.calculateWidth()),P=k/(_+D),_=Math.floor(_*P),D=Math.floor(D*P),s&&(w.arrange(_),D=k-w.width()),o&&(b.arrange(D),_=k-b.width());if(s){var Q=u==="rtl"?k-w.width():0,G=i?K.height:-b.margin().top;$.attr("transform","translate("+Q+","+G+")"),H=w.height()}if(o){var Y=e.utils.getTextBBox(J.select(".nv-legend-link")),Z=k-K.width-6,et=i&&!s&&b.collapsed()&&Z>Y.width?!0:!1,Q=u==="rtl"?0:k-b.width(),G=K.height;et?G=K.height-b.height()/2-Y.height/2:i||(G=-b.margin().top),J.attr("transform","translate("+Q+","+G+")"),B=et?0:b.height()-12}M.top+=Math.max(H,B),O=L-M.top-M.bottom,m.width(A).height(O).id(S.id()),V.datum(j).call(m),W.call(g),M[g.orient()]+=g.height(),O=L-M.top-M.bottom,X.call(y),M[y.orient()]+=y.width(),A=k-M.left-M.right,m.width(A).height(O),V.attr("transform","translate("+M.left+","+M.top+")").transition().duration(S.delay()).call(m),g.ticks(A/100).tickSize(-O,0),W.attr("transform","translate("+M.left+","+(g.orient()==="bottom"?O+M.top:M.top)+")").transition().call(g),y.ticks(O/36).tickSize(-A,0),X.attr("transform","translate("+(y.orient()==="left"?M.left:M.left+A)+","+M.top+")").transition().call(y),b.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,T.filter(function(e){return!e.disabled}).length||T.map(function(e){return e.disabled=!1,U.selectAll(".nv-series").classed("disabled",!1),e}),p.disabled=T.map(function(e){return!!e.disabled}),v.stateChange(p),N.transition().duration(S.delay()).call(S)}),w.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;I=I.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Basis":m.interpolate("basis");break;case"Linear":m.interpolate("linear");break;case"Monotone":m.interpolate("monotone");break;case"Cardinal":m.interpolate("cardinal");break;case"Line":m.isArea(!1);break;case"Area":m.isArea(!0)}p.interpolate=m.interpolate(),p.isArea=m.isArea(),v.stateChange(p),N.transition().duration(S.delay()).call(S)}),v.on("tooltipShow",function(e){f&&E(e,C.parentNode)}),v.on("tooltipMove",function(t){a&&e.tooltip.position(C.parentNode,a,t.pos,"s")}),v.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),v.on("changeState",function(e){typeof e.disabled!="undefined"&&(T.forEach(function(t,n){t.disabled=e.disabled[n]}),p.disabled=e.disabled),typeof e.interpolate!="undefined"&&(m.interpolate(e.interpolate),p.interpolate=e.interpolate),typeof e.isArea!="undefined"&&(m.isArea(e.isArea),p.isArea=e.isArea),N.transition().duration(S.delay()).call(S)}),v.on("chartClick",function(){v.tooltipHide(),w.enabled()&&w.dispatch.closeMenu(),b.enabled()&&b.dispatch.closeMenu()})}),S}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!1,o=!0,u="ltr",a=null,f=!0,l=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},c,h,p={},d={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},v=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),m=e.models.line().clipEdge(!0),g=e.models.axis().orient("bottom").tickPadding(4).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),y=e.models.axis().orient("left").tickPadding(4).tickFormat(d3.format("s")),b=e.models.legend().align("right"),w=e.models.legend().align("left").color(["#444"]),E=function(t,n){var r=t.pos[0],i=t.pos[1],s=g.tickFormat()(m.x()(t.point,t.pointIndex)),o=y.tickFormat()(m.y()(t.point,t.pointIndex)),u=l(t.series.key,s,o,t,S);a=e.tooltip.show([r,i],u,null,null,n)};return m.dispatch.on("elementMouseover.tooltip",function(e){v.tooltipShow(e)}),m.dispatch.on("elementMousemove.tooltip",function(e){v.tooltipMove(e)}),m.dispatch.on("elementMouseout.tooltip",function(){v.tooltipHide()}),S.dispatch=v,S.lines=m,S.legend=b,S.controls=w,S.xAxis=g,S.yAxis=y,d3.rebind(S,m,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(S,m,"defined","isArea","interpolate","size","clipVoronoi","useVoronoi","interactive","nice"),d3.rebind(S,g,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),S.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n+" nv-stroke"+n};break;case"data":i=function(t,n){return t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){var n={orientation:r.orientation||"horizontal",position:r.position||"base"};return m.gradient(e,e.series,n)}:i;return m.color(i),m.fill(o),m.classes(s),b.color(i),b.classes(s),S},S.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return S},S.width=function(e){return arguments.length?(n=e,S):n},S.height=function(e){return arguments.length?(r=e,S):r},S.showTitle=function(e){return arguments.length?(i=e,S):i},S.showControls=function(e){return arguments.length?(s=e,S):s},S.showLegend=function(e){return arguments.length?(o=e,S):o},S.tooltip=function(e){return arguments.length?(a=e,S):a},S.tooltips=function(e){return arguments.length?(f=e,S):f},S.tooltipContent=function(e){return arguments.length?(l=e,S):l},S.state=function(e){return arguments.length?(p=e,S):p},S.strings=function(e){if(!arguments.length)return d;for(var t in e)e.hasOwnProperty(t)&&(d[t]=e[t]);return S},S.direction=function(e){return arguments.length?(u=e,y.direction(e),b.direction(e),w.direction(e),S):u},S},e.models.multiBar=function(){function O(c){return c.each(function(c){function tt(e,t,n,r){return{value:a(t,n),point:t,series:c[r],pointIndex:n,seriesIndex:r,pos:[e.offsetX,e.offsetY],id:o,e:e}}y=l?g?72:30:20;var h=d3.select(this),w=g?"vertical":"horizontal",M=n-t.left-t.right,_=r-t.top-t.bottom,D=g?M:_,P=g?_:M,H=g?"width":"height",B=g?"height":"width",j=0,F=0,I=g?"x":"y",q=g?"y":"x",R=0,U=0,z=0,W=function(e,t){return Math.max(Math.round(Math.abs(s(a(e,t))-s(0))),0)},X=function(){return i.rangeBand()/(l?1:c.length)};l&&(c=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(c)),l&&c[0].values.map(function(e,t){var n=0,r=0;c.map(function(e){var i=e.values[t];i.size=Math.abs(i.y),i.y<0?(i.y1=r-(g?0:i.size),r-=i.size):(i.y1=n+(g?i.size:0),n+=i.size)})});var V=E&&S?[]:d3.merge(c.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0,y1:e.y1}})}));z=c[0].values.length,U=c.length,O.resetDimensions=function(e,i){n=e,r=i,M=e-t.left-t.right,_=i-t.top-t.bottom,D=g?M:_,P=g?_:M},O.resetScale=function(){M=n-t.left-t.right,_=r-t.top-t.bottom,j=g?M:_,F=g?_:M;var o=l?y:y*U+y,u=y*(l?.25:1),a=Math.max(.25,(D-(z*o+u))/(2*o));m?i.domain(E||V.map(function(e){return e.x})).rangeBands([0,D],.3):i.domain(E||V.map(function(e){return e.x})).rangeRoundBands([0,D],.25,a),s.domain(S||d3.extent(V.map(function(e){var t=g?0:e.y,n=g?e.y:0;return l?e.y>0?e.y1+t:e.y1+n:e.y}).concat(f))).range(g?[_,0]:[0,M]),x&&s.nice(),L=L||i,A=A||s,!l&&(d==="top"||d===!0)&&(R=e.utils.maxStringSetLength(V.map(function(e){return e.y}),h,v),R+=8,g?s.range([P-(s.domain()[0]<0?R:0),s.domain()[1]>0?R:0]):s.range([s.domain()[0]<0?R:0,P-(s.domain()[1]>0?R:0)]))},O.resetScale();var $=h.selectAll(".nvd3.nv-wrap").data([c]),J=$.enter().append("g"),K=J.append("defs"),Q=J.append("g"),G=$.select("g");$.attr("class","nvd3 nv-wrap nv-multibar"+(g?"":"Horizontal")),O.gradient=function(t,n,r){return e.utils.colorLinearGradient(t,o+"-"+n,r,T(t,n),$.select("defs"))},Q.append("g").attr("class","nv-groups"),$.attr("transform","translate("+t.left+","+t.top+")"),p&&(K.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),$.select("#nv-edge-clip-"+o+" rect").attr("width",M).attr("height",_)),G.attr("clip-path",p?"url(#nv-edge-clip-"+o+")":"");var Y=$.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});Y.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Y.exit().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).selectAll("g.nv-bar").attr("y",function(e){return l?A(e.y0):A(0)}).attr(H,0).remove(),Y.attr("class",C).attr("fill",N).classed("hover",function(e){return e.hover}).classed("nv-active",function(e){return e.active==="active"}).classed("nv-inactive",function(e){return e.active==="inactive"}).style({"stroke-opacity":1,"fill-opacity":1});var Z=Y.selectAll("g.nv-bar").data(function(e){return e.values},function(e,t){return e.series+"-"+e.x});Z.exit().remove();var et=Z.enter().append("g").attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(e,t,n){var r={x:l?0:n*X()+i(u(e,t)),y:A(l?e.y0:0)};return"translate("+r[I]+","+r[q]+")"});et.append("rect").attr(H,0).attr(B,0),Z.on("mouseover",function(e,t,n){d3.select(this).classed("hover",!0);var r=tt(d3.event,e,t,n);k.elementMouseover(r)}).on("mousemove",function(e,t,n){var r=tt(d3.event,e,t,n);k.elementMousemove(r)}).on("mouseout",function(e,t,n){d3.select(this).classed("hover",!1),k.elementMouseout()}).on("click",function(e,t,n){d3.event.stopPropagation();var r=tt(d3.event,e,t,n);k.elementClick(r)}).on("dblclick",function(e,t,n){d3.event.stopPropagation();var r=tt(d3.event,e,t,n);k.elementDblClick(r)}),l?Z.attr("transform",function(e,t){var n=e.active&&e.active==="active"?i.rangeBand()*.1:0,r={x:Math.round(i(u(e,t))-n),y:Math.round(s(e.y1))};return"translate("+r[I]+","+r[q]+")"}).select("rect").attr(q,function(e,t){return g?a(e,t)<0?2:-2:a(e,t)<0?-2:2}).attr(I,0).attr(B,W).attr(H,function(e,t){var n=e.active&&e.active==="active"?1.2:1;return i.rangeBand()*n}):Z.attr("transform",function(e,t,n){var r=e.active&&e.active==="active"?i.rangeBand()*.1/c.length:0,o={x:Math.round(n*X()+i(u(e,t))-r),y:Math.round(a(e,t)<0?g?s(0):s(a(e,t)):g?s(a(e,t)):s(0))};return"translate("+o[I]+","+o[q]+")"}).select("rect").attr(q,function(e,t){return g?a(e,t)<0?2:-2:a(e,t)<0?-2:2}).attr(I,0).attr(B,W).attr(H,function(e,t){var n=e.active&&e.active==="active"?1.2:1;return Math.round(i.rangeBand()*n/c.length)}),et.append("text").attr("class","nv-label-value");var nt=Z.select(".nv-label-value");nt.text(function(e,t){return d?v(a(e,t)):""}).attr("fill-opacity",0).attr("stroke-opacity-opacity",0);if(d){var rt=nt[0][0].getBBox(),it=g?rt.height:rt.width;nt.attr("text-anchor",function(e,t){var n="middle",r=a(e,t)<0;if(g&&l)n="middle";else{switch(d){case"start":n=r?"end":"start";break;case"middle":n="middle";break;case"end":n=r?"start":"end";break;case"top":default:n=g?r?"end":"start":l?r?"start":"end":r?"end":"start"}n=b==="rtl"&&n!=="middle"?n==="start"?"end":"start":n}return n}).attr("dy",function(e,t){var n=0,r=a(e,t)<0;if(l&&g)switch(d){case"start":n=r?"0.71em":0;break;case"middle":n="0.35em";break;case"top":case"end":default:n=r?0:"0.71em"}else n="0.35em";return n}).attr("x",function(e,t){var n=0,r=a(e,t)<0;if(g&&l)n=X()/2;else{switch(d){case"start":n=W(e,t)*(r?0:-1)+6*(r?-1:1);break;case"middle":n=-W(e,t)/2;break;case"end":n=W(e,t)*(r?-1:0)+4*(r?1:-1);break;case"top":default:n=W(e,t)*(r?-1:0)+4*(r?-1:1)*(l?-1:1)}g||(n+=W(e,t))}return n}).attr("y",function(e,t){var n=0,r=a(e,t)<0;if(g&&l)switch(d){case"start":n=W(e,t)*(r?0:1)+6*(r?1:-1);break;case"middle":n=W(e,t)/2+(r?1:-1);break;case"end":case"top":default:n=W(e,t)*(r?1:0)+4*(r?-1:1)}else n=X()/2;return n}).attr("transform","rotate("+(!l&&g?-90:0)+" 0,0)").style("fill",function(t,n,r){if(!!l||d!=="top"&&d!==!0){var i=d3.select(this.previousSibling).style("fill"),s=e.utils.getTextContrast(i,n);return s}return"#000"}).attr("fill-opacity",function(e,t){var n=W(e,t);return a(e,t)===0||n<it?0:1}).attr("stroke-opacity",function(e,t){var n=W(e,t);return a(e,t)===0||n<it?0:1})}L=i.copy(),A=s.copy()}),O}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=!1,c=null,h,p=!0,d=!1,v=d3.format(",.2s"),m=!1,g=!0,y=60,b="ltr",w=200,E,S,x=!1,T=function(t,n){return e.utils.defaultColor()(t,t.series)},N=T,c=null,C=function(e,t){return"nv-group nv-series-"+e.series},k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove"),L,A;return O.dispatch=k,O.color=function(e){return arguments.length?(T=e,O):T},O.fill=function(e){return arguments.length?(N=e,O):N},O.classes=function(e){return arguments.length?(C=e,O):C},O.gradient=function(e){return arguments.length?(gradient=e,O):gradient},O.x=function(e){return arguments.length?(u=e,O):u},O.y=function(e){return arguments.length?(a=e,O):a},O.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return O},O.width=function(e){return arguments.length?(n=e,O):n},O.height=function(e){return arguments.length?(r=e,O):r},O.xScale=function(e){return arguments.length?(i=e,O):i},O.yScale=function(e){return arguments.length?(s=e,O):s},O.xDomain=function(e){return arguments.length?(E=e,O):E},O.yDomain=function(e){return arguments.length?(S=e,O):S},O.forceY=function(e){return arguments.length?(f=e,O):f},O.stacked=function(e){return arguments.length?(l=e,O):l},O.clipEdge=function(e){return arguments.length?(p=e,O):p},O.barColor=function(t){return arguments.length?(c=e.utils.getColor(t),O):c},O.disabled=function(e){return arguments.length?(h=e,O):h},O.id=function(e){return arguments.length?(o=e,O):o},O.delay=function(e){return arguments.length?(w=e,O):w},O.showValues=function(e){return arguments.length?(d=e,O):d},O.valueFormat=function(e){return arguments.length?(v=e,O):v},O.withLine=function(e){return arguments.length?(m=e,O):m},O.vertical=function(e){return arguments.length?(g=e,O):g},O.baseDimension=function(e){return arguments.length?(y=e,O):y},O.direction=function(e){return arguments.length?(b=e,O):b},O.nice=function(e){return arguments.length?(x=e,O):x},O},e.models.multiBarChart=function(){function O(m){return m.each(function(m){function R(e,t,s){if(e&&e.length)return M.selectAll(".nv-noData").remove(),!1;M.select(".nvd3.nv-wrap").remove();var t=r||parseInt(M.style("width"),10)||960,s=i||parseInt(M.style("height"),10)||400,o=M.selectAll(".nv-noData").data([O.strings().noData]);return o.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),o.attr("x",n.left+t/2).attr("y",n.top+s/2).text(function(e){return e}),!0}var k=t?"multibarChart":"multiBarHorizontalChart",M=d3.select(this),_=m?m.properties:{},D=m?m.data:null,P=this,H=[],B=[],j=0,F=[],I=0,q=0;O.container=this,O.update=function(){M.transition().call(O)};if(R(D))return O;O.dataSeriesActivate=function(e){var t=e.series;t.active=!t.active||t.active==="inactive"?"active":"inactive",t.values.map(function(e){e.active=t.active}),t.active==="active"&&D.filter(function(e){return e.active!=="active"}).map(function(e){return e.active="inactive",e.values.map(function(e){e.active="inactive"}),e}),D.filter(function(e){return e.active==="active"}).length||D.map(function(e){return e.active="",e.values.map(function(e){e.active=""}),M.selectAll(".nv-series").classed("nv-inactive",!1),e}),M.call(O)},s=s&&_.title;var U=[{key:"Grouped",disabled:v.stacked},{key:"Stacked",disabled:!v.stacked}];g&&D.map(function(e){return e._values||(e._values=e.values),e}),D.map(function(e,t){e.series=t,e.total=d3.sum(e.values,function(e){return e.y}),e.total||(e.disabled=!0)}),B=_.values.map(function(e,t){return e.t=d3.sum(D.map(function(t,n){return t.disabled?0:(g?t._values:t.values).filter(function(t,n){return E.x()(t,n)===e.group}).map(function(e,t){return E.y()(e,t)})})),e}),j=d3.sum(B,function(e){return e.t}),H=_.labels.filter(function(e,t){return g?B[t].t!==0:!0}).map(function(e){return e.l?Array.isArray(e.l)?e.l[0]:e.l:"undefined"}),F=D.filter(function(e,t){return!e.disabled&&(!e.type||e.type==="bar")}),g&&F.map(function(e,t){return e.values=e._values.filter(function(e,t){return B[t].t!==0}).map(function(t,n){return{series:e.series,x:n+1,y:t.y,y0:t.y0,active:typeof e.active!="undefined"?e.active:""}}),e});if(!j)return R(),O;F.length||(F=[{values:[]}]),v.disabled=D.map(function(e){return!!e.disabled}),v.stacked=E.stacked(),q=H.length,I=F.length,p=E.xScale(),d=E.yScale(),S.scale(p),x.scale(d),O.render=function(){function lt(e){return e==="width"?t&&c?Math.max(m,$):m:e==="height"?!t&&c?Math.max(g,$):g:0}var f=r||parseInt(M.style("width"),10),l=i||parseInt(M.style("height"),10),p=f-n.left-n.right,d=l-n.top-n.bottom,m=m||p,g=g||d,L={top:0,right:0,bottom:0,left:0},A="",P=0,B=0,j=0,R=0,z=0,W=E.stacked()?t?60:30:20,X=v.stacked?W:W*I+W,V=W*(v.stacked?.25:1),$=q*X+V;b=$>(t?m:g),S.orient(t?"bottom":"left").tickFormat(function(n,r){var i=H[r]||"undefined";return t||(i=e.utils.stringEllipsify(i,M,Math.max(p*.2,75))),i}),x.orient(t?"left":"bottom");var J=M.selectAll(".nvd3.nv-wrap").data([D]),K=J.enter().append("g").attr("class","nvd3 nv-wrap").append("g"),Q=J.select("g").attr("class","nv-chartWrap");J.attr("class","nvd3 nv-wrap nv-"+k),K.append("defs"),K.append("g").attr("class","nv-scroll-background"),K.append("g").attr("class","nv-titleWrap");var G=Q.select(".nv-titleWrap");K.append("g").attr("class","nv-y nv-axis");var Y=Q.select(".nv-y.nv-axis");K.append("g").attr("class","nv-scroll-wrap");var Z=Q.select(".nv-scroll-wrap");K.select(".nv-scroll-wrap").append("g").attr("class","nv-x nv-axis");var et=Q.select(".nv-x.nv-axis");K.select(".nv-scroll-wrap").append("g").attr("class","nv-barsWrap");var tt=Q.select(".nv-barsWrap");K.append("g").attr("class","nv-controlsWrap");var nt=Q.select(".nv-controlsWrap");K.append("g").attr("class","nv-legendWrap");var rt=Q.select(".nv-legendWrap");J.attr("transform","translate("+n.left+","+n.top+")");var it={width:0,height:0};G.select(".nv-title").remove(),s&&(G.append("text").attr("class","nv-title").attr("x",a==="rtl"?p:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(_.title).attr("stroke","none").attr("fill","black"),it=e.utils.getTextBBox(Q.select(".nv-title")),L.top+=it.height+12),o&&(N.id("controls_"+O.id()).strings(O.strings().controls).align("left").height(d-L.top),nt.datum(U).call(N),P=N.calculateWidth()),u&&(E.barColor()&&D.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()}),T.id("legend_"+O.id()).strings(O.strings().legend).align("right").height(d-L.top),rt.datum(D).call(T),B=T.calculateWidth()),j=p/(P+B),P=Math.floor(P*j),B=Math.floor(B*j),o&&(N.arrange(P),B=p-N.width()),u&&(T.arrange(B),P=p-T.width());if(o){var st=a==="rtl"?p-N.width():0,ot=s?it.height:-T.margin().top;nt.attr("transform","translate("+st+","+ot+")"),R=N.height()}if(u){var ut=e.utils.getTextBBox(rt.select(".nv-legend-link")),at=p-it.width-6,ft=s&&!o&&T.collapsed()&&at>ut.width?!0:!1,st=a==="rtl"?0:p-T.width(),ot=it.height;ft?ot=it.height-T.height()/2-ut.height/2:s||(ot=-T.margin().top),rt.attr("transform","translate("+st+","+ot+")"),z=ft?0:T.height()-12}L.top+=Math.max(R,z),g=d-L.top-L.bottom,E.vertical(t).baseDimension(W).disabled(D.map(function(e){return e.disabled})).width(lt("width")).height(lt("height")).clipEdge(!1),tt.data([F]).call(E),Y.call(x),L[x.orient()]+=t?x.width():x.height(),m=p-L.left-L.right,g=d-L.top-L.bottom,E.resetDimensions(lt("width"),lt("height")),E.resetScale(),et.call(S),L[S.orient()]+=t?S.height():S.width(),m=p-L.left-L.right,g=d-L.top-L.bottom,E.resetDimensions(lt("width"),lt("height")),E.resetScale(),Z.attr("transform","translate("+L.left+","+L.top+")"),tt.transition().call(E),A="translate(",A+=t?0:S.orient()==="left"?0:m,A+=",",A+=t?S.orient()==="bottom"?g:0:0,A+=")",et.attr("transform",A).transition().call(S),et.select(".nv-axislabel").attr("x",(t?m:-g)/2),A="translate(",A+=L.left+(t?x.orient()==="left"?0:m:0),A+=",",A+=L.top+(t?0:x.orient()==="bottom"?g:0),A+=")",x.tickSize(t?-m:-g,0),Y.attr("transform",A).transition().call(x);if(c){var ct=(t?m:g)-$,ht=function(){if(d3.event&&d3.event.type==="click")return;y.tooltipHide(d3.event),w=C.pan(ct),et.select(".nv-axislabel").attr("x",(t?m-w*2:w*2-g)/2)};C.id(O.id()).enable(b).vertical(t).width(m).height(g).margin(L).minDimension($).panHandler(ht),C(Q,K,Z,S),C.init(w,h),C.panHandler()()}},O.render(),T.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,g&&D.map(function(n,r){return n._values.map(function(n,r){return n.disabled=r===t?e.disabled:n.disabled?!0:!1,n}),n}),D.filter(function(e){return!e.disabled}).length||D.map(function(e){return e.disabled=!1,M.selectAll(".nv-series").classed("disabled",!1),e}),v.disabled=D.map(function(e){return!!e.disabled}),y.stateChange(v),M.transition().call(O)}),N.dispatch.on("legendClick",function(e,t){if(!e.disabled)return;U=U.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":E.stacked(!1);break;case"Stacked":E.stacked(!0)}v.stacked=E.stacked(),y.stateChange(v),M.transition().call(O)}),y.on("tooltipShow",function(e){l&&L(e,P.parentNode,B)}),y.on("tooltipMove",function(n){f&&e.tooltip.position(P.parentNode,f,n.pos,t?"s":"w")}),y.on("tooltipHide",function(){l&&e.tooltip.cleanup()}),y.on("changeState",function(e){typeof eo.disabled!="undefined"&&(D.forEach(function(e,t){e.disabled=eo.disabled[t]}),v.disabled=eo.disabled),typeof eo.stacked!="undefined"&&(E.stacked(eo.stacked),v.stacked=eo.stacked),M.transition().call(O)}),y.on("chartClick",function(){y.tooltipHide(),N.enabled()&&N.dispatch.closeMenu(),T.enabled()&&T.dispatch.closeMenu()}),E.dispatch.on("elementClick",function(e){y.chartClick(),l&&L(e,P.parentNode,B),A(D,e,O)})}),O}var t=!0,n={top:10,right:10,bottom:10,left:10},r=null,i=null,s=!1,o=!1,u=!0,a="ltr",f=null,l=!0,c=!0,h=function(e){return},p,d,v={},m={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},g=!0,y=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),b=!1,w=0,E=e.models.multiBar().stacked(!1),S=e.models.axis().tickSize(0).tickPadding(4).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),x=e.models.axis().tickPadding(4).tickFormat(d3.format("s")),T=e.models.legend(),N=e.models.legend().color(["#444"]),C=e.models.scroll(),k=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},L=function(n,r,i){var s=n.pos[0],o=n.pos[1],u=i?(n.point.y*100/i[n.pointIndex].t).toFixed(1):S.tickFormat()(E.x()(n.point,n.pointIndex)),a=x.tickFormat()(E.y()(n.point,n.pointIndex)),l=k(n.series.key,u,a,n,O),c=n.value<0?t?"n":"e":t?"s":"w";f=e.tooltip.show([s,o],l,c,null,r)},A=function(e,t,n){return};return E.dispatch.on("elementMouseover.tooltip",function(e){y.tooltipShow(e)}),E.dispatch.on("elementMousemove.tooltip",function(e){y.tooltipMove(e)}),E.dispatch.on("elementMouseout.tooltip",function(){y.tooltipHide()}),O.dispatch=y,O.multibar=E,O.legend=T,O.controls=N,O.xAxis=S,O.yAxis=x,d3.rebind(O,E,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","delay","color","fill","classes","gradient"),d3.rebind(O,E,"stacked","showValues","valueFormat","nice"),d3.rebind(O,S,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),O.colorData=function(n){var r=arguments[0],i=arguments[1]||{},s=function(t,n){return e.utils.defaultColor()(t,t.series)},o=function(e,t){return"nv-group nv-series-"+e.series};switch(r){case"graduated":s=function(e,t){return d3.interpolateHsl(d3.rgb(i.c1),d3.rgb(i.c2))(e.series/i.l)};break;case"class":s=function(){return"inherit"},o=function(e,t){var n=e.series*(i.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n};break;case"data":s=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},o=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var u=i.gradient?function(e,n){var r={orientation:i.orientation||(t?"vertical":"horizontal"),position:i.position||"middle"};return E.gradient(e,e.series,r)}:s;return E.color(s),E.fill(u),E.classes(o),T.color(s),T.classes(o),O},O.margin=function(e){if(!arguments.length)return n;for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return O},O.vertical=function(e){return arguments.length?(t=e,O):t},O.width=function(e){return arguments.length?(r=e,O):r},O.height=function(e){return arguments.length?(i=e,O):i},O.showTitle=function(e){return arguments.length?(s=e,O):s},O.showControls=function(e){return arguments.length?(o=e,O):o},O.showLegend=function(e){return arguments.length?(u=e,O):u},O.tooltip=function(e){return arguments.length?(f=e,O):f},O.tooltips=function(e){return arguments.length?(l=e,O):l},O.tooltipContent=function(e){return arguments.length?(k=e,O):k},O.state=function(e){return arguments.length?(v=e,O):v},O.strings=function(e){if(!arguments.length)return m;for(var t in e)e.hasOwnProperty(t)&&(m[t]=e[t]);return O},O.allowScroll=function(e){return arguments.length?(c=e,O):c},O.overflowHandler=function(e){return arguments.length?(h=d3.functor(e),O):h},O.seriesClick=function(e){return arguments.length?(A=e,O):A},O.hideEmptyGroups=function(e){return arguments.length?(g=e,O):g},O.direction=function(e){return arguments.length?(a=e,E.direction(e),S.direction(e),x.direction(e),T.direction(e),N.direction(e),O):a},O},e.models.paretoChart=function(){function M(c){return c.each(function(c){var h=c.properties,p=c.data,v=d3.select(this),y=this,O=(n||parseInt(v.style("width"),10)||960)-t.left-t.right,_=(r||parseInt(v.style("height"),10)||400)-t.top-t.bottom,D=O,P=_,H={top:0,right:0,bottom:0,left:0},B=0,j=0,F=0;M.update=function(){v.call(M)},M.container=this;if(!p||!p.length||!p.filter(function(e){return e.values.length}).length){var I=v.selectAll(".nv-noData").data([M.strings().noData]);return I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",t.left+O/2).attr("y",t.top+_/2).text(function(e){return e}),M}v.selectAll(".nv-noData").remove();var q=p.filter(function(e){return!e.disabled&&(!e.type||e.type==="bar")}),R=p.filter(function(e){return!e.disabled&&e.type==="line"}).map(function(e){return w.stacked()?(e.values.map(function(e){e.y=0}),q.map(function(t,n){t.values.map(function(t,n){e.values[n].y+=t.y})}),e.values.map(function(t,n){n>0&&(t.y+=e.values[n-1].y)})):e.values=e.valuesOrig.map(function(e,t){return{series:e.series,x:e.x+e.series*.25-t*.25,y:e.y}}),e}),U=h.groupData,z=h.quota||0,W=h.quotaLabel||"",X=h.targetQuota||0,V=h.targetQuotaLabel||"";q=q.length?q:[{values:[]}],R=R.length?R:[{values:[]}];var $=[{key:W,type:"dash",color:"#444",values:{series:0,x:0,y:0}}];X>0&&$.push({key:V,type:"dash",color:"#777",values:{series:0,x:0,y:0}});var J=p.filter(function(e){return!e.disabled}).map(function(e){return e.valuesOrig.map(function(e,t){return i(e,t)})}),K=p.map(function(e){return e.valuesOrig.map(function(e,t){return s(e,t)})});m=w.xScale(),g=w.yScale(),x.scale(m),T.scale(g).tickFormat(d),U.length&&x.tickFormat(function(e,t){return U[t]?U[t].l:"asfd"});var Q=v.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([p]),G=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),Y=Q.select("g").attr("class","nv-chartWrap");G.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("width",O+t.left+t.right).attr("height",_+t.top+t.bottom).attr("fill","#FFF"),G.append("g").attr("class","nv-titleWrap");var Z=Y.select(".nv-titleWrap");G.append("g").attr("class","nv-x nv-axis");var et=Y.select(".nv-x.nv-axis");G.append("g").attr("class","nv-y nv-axis");var tt=Y.select(".nv-y.nv-axis");G.append("g").attr("class","nv-barsWrap");var nt=Y.select(".nv-barsWrap");G.append("g").attr("class","nv-quotaWrap");var rt=Y.select(".nv-quotaWrap");G.append("g").attr("class","nv-linesWrap1");var it=Y.select(".nv-linesWrap1");G.append("g").attr("class","nv-linesWrap2");var st=Y.select(".nv-linesWrap2");G.append("g").attr("class","nv-legendWrap nv-barLegend");var ot=Y.select(".nv-legendWrap.nv-barLegend");G.append("g").attr("class","nv-legendWrap nv-lineLegend");var ut=Y.select(".nv-legendWrap.nv-lineLegend");Q.attr("transform","translate("+t.left+","+t.top+")"),o&&h.title&&(Z.select(".nv-title").remove(),Z.append("text").text(h.title).attr("class","nv-title").attr("x",l==="rtl"?O:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").attr("stroke","none").attr("fill","black"),H.top+=parseInt(Y.select(".nv-title").node().getBoundingClientRect().height/1.15,10)+parseInt(Y.select(".nv-title").style("margin-top"),10)+parseInt(Y.select(".nv-title").style("margin-bottom"),10)),u&&(N.id("barlegend_"+M.id()).strings(M.strings().barlegend).align("left").height(_-H.top),ot.datum(p.filter(function(e){return e.type==="bar"})).call(N),B=N.calculateWidth(),C.id("linelegend_"+M.id()).strings(M.strings().linelegend).align("right").height(_-H.top),ut.datum(p.filter(function(e){return e.type==="line"}).concat($)).call(C),j=C.calculateWidth(),F=O/(B+j),N.arrange(Math.floor(F*B)),C.arrange(Math.floor(F*j)),ot.attr("transform","translate("+(l==="rtl"?O-N.width():0)+","+H.top+")"),ut.attr("transform","translate("+(l==="rtl"?0:O-C.width())+","+H.top+")")),H.top+=Math.max(N.height(),C.height())+4,P=_-H.top-H.bottom;var at=m.domain(d3.merge(J)).rangeBands([0,O-t.left-t.right],.3),ft=Math.max(d3.max(d3.merge(K)),z,X||0),lt=Math.ceil(ft*.1)*10,ct=at(1)+at.rangeBand()/(w.stacked()||R.length===1?2:4);w.width(D).height(P).forceY([0,lt]).id(M.id()),nt.datum(q).call(w),E.margin({top:0,right:ct,bottom:0,left:ct}).width(D).height(P).forceY([0,lt]).useVoronoi(!1).id("outline_"+M.id()),S.margin({top:0,right:ct,bottom:0,left:ct}).width(D).height(P).forceY([0,lt]).useVoronoi(!1).size(function(){return Math.pow(6,2)*Math.PI}).id("foreground_"+M.id()),it.datum(R).call(E),st.datum(R).call(S),et.call(x),tt.style("opacity",q.length?1:0).call(T),D=O-H.left-H.right-T.width(),P=_-H.top-H.bottom-x.height(),w.width(D).height(P),nt.call(w),et.call(x),tt.call(T),H[T.orient()]+=T.width(),D=O-H.left-H.right,H[x.orient()]+=x.height(),P=_-H.top-H.bottom,w.width(D).height(P),nt.attr("transform","translate("+H.left+","+H.top+")").call(w),E.width(D).height(P),S.width(D).height(P),it.attr("transform","translate("+H.left+","+H.top+")").call(E),st.attr("transform","translate("+H.left+","+H.top+")").call(S),rt.attr("transform","translate("+H.left+","+H.top+")"),et.attr("transform","translate("+H.left+","+(x.orient()==="bottom"?P+H.top:H.top)+")").call(x),T.ticks(P/100).tickSize(-D,0),tt.attr("transform","translate("+(T.orient()==="left"?H.left:H.left+D)+","+H.top+")").call(T),rt.selectAll("line").remove(),tt.selectAll("text.nv-quotaValue").remove(),tt.selectAll("text.nv-targetQuotaValue").remove();var ht=14;X>0&&(rt.append("line").attr("class","nv-quotaLineTarget").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+g(X)+")").style("stroke-dasharray","8, 8"),rt.append("line").datum({key:V,val:X}).attr("class","nv-quotaLineTarget nv-quotaLineBackground").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+g(X)+")"),tt.append("text").text(M.quotaTickFormat()(X)).attr("class","nv-targetQuotaValue").attr("dy",".36em").attr("dx","0").attr("text-anchor",l==="rtl"?"start":"end").attr("transform","translate("+ -T.tickPadding()+","+g(X)+")"),ht=Math.round(parseInt(Y.select("text.nv-targetQuotaValue").node().getBoundingClientRect().height,10)/1.15),tt.selectAll("g.tick").each(function(e,t){g(e)<=g(X)+ht&&g(e)>=g(X)-ht&&(d3.select(this).select("text").style("opacity",0),d3.select(this).select("line").style("opacity",0))}),T.showMaxMin&&tt.selectAll("g.nv-axisMaxMin").each(function(e,t){Math.abs(g(e)-g(X))<=ht&&d3.select(this).select("text").style("opacity",0)})),z>0&&(rt.append("line").attr("class","nv-quotaLine").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+g(z)+")").style("stroke-dasharray","8, 8"),rt.append("line").datum({key:W,val:z}).attr("class","nv-quotaLine nv-quotaLineBackground").attr("x1",0).attr("y1",0).attr("x2",D).attr("y2",0).attr("transform","translate(0,"+g(z)+")"),tt.append("text").text(M.quotaTickFormat()(z)).attr("class","nv-quotaValue").attr("dy",".36em").attr("dx","0").attr("text-anchor",l==="rtl"?"start":"end").attr("transform","translate("+ -T.tickPadding()+","+g(z)+")"),ht=Math.round(parseInt(Y.select("text.nv-quotaValue").node().getBoundingClientRect().height,10)/1.15),tt.selectAll("g.tick").each(function(e,t){g(e)<=g(z)+ht&&g(e)>=g(z)-ht&&(d3.select(this).select("line").style("opacity",0),d3.select(this).select("text").style("opacity",0))}),T.showMaxMin&&tt.selectAll("g.nv-axisMaxMin").each(function(e,t){Math.abs(g(e)-g(z))<=ht&&d3.select(this).select("text").style("opacity",0)}),X>0&&Math.abs(g(z)-g(X))<=ht&&tt.select(".nv-targetQuotaValue").style("opacity",0)),rt.selectAll("line.nv-quotaLineBackground").on("click",function(e){d3.event.stopPropagation(),b.chartClick();if(f){var t={pos:[d3.event.offsetX,d3.event.offsetY],val:e.val,key:e.key};L(t,y.parentNode)}}).on("mouseover",function(e){if(f){var t={pos:[d3.event.offsetX,d3.event.offsetY],val:e.val,key:e.key};L(t,y.parentNode)}}).on("mouseout",function(){b.tooltipHide()}).on("mousemove",function(){b.tooltipMove({pos:[d3.event.offsetX,d3.event.offsetY]})}),N.dispatch.on("legendClick",function(e,t){var n=e.series;e.disabled=!e.disabled,M.stacked()||p.filter(function(e){return e.series===n&&e.type==="line"}).map(function(e){return e.disabled=!e.disabled,e}),p.filter(function(e){return!e.disabled&&e.type==="bar"}).length||p.map(function(e){return e.disabled=!1,Y.selectAll(".nv-series").classed("disabled",!1),e}),v.call(M)}),b.on("tooltipShow",function(e){f&&k(e,y.parentNode,U)}),b.on("tooltipMove",function(t){a&&e.tooltip.position(y.parentNode,a,t.pos,"s")}),b.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),b.on("chartClick",function(){b.tooltipHide(),N.enabled()&&N.dispatch.closeMenu(),C.enabled()&&C.dispatch.closeMenu()}),w.dispatch.on("elementClick",function(e){b.chartClick(),f&&k(e,y.parentNode,U),A(p,e,M,v)})}),M}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=function(e){return e.x},s=function(e){return e.y},o=!1,u=!0,a=null,f=!0,l="ltr",c=function(e,t,n,r,i){return"<p><b>"+e+"</b></p>"+"<p><b>"+n+"</b></p>"+"<p><b>"+t+"%</b></p>"},h=function(e,t,n,r,i){return"<p><p>"+e+": <b>"+n+"</b></p>"},p=function(e,t,n,r,i){return"<p>"+r.key+": <b>"+n+"</b></p>"},d=function(e){return d3.format(",.2s")(e)},v=function(e){return d3.format(",.3s")(e)},m,g,y={barlegend:{close:"Hide bar legend",open:"Show bar legend"},linelegend:{close:"Hide line legend",open:"Show line legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},b=d3.dispatch("chartClick","tooltipShow","tooltipHide","tooltipMove"),w=e.models.multiBar().stacked(!0).clipEdge(!1).withLine(!0).nice(!0),E=e.models.line().color(function(e,t){return"#FFF"}).fill(function(e,t){return"#FFF"}).useVoronoi(!1).nice(!0),S=e.models.line().useVoronoi(!1).color("data").nice(!0),x=e.models.axis().orient("bottom").tickSize(0).tickPadding(4).wrapTicks(!0).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),T=e.models.axis().orient("left").tickPadding(7).showMaxMin(!1),N=e.models.legend().align("left").position("middle"),C=e.models.legend().align("right").position("middle"),k=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=(t.point.y*100/r[t.pointIndex].t).toFixed(1),u=T.tickFormat()(S.y()(t.point,t.pointIndex)),f=t.series.type==="bar"?c(t.series.key,o,u,t,M):h(t.series.key,o,u,t,M);a=e.tooltip.show([i,s],f,"s",null,n)},L=function(t,n){var r=t.pos[0],i=t.pos[1],s=d3.format(",.2s")(t.val),o=p(t.key,0,s,t,M);a=e.tooltip.show([r,i],o,"s",null,n)},A=function(e,t,n,r){return},O=function(e){var t=document.documentElement,n=e.getBoundingClientRect(),r=t.scrollLeft+document.body.scrollLeft,i=t.scrollTop+document.body.scrollTop,s=n.left+r,o=n.top+i;return{x:s,y:o}};return S.dispatch.on("elementMouseover.tooltip",function(e){b.tooltipShow(e)}),S.dispatch.on("elementMousemove",function(e){b.tooltipMove(e)}),S.dispatch.on("elementMouseout.tooltip",function(){b.tooltipHide()}),w.dispatch.on("elementMouseover.tooltip",function(e){b.tooltipShow(e)}),w.dispatch.on("elementMousemove",function(e){b.tooltipMove(e)}),w.dispatch.on("elementMouseout.tooltip",function(){b.tooltipHide()}),M.dispatch=b,M.lines1=E,M.lines2=S,M.multibar=w,M.barLegend=N,M.lineLegend=C,M.xAxis=x,M.yAxis=T,d3.rebind(M,w,"id","x","y","xScale","yScale","xDomain","yDomain","forceX","forceY","clipEdge","color","fill","classes","gradient"),d3.rebind(M,w,"stacked","showValues","valueFormat","nice"),d3.rebind(M,x,"rotateTicks","reduceXTicks","staggerTicks","wrapTicks"),M.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series},o=function(e,t){var n=r.lineColor?r.lineColor:{c1:"#1A8221",c2:"#62B464",l:1};return e.color||d3.interpolateHsl(d3.rgb(n.c1),d3.rgb(n.c2))(e.series/1)},u=function(e,t){return"nv-group nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.barColor.c1),d3.rgb(r.barColor.c2))(e.series/r.barColor.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n},u=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-group nv-series-"+e.series+" nv-fill"+n+" nv-stroke"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")},u=function(e,t){return"nv-group nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var a=r.gradient?function(e,t){var n={orientation:r.orientation||"vertical",position:r.position||"middle"};return w.gradient(e,e.series,n)}:i;return w.color(i),w.fill(a),w.classes(s),S.color(o),S.fill(o),S.classes(u),N.color(i),N.classes(s),C.color(o),C.classes(u),M},M.x=function(e){return arguments.length?(i=e,lines.x(e),w.x(e),M):i},M.y=function(e){return arguments.length?(s=e,lines.y(e),w.y(e),M):s},M.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return M},M.width=function(e){return arguments.length?(n=e,M):n},M.height=function(e){return arguments.length?(r=e,M):r},M.showTitle=function(e){return arguments.length?(o=e,M):o},M.showLegend=function(e){return arguments.length?(u=e,M):u},M.showControls=function(e){return arguments.length?M:!1},M.tooltipBar=function(e){return arguments.length?(c=e,M):c},M.tooltipLine=function(e){return arguments.length?(h=e,M):h},M.tooltipQuota=function(e){return arguments.length?(p=e,M):p},M.tooltip=function(e){return arguments.length?(a=e,M):a},M.tooltips=function(e){return arguments.length?(f=e,M):f},M.tooltipContent=function(e){return arguments.length?(tooltipContent=e,M):tooltipContent},M.barClick=function(e){return arguments.length?(A=e,M):A},M.colorFill=function(e){return M},M.yAxisTickFormat=function(e){return arguments.length?(d=e,M):d},M.quotaTickFormat=function(e){return arguments.length?(v=e,M):v},M.strings=function(e){if(!arguments.length)return y;for(var t in e)e.hasOwnProperty(t)&&(y[t]=e[t]);return M},M.direction=function(e){return arguments.length?(l=e,w.direction(e),T.direction(e),N.direction(e),C.direction(e),M):l},M},e.models.pie=function(){function P(i){return i.each(function(i){function lt(e,t,n){return{label:s(t.data),value:o(t.data),point:t.data,pointIndex:n,pos:[e.offsetX,e.offsetY],id:a,e:e}}function ct(e,t,n){var r=[],i=[],s=Math.PI;e.each(function(e,o){var u=(x(e)+2*s)%(2*s),a=(T(e)+2*s)%(2*s),f=Math.round(Math.sin(u)*1e4)/1e4,l=Math.round(Math.sin(a)*1e4)/1e4,c=Math.round(Math.cos(u)*1e4)/1e4,h=Math.round(Math.cos(a)*1e4)/1e4;x(e)<=0&&T(e)>=0&&(i.push(n),v&&i.push(n*N)),u<=s/2&&(a>=s/2||a===0)&&(r.push(t),v&&r.push(t*N)),u<=s&&(a>=s||a===0)&&(i.push(-n),v&&i.push(-n*N)),u<=3*s/2&&(a>=3*s/2||a===0)&&(r.push(-t),v&&r.push(-t*N)),r.push(t*f),r.push(t*l),v?(r.push(t*N*f),r.push(t*N*l)):r.push(0),i.push(n*c),i.push(n*h),v?(i.push(n*N*c),i.push(n*N*h)):i.push(0)}),$=d3.extent(r),J=d3.extent(i),X*=u/(d3.max($)-d3.min($)),V*=f/(d3.max(J)-d3.min(J))}function ht(){var e=[X],t=[V+b];z.select("path").each(function(n,r){if(!pt(n))return;var i=(x(n)+T(n))/2,s=d3.round(Math.sin(i),5),o=d3.round(Math.cos(i),5),u=X-Y-L[r],a=V-Q,f=s?u/s:u,l=o?a/o:a;e.push(f),t.push(l)}),Z=d3.max(t)+d3.min(t),et=d3.max(e)+d3.min(e);var n=d3.min(e.concat(t).concat([]),function(e){return Math.abs(e)});return n}function pt(e){var t=(T(e)-x(e))/(2*Math.PI);return t>d?1:0}function dt(e,t){var n=Math.PI*2,r=((x(e)+T(e))/2+n)%n;return r>0&&r<Math.PI?1:-1}function vt(e){v||(e.innerRadius=0);var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){var n=t(e);return at(n)}}function mt(e){e.innerRadius=0;var t=d3.interpolate({startAngle:0,endAngle:0},e);return function(e){return at(t(e))}}var u=n-t.left-t.right,f=r-t.top-t.bottom,E=d3.select(this),S=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:o(e)}),L=[],H=l&&h?!0:!1;H&&(L=e.utils.stringSetLengths(i.map(function(e){return e.key}),E,function(e){return e}));var B=E.selectAll(".nv-wrap.nv-pie").data([i]),j=B.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a),F=j.append("defs"),I=j.append("g"),q=B.select("g");P.gradient=function(t,n){var r={x:0,y:0,r:ut,s:v?N*100+"%":"0%",u:"userSpaceOnUse"};return e.utils.colorRadialGradient(t,a+"-"+n,r,O(t,n),B.select("defs"))},I.append("g").attr("class","nv-pie");var R=q.select(".nv-pie");I.append("g").attr("class","nv-holeWrap");var U=q.select(".nv-holeWrap");B.attr("transform","translate("+t.left+","+t.top+")"),R.attr("transform","translate("+u/2+","+f/2+")"),E.on("click",function(e,t){D.chartClick({data:e,index:t,pos:d3.event,id:a})});var z=B.select(".nv-pie").selectAll(".nv-slice").data(S);z.exit().remove();var W=z.enter().append("g").on("mouseover",function(e,t){d3.select(this).classed("hover",!0);var n=lt(d3.event,e,t);D.elementMouseover(n)}).on("mousemove",function(e,t){var n=lt(d3.event,e,t);D.elementMousemove(n)}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),D.elementMouseout()}).on("click",function(e,t){d3.event.stopPropagation();var n=lt(d3.event,e,t);D.elementClick(n)}).on("dblclick",function(e,t){d3.event.stopPropagation();var n=lt(d3.event,e,t);D.elementDblClick(n)});W.append("path").style("stroke","#ffffff").style("stroke-width",2).style("stroke-opacity",0).each(function(e,t){this._current=e}),W.append("g").attr("transform","translate(0,0)").attr("class","nv-label"),W.select(".nv-label").append("rect").style("fill-opacity",0).style("stroke-opacity",0),W.select(".nv-label").append("text").style("fill-opacity",0),W.append("polyline").attr("class","nv-label-leader").style("stroke-opacity",0);var X=u/2,V=f/2,$=[],J=[],K=0,Q=H?5:0,G=0,Y=b+w,Z=0,et=0;z.select("path").call(ct,X,V),U.call(g,m?[m]:[]);if(m){var tt=U.node().getBBox().height*.3,nt=Math.abs(V*d3.min(J)),rt=Math.round(tt-nt);rt>0&&(Q+=rt,K-=rt/2)}var it=u/2,st=f/2;H&&(b=Math.max(Math.min(Math.min(ht())/12,20),10));var ot=Math.min(Math.max(ht(),C),k),ut=ot-(H?b:0);st+=((d3.max(J)-d3.min(J))/2+d3.min(J))*((ot+K)/st),it+=((d3.max($)-d3.min($))/2-d3.max($))*(ot/it),st+=K/2,R.attr("transform","translate("+it+","+st+")"),U.attr("transform","translate("+it+","+st+")");var at=d3.svg.arc().innerRadius(v?ut*N:0).outerRadius(ut).startAngle(x).endAngle(T),ft=d3.svg.arc().innerRadius(0).outerRadius(ut).startAngle(x).endAngle(T);h&&(!v||p?ft.innerRadius(ot).outerRadius(ot):ft.outerRadius(ut*N)),z.classed("nv-active",function(e){return e.data.active==="active"}).classed("nv-inactive",function(e){return e.data.active==="inactive"}).attr("class",function(e){return _(e.data,e.data.series)}).attr("fill",function(e){return M(e.data,e.data.series)}),z.select("path").attr("d",at).style("stroke-opacity",function(e){return x(e)===T(e)?0:1}),l?(z.select(".nv-label").attr("transform",function(e){if(y){e.outerRadius=ut+10,e.innerRadius=ut+15;var t=(x(e)+T(e))/2*(180/Math.PI);return t+=90*dt(e,ft),"translate("+ft.centroid(e)+") rotate("+t+")"}var n=ft.centroid(e),r=c?(b+w)*dt(e,ft):0;return"translate("+[n[0]+r,n[1]]+")"}),z.select(".nv-label text").text(function(e){return pt(e)?s(e.data):""}).attr("dy",".35em").style("fill","#555").style("fill-opacity",pt).style("text-anchor",function(e){if(!h)return"middle";var t=dt(e,ft)===1?"start":"end";return A==="rtl"&&(t==="start"?"end":"start"),t}),z.each(function(t,n){if(L[n]>C||ot===C){var r=(x(t)+T(t))/2,i=Math.abs(Math.sin(r)),s=ot*i+b+w+L[n],o=u/2-it+u/2-s;if(o<0){var a=e.utils.stringEllipsify(t.data.key,E,L[n]+o);d3.select(this).select("text").text(a)}}}),h?c&&z.select(".nv-label-leader").attr("points",function(e){if(!pt(e))return"0,0";var t=d3.svg.arc().innerRadius(ut).outerRadius(ut).startAngle(x).endAngle(T),n=c?b*dt(e,t):0,r=t.centroid(e),i=ft.centroid(e),s=[i[0]+n,i[1]];return r+" "+i+" "+s}).style("stroke","#aaa").style("fill","none").style("stroke-opacity",pt):z.select(".nv-label").each(function(e){if(!pt(e))return;var t=d3.select(this),n=t.select("text").node().getBBox();t.select("rect").attr("rx",3).attr("ry",3).attr("width",n.width+10).attr("height",n.height+10).attr("transform",function(){return"translate("+[n.x-5,n.y-5]+")"}).style("fill","#fff").style("fill-opacity",pt)})):(z.select(".nv-label-leader").style("stroke-opacity",0),z.select(".nv-label rect").style("fill-opacity",0),z.select(".nv-label text").style("fill-opacity",0))}),P}var t={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(e){return e},s=function(e){return e.key},o=function(e){return e.value},u=function(e){return e.description},a=Math.floor(Math.random()*1e4),f=d3.format(",.2f"),l=!0,c=!0,h=!0,p=!0,d=.01,v=!1,m=!1,g=function(e,t){var n=e.selectAll(".nv-hole-container").data(t),r=n.enter().append("g").attr("class","nv-hole-container");r.append("text").text(t).attr("class","nv-pie-hole-value").attr("dy",".35em").attr("text-anchor","middle").style("font-size","50px"),n.exit().remove()},y=!1,b=20,w=5,E=360,S=0,x=function(e){return e.startAngle*E/360-S*Math.PI/180},T=function(e){return e.endAngle*E/360-S*Math.PI/180},N=.447,C=75,k=250,L=0,A="ltr",O=function(t,n){return e.utils.defaultColor()(t,t.series)},M=O,_=function(e,t){return"nv-slice nv-series-"+e.series},D=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return P.dispatch=D,P.color=function(e){return arguments.length?(O=e,P):O},P.fill=function(e){return arguments.length?(M=e,P):M},P.classes=function(e){return arguments.length?(_=e,P):_},P.gradient=function(e){return arguments.length?(gradient=e,P):gradient},P.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,P):t},P.width=function(e){return arguments.length?(n=e,P):n},P.height=function(e){return arguments.length?(r=e,P):r},P.values=function(e){return arguments.length?(i=e,P):i},P.x=function(e){return arguments.length?(s=e,P):s},P.y=function(e){return arguments.length?(o=d3.functor(e),P):o},P.description=function(e){return arguments.length?(u=e,P):u},P.showLabels=function(e){return arguments.length?(l=e,P):l},P.labelSunbeamLayout=function(e){return arguments.length?(y=e,P):y},P.donutLabelsOutside=function(e){return arguments.length?(p=e,P):p},P.pieLabelsOutside=function(e){return arguments.length?(h=e,P):h},P.showLeaders=function(e){return arguments.length?(c=e,P):c},P.donut=function(e){return arguments.length?(v=e,P):v},P.hole=function(e){return arguments.length?(m=e,P):m},P.holeFormat=function(e){return arguments.length?(g=d3.functor(e),P):g},P.donutRatio=function(e){return arguments.length?(N=e,P):N},P.startAngle=function(e){return arguments.length?(x=e,P):x},P.endAngle=function(e){return arguments.length?(T=e,P):T},P.id=function(e){return arguments.length?(a=e,P):a},P.valueFormat=function(e){return arguments.length?(f=e,P):f},P.labelThreshold=function(e){return arguments.length?(d=e,P):d},P.direction=function(e){return arguments.length?(A=e,P):A},P.arcDegrees=function(e){return arguments.length?(E=Math.max(Math.min(e,360),1),P):E},P.rotateDegrees=function(e){return arguments.length?(S=e%360,P):S},P.minRadius=function(e){return arguments.length?(C=e,P):C},P.maxRadius=function(e){return arguments.length?(k=e,P):k},P},e.models.pieChart=function(){function y(l){return l.each(function(l){function U(){w.select(".nvd3.nv-wrap").remove();var e=w.selectAll(".nv-noData").data([y.strings().noData]);e.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),e.attr("x",t.left+S/2).attr("y",t.top+x/2).text(function(e){return e})}var h=l.properties,b=l.data,w=d3.select(this),E=this,S=(n||parseInt(w.style("width"),10)||960)-t.left-t.right,x=(r||parseInt(w.style("height"),10)||400)-t.top-t.bottom,T=d3.sum(b.map(function(e){return e.value})),N=S,C=x,k={top:0,right:0,bottom:0,left:0};y.update=function(){w.transition().duration(a).call(y)},y.dataSeriesActivate=function(e){var t=e.point;t.active=!t.active||t.active==="inactive"?"active":"inactive",t.active==="active"&&b.filter(function(e){return e.active!=="active"}).map(function(e){return e.active="inactive",e}),b.filter(function(e){return e.active==="active"}).length||b.map(function(e){return e.active="",w.selectAll(".nv-series").classed("nv-inactive",!1),e}),w.call(y)},y.container=this;if(!b||!b.length)return U(),y;var L=b.map(function(e,t){return e.series=t,e.value||(e.disabled=!0),e}),A=d3.sum(L.filter(function(e,t){return!e.disabled}).map(function(e,t){return e.value}));c.disabled=L.map(function(e){return!!e.disabled});if(!A)return U(),y;w.selectAll(".nv-noData").remove();var O=w.selectAll("g.nv-wrap.nv-pieChart").data([L]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),_=O.select("g").attr("class","nv-chartWrap");M.append("rect").attr("class","nv-background").attr("x",-t.left).attr("y",-t.top).attr("fill","#FFF"),_.select(".nv-background").attr("width",S+t.left+t.right).attr("height",x+t.top+t.bottom),M.append("g").attr("class","nv-titleWrap");var D=_.select(".nv-titleWrap");M.append("g").attr("class","nv-pieWrap");var P=_.select(".nv-pieWrap");M.append("g").attr("class","nv-legendWrap");var H=_.select(".nv-legendWrap");O.attr("transform","translate("+t.left+","+t.top+")");var B={width:0,height:0};D.select(".nv-title").remove(),i&&h.title&&(D.append("text").attr("class","nv-title").attr("x",o==="rtl"?S:0).attr("y",0).attr("dy",".75em").attr("text-anchor","start").text(h.title).attr("stroke","none").attr("fill","black"),B=e.utils.getTextBBox(_.select(".nv-title")),k.top+=B.height+12);if(s){v.id("legend_"+y.id()).strings(y.strings().legend).align("center").height(x-k.top),H.datum(L).call(v),v.arrange(S);var j=e.utils.getTextBBox(H.select(".nv-legend-link")),F=S-B.width-6,I=i&&v.collapsed()&&F>j.width?!0:!1,q=o==="rtl"||!v.collapsed()?0:S-v.width(),R=B.height;I?R=B.height-v.height()/2-j.height/2:i||(R=-v.margin().top),H.attr("transform","translate("+q+","+R+")"),k.top+=I?0:v.height()-12}C=x-k.top-k.bottom,N=S-k.left-k.right,d.width(N).height(C),P.datum(L.filter(function(e){return!e.disabled})).attr("transform","translate("+k.left+","+k.top+")").transition().duration(a).call(d),v.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,d.values()(L).filter(function(e){return!e.disabled}).length||d.values()(b).map(function(e){return e.disabled=!1,O.selectAll(".nv-series").classed("disabled",!1),e}),c.disabled=L.map(function(e){return!!e.disabled}),p.stateChange(c),w.transition().duration(a).call(y)}),p.on("tooltipShow",function(e){f&&m(e,E.parentNode,T)}),p.on("tooltipMove",function(t){u&&e.tooltip.position(E.parentNode,u,t.pos)}),p.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),p.on("changeState",function(e){typeof e.disabled!="undefined"&&(L.forEach(function(t,n){t.disabled=e.disabled[n]}),c.disabled=e.disabled),w.transition().duration(a).call(y)}),p.on("chartClick",function(){p.tooltipHide(),v.enabled()&&v.dispatch.closeMenu()}),d.dispatch.on("elementClick",function(e){p.chartClick(),f&&m(e,E.parentNode,T),g(b,e,y)})}),y}var t={top:10,right:10,bottom:10,left:10},n=null,r=null,i=!1,s=!0,o="ltr",u=null,a=0,f=!0,l=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},c={},h={legend:{close:"Hide legend",open:"Show legend"},controls:{close:"Hide controls",open:"Show controls"},noData:"No Data Available."},p=d3.dispatch("chartClick","elementClick","tooltipShow","tooltipHide","tooltipMove","stateChange","changeState"),d=e.models.pie(),v=e.models.legend().align("center"),m=function(t,n,r){var i=t.pos[0],s=t.pos[1],o=(d.y()(t.point)*100/r).toFixed(1),a=d.valueFormat()(d.y()(t.point)),f=l(t.point.key,o,a,t,y);u=e.tooltip.show([i,s],f,null,null,n)},g=function(e,t,n){return};return d.dispatch.on("elementMouseover.tooltip",function(e){p.tooltipShow(e)}),d.dispatch.on("elementMousemove.tooltip",function(e){p.tooltipMove(e)}),d.dispatch.on("elementMouseout.tooltip",function(){p.tooltipHide()}),y.dispatch=p,y.pie=d,y.legend=v,d3.rebind(y,d,"id","x","y","color","fill","classes","gradient"),d3.rebind(y,d,"valueFormat","values","description","showLabels","showLeaders","donutLabelsOutside","pieLabelsOutside","labelThreshold"),d3.rebind(y,d,"arcDegrees","rotateDegrees","minRadius","maxRadius","startAngle","endAngle","donut","hole","holeFormat","donutRatio"),y.colorData=function(t){var n=arguments[0],r=arguments[1]||{},i=function(t,n){return e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-slice nv-series-"+e.series};switch(n){case"graduated":i=function(e,t){return d3.interpolateHsl(d3.rgb(r.c1),d3.rgb(r.c2))(e.series/r.l)};break;case"class":i=function(){return"inherit"},s=function(e,t){var n=e.series*(r.step||1)%14;return n=(n>9?"":"0")+n,"nv-slice nv-series-"+e.series+" nv-fill"+n};break;case"data":i=function(t,n){return t.classes?"inherit":t.color||e.utils.defaultColor()(t,t.series)},s=function(e,t){return"nv-slice nv-series-"+e.series+(e.classes?" "+e.classes:"")}}var o=r.gradient?function(e,t){return d.gradient(e,e.series)}:i;return d.color(i),d.fill(o),d.classes(s),v.color(i),v.classes(s),y},y.margin=function(e){if(!arguments.length)return t;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return y},y.width=function(e){return arguments.length?(n=e,y):n},y.height=function(e){return arguments.length?(r=e,y):r},y.showTitle=function(e){return arguments.length?(i=e,y):i},y.showLegend=function(e){return arguments.length?(s=e,y):s},y.tooltip=function(e){return arguments.length?(u=e,y):u},y.tooltips=function(e){return arguments.length?(f=e,y):f},y.tooltipContent=function(e){return arguments.length?(l=e,y):l},y.state=function(e){return arguments.length?(c=e,y):c},y.colorFill=function(e){return y},y.strings=function(e){if(!arguments.length)return h;for(var t in e)e.hasOwnProperty(t)&&(h[t]=e[t]);return y},y.seriesClick=function(e){return arguments.length?(g=e,y):g},y.direction=function(e){return arguments.length?(o=e,d.direction(e),v.direction(e),y):o},y}}(),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="0.9.10";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if(typeof n=="object")for(var i in n)e[t].apply(e,[i,n[i]].concat(r));else{if(!a.test(n))return!0;var s=n.split(a);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r))}},l=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},c=o.Events={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n),this},off:function(e,t,n){var r,i,s,o,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,l=o.length;a<l;a++){e=o[a];if(r=this._events[e]){s=[];if(t||n)for(c=0,h=r.length;c<h;c++)i=r[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&s.push(i);this._events[e]=s}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[i]=e,e.on(t,typeof t=="object"?this:n,this),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return;if(e)e.off(t,typeof t=="object"?this:n,this),!t&&!n&&delete r[e._listenerId];else{typeof t=="object"&&(n=this);for(var i in r)r[i].off(t,n,this);this._listeners={}}return this}};c.bind=c.on,c.unbind=c.off,u.extend(o,c);var h=o.Model=function(e,t){var n,r=e||{};this.cid=u.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};u.extend(h.prototype,c,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){if(!e.set(e.parse(n,r),r))return!1;t&&t(e,n,r)},this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o,a=this.attributes;return e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t,r&&(!n||!n.wait)&&!this.set(r,n)?!1:(n=u.extend({validate:!0},n),this._validate(r,n)?(r&&n.wait&&(this.attributes=u.extend({},a,r)),n.parse===void 0&&(n.parse=!0),i=n.success,n.success=function(e,t,n){e.attributes=a;var s=e.parse(t,n);n.wait&&(s=u.extend(r||{},s));if(u.isObject(s)&&!e.set(s,n))return!1;i&&i(e,t,n)},s=this.isNew()?"create":n.patch?"patch":"update",s==="patch"&&(n.attrs=r),o=this.sync(s,this,n),r&&n.wait&&(this.attributes=a),o):!1)},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(e,t,i){(i.wait||e.isNew())&&r(),n&&n(e,t,i)};if(this.isNew())return e.success(this,null,e),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||M();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,t||{}),!1):!0}});var p=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))};u.extend(p.prototype,c,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,i,o,a,f,l,c,h,p,d;c=[],h=t.at,p=this.comparator&&h==null&&t.sort!=0,d=u.isString(this.comparator)?this.comparator:null;for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(a=e[n],t))){this.trigger("invalid",this,a,t);continue}if(f=this.get(o)){t.merge&&(f.set(a===o?o.attributes:a,t),p&&!l&&f.hasChanged(d)&&(l=!0));continue}c.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o)}c.length&&(p&&(l=!0),this.length+=c.length,h!=null?s.apply(this.models,[h,0].concat(c)):r.apply(this.models,c)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=c.length;n<i;n++)(o=c[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])},at:function(e){return this.models[e]},where:function(e){return u.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},update:function(e,t){t=u.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var n,r,i,s,o=[],a=[],f={};u.isArray(e)||(e=e?[e]:[]);if(t.add&&!t.remove)return this.add(e,t);for(r=0,i=e.length;r<i;r++)n=e[r],s=this.get(n),t.remove&&s&&(f[s.cid]=!0),(t.add&&!s||t.merge&&s)&&o.push(n);if(t.remove)for(r=0,i=this.models.length;r<i;r++)n=this.models[r],f[n.cid]||a.push(n);return a.length&&this.remove(a,t),o.length&&this.add(o,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){var i=r.update?"update":"reset";e[i](n,r),t&&t(e,n,r)},this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)}});var d=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(d,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var v=["groupBy","countBy","sortBy"];u.each(v,function(e){p.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var m=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},g=/\((.*?)\)/g,y=/(\(\?)?:\w+/g,b=/\*\w+/g,w=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(m.prototype,c,{initialize:function(){},route:function(e,t,n){return u.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),o.history.route(e,u.bind(function(r){var i=this._extractParameters(e,r);n&&n.apply(this,i),this.trigger.apply(this,["route:"+t].concat(i)),this.trigger("route",t,i),o.history.trigger("route",this,t,i)},this)),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(w,"\\$&").replace(g,"(?:$1)?").replace(y,function(e,t){return t?e:"([^/]+)"}).replace(b,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var E=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},S=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,T=/msie [\w.]+/,N=/\/$/;E.started=!1,u.extend(E.prototype,c,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(N,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(S,"")},start:function(e){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=T.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(x,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(S,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!E.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new E;var C=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},k=/^(\S+)\s*(.*)$/,L=["model","collection","el","id","attributes","className","tagName","events"];u.extend(C.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(k),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,L)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}});var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.sync=function(e,t,n){var r=A[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||M()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1);var a=n.success;n.success=function(e){a&&a(t,e,n),t.trigger("sync",t,e,n)};var f=n.error;n.error=function(e){f&&f(t,e,n),t.trigger("error",t,e,n)};var l=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,l,n),l},o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var O=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};h.extend=p.extend=m.extend=C.extend=E.extend=O;var M=function(){throw new Error('A "url" property or function must be specified')}}.call(this),function(){var e={},t=this,n=t.async;typeof module!="undefined"&&module.exports?module.exports=e:t.async=e,e.noConflict=function(){return t.async=n,e};var r=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},i=function(e,t){if(e.map)return e.map(t);var n=[];return r(e,function(e,r,i){n.push(t(e,r,i))}),n},s=function(e,t,n){return e.reduce?e.reduce(t,n):(r(e,function(e,r,i){n=t(n,e,r,i)}),n)},o=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};typeof process=="undefined"||!process.nextTick?e.nextTick=function(e){setTimeout(e,0)}:e.nextTick=process.nextTick,e.forEach=function(e,t,n){n=n||function(){};if(!e.length)return n();var i=0;r(e,function(r){t(r,function(t){t?(n(t),n=function(){}):(i+=1,i===e.length&&n())})})},e.forEachSeries=function(e,t,n){n=n||function(){};if(!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r===e.length?n():i())})};i()},e.forEachLimit=function(e,t,n,r){r=r||function(){};if(!e.length||t<=0)return r();var i=0,s=0,o=0;(function u(){if(i===e.length)return r();while(o<t&&s<e.length)n(e[s],function(t){t?(r(t),r=function(){}):(i+=1,o-=1,i===e.length?r():u())}),s+=1,o+=1})()};var u=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.forEach].concat(n))}},a=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.forEachSeries].concat(n))}},f=function(e,t,n,r){var s=[];t=i(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,r){s[e.index]=r,t(n)})},function(e){r(e,s)})};e.map=u(f),e.mapSeries=a(f),e.reduce=function(t,n,r,i){e.forEachSeries(t,function(e,t){r(n,e,function(e,r){n=r,t(e)})},function(e){i(e,n)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(t,n,r,s){var o=i(t,function(e){return e}).reverse();e.reduce(o,n,r,s)},e.foldr=e.reduceRight;var l=function(e,t,n,r){var s=[];t=i(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&s.push(e),t()})},function(e){r(i(s.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.filter=u(l),e.filterSeries=a(l),e.select=e.filter,e.selectSeries=e.filterSeries;var c=function(e,t,n,r){var s=[];t=i(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||s.push(e),t()})},function(e){r(i(s.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.reject=u(c),e.rejectSeries=a(c);var h=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(e){r()})};e.detect=u(h),e.detectSeries=a(h),e.some=function(t,n,r){e.forEach(t,function(e,t){n(e,function(e){e&&(r(!0),r=function(){}),t()})},function(e){r(!1)})},e.any=e.some,e.every=function(t,n,r){e.forEach(t,function(e,t){n(e,function(e){e||(r(!1),r=function(){}),t()})},function(e){r(!0)})},e.all=e.every,e.sortBy=function(t,n,r){e.map(t,function(e,t){n(e,function(n,r){n?t(n):t(null,{value:e,criteria:r})})},function(e,t){if(e)return r(e);var n=function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0};r(null,i(t.sort(n),function(e){return e.value}))})},e.auto=function(e,t){t=t||function(){};var n=o(e);if(!n.length)return t(null);var i={},u=[],a=function(e){u.unshift(e)},f=function(e){for(var t=0;t<u.length;t+=1)if(u[t]===e){u.splice(t,1);return}},l=function(){r(u.slice(0),function(e){e()})};a(function(){o(i).length===n.length&&(t(null,i),t=function(){})}),r(n,function(n){var r=e[n]instanceof Function?[e[n]]:e[n],o=function(e){if(e)t(e),t=function(){};else{var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[n]=r,l()}},u=r.slice(0,Math.abs(r.length-1))||[],c=function(){return s(u,function(e,t){return e&&i.hasOwnProperty(t)},!0)};if(c())r[r.length-1](o,i);else{var h=function(){c()&&(f(h),r[r.length-1](o,i))};a(h)}})},e.waterfall=function(t,n){n=n||function(){};if(!t.length)return n();var r=function(t){return function(i){if(i)n(i),n=function(){};else{var s=Array.prototype.slice.call(arguments,1),o=t.next();o?s.push(r(o)):s.push(n),e.nextTick(function(){t.apply(null,s)})}}};r(e.iterator(t))()},e.parallel=function(t,n){n=n||function(){};if(t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.forEach(o(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}},e.series=function(t,n){n=n||function(){};if(t.constructor===Array)e.mapSeries(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.forEachSeries(o(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}},e.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},e.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var p=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};e.concat=u(p),e.concatSeries=a(p),e.whilst=function(t,n,r){t()?n(function(i){if(i)return r(i);e.whilst(t,n,r)}):r()},e.until=function(t,n,r){t()?r():n(function(i){if(i)return r(i);e.until(t,n,r)})},e.queue=function(t,n){var i=0,s={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(t,i){t.constructor!==Array&&(t=[t]),r(t,function(t){s.tasks.push({data:t,callback:typeof i=="function"?i:null}),s.saturated&&s.tasks.length==n&&s.saturated(),e.nextTick(s.process)})},process:function(){if(i<s.concurrency&&s.tasks.length){var e=s.tasks.shift();s.empty&&s.tasks.length==0&&s.empty(),i+=1,t(e.data,function(){i-=1,e.callback&&e.callback.apply(e,arguments),s.drain&&s.tasks.length+i==0&&s.drain(),s.process()})}},length:function(){return s.tasks.length},running:function(){return i}};return s};var d=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);typeof console!="undefined"&&(t?console.error&&console.error(t):console[e]&&r(n,function(t){console[e](t)}))}]))}};e.log=d("log"),e.dir=d("dir"),e.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),s=i.pop(),o=t.apply(null,i);o in n?s.apply(null,n[o]):o in r?r[o].push(s):(r[o]=[s],e.apply(null,i.concat([function(){n[o]=arguments;var e=r[o];delete r[o];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.unmemoized=e,i},e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}}();var Handlebars=function(){var e=function(){"use strict";function t(e){this.string=e}var e;return t.prototype.toString=function(){return""+this.string},e=t,e}(),t=function(e){"use strict";function o(e){return r[e]||"&amp;"}function u(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function c(e){return e instanceof n?e.toString():!e&&e!==0?"":(e=""+e,s.test(e)?e.replace(i,o):e)}function h(e){return!e&&e!==0?!0:l(e)&&e.length===0?!0:!1}var t={},n=e,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,s=/[&<>"'`]/;t.extend=u;var a=Object.prototype.toString;t.toString=a;var f=function(e){return typeof e=="function"};f(/x/)&&(f=function(e){return typeof e=="function"&&a.call(e)==="[object Function]"});var f;t.isFunction=f;var l=Array.isArray||function(e){return e&&typeof e=="object"?a.call(e)==="[object Array]":!1};return t.isArray=l,t.escapeExpression=c,t.isEmpty=h,t}(e),n=function(){"use strict";function n(e,n){var r;n&&n.firstLine&&(r=n.firstLine,e+=" - "+r+":"+n.firstColumn);var i=Error.prototype.constructor.call(this,e);for(var s=0;s<t.length;s++)this[t[s]]=i[t[s]];r&&(this.lineNumber=r,this.column=n.firstColumn)}var e,t=["description","fileName","lineNumber","message","name","number","stack"];return n.prototype=new Error,e=n,e}(),r=function(e,t){"use strict";function h(e,t){this.helpers=e||{},this.partials=t||{},p(this)}function p(e){e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new i("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse||function(){},i=n.fn;return f(t)&&(t=t.call(this)),t===!0?i(this):t===!1||t==null?r(this):a(t)?t.length>0?e.helpers.each(t,n):r(this):i(t)}),e.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse,i=0,s="",o;f(e)&&(e=e.call(this)),t.data&&(o=m(t.data));if(e&&typeof e=="object")if(a(e))for(var u=e.length;i<u;i++)o&&(o.index=i,o.first=i===0,o.last=i===e.length-1),s+=n(e[i],{data:o});else for(var l in e)e.hasOwnProperty(l)&&(o&&(o.key=l,o.index=i,o.first=i===0),s+=n(e[l],{data:o}),i++);return i===0&&(s=r(this)),s}),e.registerHelper("if",function(e,t){return f(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){f(e)&&(e=e.call(this));if(!r.isEmpty(e))return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})}function v(e,t){d.log(e,t)}var n={},r=e,i=t,s="1.3.0";n.VERSION=s;var o=4;n.COMPILER_REVISION=o;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=u;var a=r.isArray,f=r.isFunction,l=r.toString,c="[object Object]";n.HandlebarsEnvironment=h,h.prototype={constructor:h,logger:d,log:v,registerHelper:function(e,t,n){if(l.call(e)===c){if(n||t)throw new i("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){l.call(e)===c?r.extend(this.partials,e):this.partials[e]=t}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(d.level<=e){var n=d.methodMap[e];typeof console!="undefined"&&console[n]&&console[n].call(console,t)}}};n.logger=d,n.log=v;var m=function(e){var t={};return r.extend(t,e),t};return n.createFrame=m,n}(t,n),i=function(e,t,n){"use strict";function a(e){var t=e&&e[0]||1,n=o;if(t!==n){if(t<n){var r=u[n],i=u[t];throw new s("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new s("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function f(e,t){if(!t)throw new s("No environment passed to template");var n=function(e,n,r,i,o,u){var a=t.VM.invokePartial.apply(this,arguments);if(a!=null)return a;if(t.compile){var f={helpers:i,partials:o,data:u};return o[n]=t.compile(e,{data:u!==undefined},t),o[n](r,f)}throw new s("The partial "+n+" could not be compiled when running in runtime-only mode")},r={escapeExpression:i.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var r=this.programs[e];return n?r=c(e,t,n):r||(r=this.programs[e]=c(e,t)),r},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},i.extend(n,t),i.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var s=i.partial?i:t,o,u;i.partial||(o=i.helpers,u=i.partials);var a=e.call(r,s,n,o,u,i.data);return i.partial||t.VM.checkRevision(r.compilerInfo),a}}function l(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(r))};return i.program=e,i.depth=r.length,i}function c(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r}function h(e,t,n,r,i,o){var u={partial:!0,helpers:r,partials:i,data:o};if(e===undefined)throw new s("The partial "+t+" could not be found");if(e instanceof Function)return e(n,u)}function p(){return""}var r={},i=e,s=t,o=n.COMPILER_REVISION,u=n.REVISION_CHANGES;return r.checkRevision=a,r.template=f,r.programWithDepth=l,r.program=c,r.invokePartial=h,r.noop=p,r}(t,n,r),s=function(e,t,n,r,i){"use strict";var s,o=e,u=t,a=n,f=r,l=i,c=function(){var e=new o.HandlebarsEnvironment;return f.extend(e,o),e.SafeString=u,e.Exception=a,e.Utils=f,e.VM=l,e.template=function(t){return l.template(t,e)},e},h=c();return h.create=c,s=h,s}(r,e,n,t,i),o=function(e){"use strict";function r(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var t,n=e,i={ProgramNode:function(e,t,n,s){var o,u;arguments.length===3?(s=n,n=null):arguments.length===2&&(s=t,t=null),r.call(this,s),this.type="program",this.statements=e,this.strip={},n?(u=n[0],u?(o={first_line:u.firstLine,last_line:u.lastLine,last_column:u.lastColumn,first_column:u.firstColumn},this.inverse=new i.ProgramNode(n,t,o)):this.inverse=new i.ProgramNode(n,t),this.strip.right=t.left):t&&(this.strip.left=t.right)},MustacheNode:function(e,t,n,s,o){r.call(this,o),this.type="mustache",this.strip=s;if(n!=null&&n.charAt){var u=n.charAt(3)||n.charAt(2);this.escaped=u!=="{"&&u!=="&"}else this.escaped=!!n;e instanceof i.SexprNode?this.sexpr=e:this.sexpr=new i.SexprNode(e,t),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,n){r.call(this,n),this.type="sexpr",this.hash=t;var i=this.id=e[0],s=this.params=e.slice(1),o=this.eligibleHelper=i.isSimple;this.isHelper=o&&(s.length||t)},PartialNode:function(e,t,n,i){r.call(this,i),this.type="partial",this.partialName=e,this.context=t,this.strip=n},BlockNode:function(e,t,i,s,o){r.call(this,o);if(e.sexpr.id.original!==s.path.original)throw new n(e.sexpr.id.original+" doesn't match "+s.path.original,this);this.type="block",this.mustache=e,this.program=t,this.inverse=i,this.strip={left:e.strip.left,right:s.strip.right},(t||i).strip.left=e.strip.right,(i||t).strip.right=s.strip.left,i&&!t&&(this.isInverse=!0)},ContentNode:function(e,t){r.call(this,t),this.type="content",this.string=e},HashNode:function(e,t){r.call(this,t),this.type="hash",this.pairs=e},IdNode:function(e,t){r.call(this,t),this.type="ID";var i="",s=[],o=0;for(var u=0,a=e.length;u<a;u++){var f=e[u].part;i+=(e[u].separator||"")+f;if(f===".."||f==="."||f==="this"){if(s.length>0)throw new n("Invalid path: "+i,this);f===".."?o++:this.isScoped=!0}else s.push(f)}this.original=i,this.parts=s,this.string=s.join("."),this.depth=o,this.isSimple=e.length===1&&!this.isScoped&&o===0,this.stringModeValue=this.string},PartialNameNode:function(e,t){r.call(this,t),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,t){r.call(this,t),this.type="DATA",this.id=e},StringNode:function(e,t){r.call(this,t),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,t){r.call(this,t),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,t){r.call(this,t),this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},CommentNode:function(e,t){r.call(this,t),this.type="comment",this.comment=e}};return t=i,t}(n),u=function(){"use strict";var e,t=function(){function t(e,t){return{left:e.charAt(2)==="~",right:t.charAt(0)==="~"||t.charAt(1)==="~"}}function r(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(n,r,i,s,o,u,a){var f=u.length-1;switch(o){case 1:return new s.ProgramNode(u[f-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],u[f-1],u[f],this._$);break;case 4:this.$=new s.ProgramNode(u[f-2],u[f-1],u[f],this._$);break;case 5:this.$=new s.ProgramNode(u[f-1],u[f],[],this._$);break;case 6:this.$=new s.ProgramNode(u[f],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[u[f]];break;case 10:u[f-1].push(u[f]),this.$=u[f-1];break;case 11:this.$=new s.BlockNode(u[f-2],u[f-1].inverse,u[f-1],u[f],this._$);break;case 12:this.$=new s.BlockNode(u[f-2],u[f-1],u[f-1].inverse,u[f],this._$);break;case 13:this.$=u[f];break;case 14:this.$=u[f];break;case 15:this.$=new s.ContentNode(u[f],this._$);break;case 16:this.$=new s.CommentNode(u[f],this._$);break;case 17:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 18:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 19:this.$={path:u[f-1],strip:t(u[f-2],u[f])};break;case 20:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 21:this.$=new s.MustacheNode(u[f-1],null,u[f-2],t(u[f-2],u[f]),this._$);break;case 22:this.$=new s.PartialNode(u[f-2],u[f-1],t(u[f-3],u[f]),this._$);break;case 23:this.$=t(u[f-1],u[f]);break;case 24:this.$=new s.SexprNode([u[f-2]].concat(u[f-1]),u[f],this._$);break;case 25:this.$=new s.SexprNode([u[f]],null,this._$);break;case 26:this.$=u[f];break;case 27:this.$=new s.StringNode(u[f],this._$);break;case 28:this.$=new s.IntegerNode(u[f],this._$);break;case 29:this.$=new s.BooleanNode(u[f],this._$);break;case 30:this.$=u[f];break;case 31:u[f-1].isHelper=!0,this.$=u[f-1];break;case 32:this.$=new s.HashNode(u[f],this._$);break;case 33:this.$=[u[f-2],u[f]];break;case 34:this.$=new s.PartialNameNode(u[f],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(u[f],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(u[f],this._$));break;case 37:this.$=new s.DataNode(u[f],this._$);break;case 38:this.$=new s.IdNode(u[f],this._$);break;case 39:u[f-2].push({part:u[f],separator:u[f-1]}),this.$=u[f-2];break;case 40:this.$=[{part:u[f]}];break;case 43:this.$=[];break;case 44:u[f-1].push(u[f]);break;case 47:this.$=[u[f]];break;case 48:u[f-1].push(u[f])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){function s(e,t){return n.yytext=n.yytext.substr(e,n.yyleng-t)}var o=i;switch(r){case 0:n.yytext.slice(-2)==="\\\\"?(s(0,1),this.begin("mu")):n.yytext.slice(-1)==="\\"?(s(0,1),this.begin("emu")):this.begin("mu");if(n.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return n.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return n.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return n.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return e.lexer=n,r.prototype=e,e.Parser=r,new r}();return e=t,e}(),a=function(e,t){"use strict";function s(e){return e.constructor===i.ProgramNode?e:(r.yy=i,r.parse(e))}var n={},r=e,i=t;return n.parser=r,n.parse=s,n}(u,o),f=function(e){"use strict";function r(){}function i(e,t,r){if(e==null||typeof e!="string"&&e.constructor!==r.AST.ProgramNode)throw new n("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i=r.parse(e),s=(new r.Compiler).compile(i,t);return(new r.JavaScriptCompiler).compile(s,t)}function s(e,t,r){function s(){var n=r.parse(e),i=(new r.Compiler).compile(n,t),s=(new r.JavaScriptCompiler).compile(i,t,undefined,!0);return r.template(s)}if(e==null||typeof e!="string"&&e.constructor!==r.AST.ProgramNode)throw new n("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i;return function(e,t){return i||(i=s()),i.call(this,e,t)}}var t={},n=e;return t.Compiler=r,r.prototype={compiler:r,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.accept(e)},accept:function(e){var t=e.strip||{},n;return t.left&&this.opcode("strip"),n=this[e.type](e),t.right&&this.opcode("strip"),n},program:function(e){var t=e.statements;for(var n=0,r=t.length;n<r;n++)this.accept(t[n]);return this.isSimple=r===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=t.sexpr,s=this.classifySexpr(i);s==="helper"?this.helperSexpr(i,n,r):s==="simple"?(this.simpleSexpr(i),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(i,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?(r.depth&&this.addDepth(r.depth),this.opcode("getContext",r.depth||0),this.opcode("pushStringParam",r.stringModeValue,r.type),r.type==="sexpr"&&this.sexpr(r)):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleSexpr:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var i=this.setupFullMustacheParams(e,t,r),s=e.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new n("You specified knownHelpersOnly, but used the unknown helper "+s,e);this.opcode("invokeHelper",i.length,s,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);t==="simple"?this.simpleSexpr(e):t==="helper"?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0;if(e.id.isScoped||e.id.depth)throw new n("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");var t=e.id.parts;for(var r=0,i=t.length;r<i;r++)this.opcode("lookup",t[r])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),n.type==="sexpr"&&this.sexpr(n)):this[n.type](n)},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}},t.precompile=i,t.compile=s,t}(n),l=function(e,t){"use strict";function u(e){this.value=e}function a(){}var n,r=e.COMPILER_REVISION,i=e.REVISION_CHANGES,s=e.log,o=t;a.prototype={nameLookup:function(e,t){var n,r;return e.indexOf("depth")===0&&(n=!0),/^[0-9]+$/.test(t)?r=e+"["+t+"]":a.isValidJavaScriptVariableName(t)?r=e+"."+t:r=e+"['"+t+"']",n?"("+e+" && "+r+")":r},compilerInfo:function(){var e=r,t=i[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var i=e.opcodes,u;this.i=0;for(var a=i.length;this.i<a;this.i++)u=i[this.i],u.opcode==="DECLARE"?this[u.name]=u.value:this[u.opcode].apply(this,u.args),u.opcode!==this.stripNext&&(this.stripNext=!1);this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o("Compile completed with content left on stack");return this.createFunctionContext(r)},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,o=this.environment.depths.list.length;i<o;i++)r.push("depth"+this.environment.depths.list[i]);var u=this.mergeSource();this.isChild||(u=this.compilerInfo()+u);if(e)return r.push(u),Function.apply(this,r);var a="function "+(this.name||"")+"("+r.join(",")+") {\n  "+u+"}";return s("debug",a+"\n\n"),a},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];i.appendToBuffer?t?t=t+"\n    + "+i.content:t=i.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=i+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),t!=="sexpr"&&(typeof e=="string"?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var r=this.lastHelper=this.setupHelper(e,t,!0),i=this.nameLookup("depth"+this.lastContext,t,"context"),s="helper = "+r.name+" || "+i;r.paramsInit&&(s+=","+r.paramsInit),this.push("("+s+",helper "+"? helper.call("+r.callParams+") "+": helperMissing.call("+r.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+r+") { "+s+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+i+"; "+s+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n,r;this.options.stringParams&&(r=this.popStack(),n=this.popStack());var i=this.hash;n&&i.contexts.push("'"+e+"': "+n),r&&i.types.push("'"+e+"': "+r),i.values.push("'"+e+"': ("+t+")")},compiler:a,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return(n.length===0?"self.program(":"self.programWithDepth(")+i.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new u(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=undefined),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),r,i,s;if(n){var o=this.popStack(!0);if(o instanceof u)r=o.value,s=!0;else{i=!this.stackSlot;var a=i?this.incrStack():this.topStackName();t="("+this.push(a)+" = "+o+"),",r=this.topStack()}}else r=this.topStack();var f=e.call(this,r);return n?(s||this.popStack(),i&&this.stackSlot--,this.push("("+t+f+")")):(/^stack/.test(r)||(r=this.nextStack()),this.pushSource(r+" = ("+t+f+");")),r},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];r instanceof u?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof u)return n.value;if(!t){if(!this.stackSlot)throw new o("Invalid stack pop");this.stackSlot--}return n},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof u?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var r=[],i=this.setupParams(e,r,n),s=this.nameLookup("helpers",t,"helper");return{params:r,paramsInit:i,name:s,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupOptions:function(e,t){var n=[],r=[],i=[],s,o,u;n.push("hash:"+this.popStack()),this.options.stringParams&&(n.push("hashTypes:"+this.popStack()),n.push("hashContexts:"+this.popStack())),o=this.popStack(),u=this.popStack();if(u||o)u||(this.context.aliases.self="this",u="self.noop"),o||(this.context.aliases.self="this",o="self.noop"),n.push("inverse:"+o),n.push("fn:"+u);for(var a=0;a<e;a++)s=this.popStack(),t.push(s),this.options.stringParams&&(i.push(this.popStack()),r.push(this.popStack()));return this.options.stringParams&&(n.push("contexts:["+r.join(",")+"]"),n.push("types:["+i.join(",")+"]")),this.options.data&&n.push("data:data"),n},setupParams:function(e,t,n){var r="{"+this.setupOptions(e,t).join(",")+"}";return n?(this.useRegister("options"),t.push("options"),"options="+r):(t.push(r),"")}};var f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=a.RESERVED_WORDS={};for(var c=0,h=f.length;c<h;c++)l[f[c]]=!0;return a.isValidJavaScriptVariableName=function(e){return!a.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?!0:!1},n=a,n}(r,n),c=function(e,t,n,r,i){"use strict";var s,o=e,u=t,a=n.parser,f=n.parse,l=r.Compiler,c=r.compile,h=r.precompile,p=i,d=o.create,v=function(){var e=d();return e.compile=function(t,n){return c(t,n,e)},e.precompile=function(t,n){return h(t,n,e)},e.AST=u,e.Compiler=l,e.JavaScriptCompiler=p,e.Parser=a,e.parse=f,e};return o=v(),o.create=v,s=o,s}(s,o,a,f,l);return c}(),SUGAR=SUGAR||{};SUGAR.Api=function(){function l(e){var l,c,h,p,d,v,m,g,y,b=window.open,w=null,E=null,S=null,x=[],T={},N=0;h=e&&e.keyValueStore,l=e&&e.serverUrl||"/rest/v10",m=e&&e.defaultErrorHandler||null,c=e&&e.platform||"",p=e&&e.clientID||"sugar",d=(e&&e.timeout||30)*1e3,g=!1,y=!e||!e.disableBulkApi,e&&e.externalLoginUICallback&&_.isFunction(e.externalLoginUICallback)&&(b=e.externalLoginUICallback);if(h){if(!$.isFunction(h.set)||!$.isFunction(h.get)||!$.isFunction(h.cut))throw new Error("Failed to initialize Sugar API: key/value store provider is invalid");var C=function(){w=h.get("AuthAccessToken"),E=h.get("AuthRefreshToken"),S=h.get("DownloadToken")};$.isFunction(h.initAsync)?h.initAsync(C):C(),$.isFunction(h.on)&&h.on("cache:clean",function(e){e(["AuthAccessToken","AuthRefreshToken","DownloadToken"])})}v=!1,e&&e.reset&&(r=0);var k=function(e){e?(w=e.access_token,E=e.refresh_token,S=e.download_token,h&&(h.set("AuthAccessToken",w),h.set("AuthRefreshToken",E),h.set("DownloadToken",S))):(w=null,E=null,S=null,h&&(h.cut("AuthAccessToken"),h.cut("AuthRefreshToken"),h.cut("DownloadToken")))},L=function(e,t,n){return function(r,s,o){var a=new u(t,s,o),f=function(){if(x.length==0||e.refreshingToken(t.params.url))n.error?n.error(a):$.isFunction(e.defaultErrorHandler)&&e.defaultErrorHandler(a);else for(var r=0;r<x.length;++r)x[r]._oerror&&x[r]._oerror(a);e.setRefreshingToken(!1)},l,h=!0;if(e.needRefreshAuthToken(t.params.url,a.code)){if(t._dequeuing){t._oerror&&t._oerror(a),e.resetAuth();return}x.push(t),e.setRefreshingToken(!0),e.login(null,{refresh:!0},{complete:function(){if(h)while(l=x.shift())l._ocomplete&&l._ocomplete.call(this,l)},success:function(){h=!1,e.setRefreshingToken(!1),i(function(){while(l=x.shift())l._dequeuing=!0,l.execute(e.getOAuthToken())})},error:f})}else e.needQueue(t.params.url)?x.push(t):g&&a.status==401&&a.payload&&a.payload.url&&a.payload.platform==c?e.handleExternalLogin(a,f):f()}};return{clientID:p,serverUrl:l,defaultErrorHandler:m,timeout:d,debug:!1,abortRequest:function(e){var t=T[e];t&&(t.aborted=!0,t.xhr&&(t.xhr.aborted=!0,t.xhr.abort()))},getRequest:function(e){return T[e]},setRefreshTokenSuccessCallback:function(e){_.isFunction(e)&&(i=e)},call:function(e,n,r,i,o){var u,f,l=t[e],c=this,h=this.getOAuthToken();o=o||{},i=i||{};var p={type:l,dataType:"json",headers:{},timeout:o.timeout||this.timeout,contentType:"application/json"};o.url||(p.url=n),i.success&&(p.success=function(e,t){u.status=e&&e.status?e.status:t,i.success(e,u)}),p.complete=function(){T[u.uid]=null,!v&&i.complete&&i.complete(u)},o.iframe===!0?h&&(r=r||{},r["OAuth-Token"]=h,p.data=r):r&&(e=="create"||e=="update"||e=="delete")&&(p.data=JSON.stringify(r)),p.type!=="GET"&&(p.processData=!1),u=new a(_.extend(p,o),this.debug),p.error=L(c,u,i),u._oerror=i.error,u._ocomplete=i.complete,u.uid=N++,T[u.uid]=u,f=[h,o.skipMetadataHash?null:this.getMetadataHash(),o.skipMetadataHash?null:this.getUserprefHash()];if(this.isLoginRequest(n))u.execute();else if(this.isAuthRequest(n))u.execute(h);else if(p.bulk&&y){var d=s[p.bulk]||[];s[p.bulk]||(s[p.bulk]=d),d.push({request:u,args:f})}else u.execute.apply(u,f);return u},triggerBulkCall:function(e){if(!y)return;e=e||!0;var t=s[e],n=[],r=_.last(this.serverUrl.split("/"));if(!t)return;_.each(t,function(e){var t=e.request.params,i=e.args,s=i[0],o=i[1],u=i[2];s&&(t.headers=t.headers||{},t.headers["OAuth-Token"]=s),o&&(t.headers=t.headers||{},t.headers["X-Metadata-Hash"]=o),u&&(t.headers=t.headers||{},t.headers["X-Userpref-Hash"]=u),t.url!=""&&(t.url=r+t.url.substring(this.serverUrl.length)),n.push(t)},this),this.call("create",this.buildURL("bulk"),{requests:n},{success:function(e,n){_.each(t,function(t,r){var i=t.request,s=e[r],o=s.contents||{},u=new f(s,n),a;i.xhr=u,i.aborted===!0||o.error?(i.status="error",_.isFunction(i.params.error)&&i.params.error.call(i.params,i,"error",u.statusText)):_.isFunction(i.params.success)&&i.params.success.call(i.params,o,"success"),_.isFunction(i.params.complete)&&i.params.complete.call(i.params,i)})}}),s[e]=null},clearBulkQueue:function(){s={}},buildURL:function(e,t,r,i){i=i||{};var s=[],o;return s.push(this.serverUrl),e&&s.push(e),t!="create"&&r&&r.id&&s.push(r.id),r&&r.link&&t!="file"&&(s.push("link"),s.push(r.link)),t&&$.inArray(t,n)===-1&&s.push(t),r&&r.relatedId&&s.push(r.relatedId),r&&t=="file"&&r.field&&(s.push(r.field),r.fileId&&s.push(r.fileId)),i.filter&&t!=="export"&&s.push("filter"),o=s.join("/"),_.each(i,function(e,t){(e===null||e===undefined)&&delete i[t]}),i=$.param(i),i.length>0&&(o+="?"+i),o},buildFileURL:function(e,t){var n={};return t=t||{},e.field&&t.htmlJsonFormat!==!1&&(n.format="sugar-html-json"),t.deleteIfFails===!0&&(n.delete_if_fails=!0),t.passOAuthToken&&(n.oauth_token=this.getOAuthToken()),t.passDownloadToken&&(n.download_token=this.getDownloadToken()),_.isUndefined(t.forceDownload)||(n.force_download=t.forceDownload?1:0),t.cleanCache===!0&&(n[(new Date).getTime()]=1),t.platform!==undefined?n.platform=t.platform:c&&(n.platform=c),t.keep===!0&&(n.keep=1),this.buildURL(e.module,"file",e,n)},getOAuthToken:function(){return h?h.get("AuthAccessToken")||w:w},getRefreshToken:function(){return h?h.get("AuthRefreshToken")||E:E},getDownloadToken:function(){return h?h.get("DownloadToken")||S:S},getMetadataHash:function(){return h?h.get("meta:hash"):null},getUserprefHash:function(){return h?h.get("userpref:hash"):null},getMetadata:function(e,t,n,r,i){i=i||{};var s=i.params||{},o,u;return t&&(s.type_filter=t.join(",")),n&&(s.module_filter=n.join(",")),c&&(s.platform=c),o="read",i&&i.getPublic&&(o="public"),u=this.buildURL("metadata",o,null,s),this.call(o,u,null,r)},records:function(e,t,n,r,i,s){var o=this.buildURL(t,e,n,r);return this.call(e,o,n,i,s)},relationships:function(e,t,n,r,i,s){var o=this.buildURL(t,null,n,r);return this.call(e,o,n.related,i,s)},favorite:function(e,t,n,r,i){var s=n?"favorite":"unfavorite",o=this.buildURL(e,s,{id:t});return this.call("update",o,null,r,i)},follow:function(e,t,n,r,i){r=r||{},i=i||{};var s=n?"create":"delete",o=n?"subscribe":"unsubscribe",u=this.buildURL(e,o,{id:t});return this.call(s,u,null,r,i)},enumOptions:function(e,t,n,r){var i=this.buildURL(e+"/enum/"+t);return this.call("read",i,null,n,r)},bulk:function(e,t,n){var r=this.buildURL("bulk");return this.call("create",r,e,t,n)},fileDownload:function(e,t,n){n=n||{};var r={};return r.success=function(r){n.iframe?n.iframe.prepend('<iframe class="hide" src="'+e+'"></iframe>'):window.location.href=e,_.isFunction(t.success)&&t.success.apply(arguments)},_.isFunction(t.error)&&(r.error=t.error),_.isFunction(t.complete)&&(r.complete=t.complete),this.call("read",this.buildURL("ping"),{},r,{processData:!1})},file:function(e,t,n,r,i){var s={files:n,processData:!1};if(e==="delete")s.iframe=!1;else if(!i||i.iframe!==!1)s.iframe=!0,i=i||{},i.passOAuthToken=!0;if(!i||i.deleteIfFails!==!1)i=i||{},i.deleteIfFails=!0;return r.success=_.wrap(r.success,function(e,t,n){t.error&&_.isFunction(r.error)?r.error(t):_.isFunction(e)&&e(t)}),this.call(e,this.buildFileURL(t,i),null,r,s)},count:function(e,t,n,r){r=r||{};var i=this.buildURL(e,"count",t,r);return this.call("read",i,null,n)},exportRecords:function(e,t,n,r){var i=this,s=this.buildURL(e.module,"record_list");return r=r||{},this.call("create",s,{records:e.uid},{success:function(s){e=_.omit(e,["uid","module"]),r.platform!==undefined?e.platform=r.platform:c&&(e.platform=c),i.fileDownload(i.buildURL(s.module_name,"export",{relatedId:s.id},e),n,{iframe:t})}})},search:function(e,t,n){var r=this.buildURL(null,"search",null,e);return this.call("read",r,null,t,n)},login:function(e,t,n){var r,i,s,o,u;return e=e||{},n=n||{},i=function(e){k(e),n.success&&n.success(e)},s=function(e){k(),n.error&&n.error(e)},t&&t.refresh?r=_.extend({grant_type:"refresh_token",client_id:this.clientID,client_secret:"",refresh_token:this.getRefreshToken(),platform:c?c:"base"},t):(r=_.extend({grant_type:"password",username:e.username,password:e.password,client_id:this.clientID,platform:c?c:"base",client_secret:""},t),r.client_info=t),o="create",u=this.buildURL("oauth2","token",r,{platform:c}),this.call(o,u,r,{success:i,error:s,complete:n.complete})},me:function(e,t,n,r){var i=this.buildURL("me",e,t,n);return this.call(e,i,t,r)},css:function(e,t,n){var r={platform:e,themeName:t},i=this.buildURL("css","read",{},r);return this.call("read",i,{},n)},logout:function(e,t){e=e||{};var n={token:this.getOAuthToken()},r=this.buildURL("oauth2","logout",n),i=e.complete;return e.complete=function(){k(),i&&i()},this.call("create",r,n,e,t)},ping:function(e,t,n){return this.call("read",this.buildURL("ping",e,null,{platform:c}),null,t,_.extend({skipMetadataHash:!0},n||{}))},signup:function(e,t,n){var r=e;r.client_info=t;var i="create",s=this.buildURL("Leads","register",r);return this.call(i,s,r,n)},verifyPassword:function(e,t){var n={password_to_verify:e},r="create",i=this.buildURL("me/password",r);return this.call(r,i,n,t)},updatePassword:function(e,t,n){var r={new_password:t,old_password:e},i="update",s=this.buildURL("me/password",i);return this.call(i,s,r,n)},info:function(e){var t=this.buildURL("ServerInfo");return this.call("read",t,null,e)},isAuthenticated:function(){return typeof this.getOAuthToken()=="string"&&this.getOAuthToken().length>0},resetAuth:function(){k()},needRefreshAuthToken:function(e,t){return!v&&typeof this.getRefreshToken()=="string"&&this.getRefreshToken().length>0&&!this.isAuthRequest(e)&&t==="invalid_grant"},needQueue:function(e){return v&&!this.isAuthRequest(e)},isAuthRequest:function(e){return(new RegExp("/oauth2/")).test(e)},isLoginRequest:function(e){return(new RegExp("/oauth2/token")).test(e)},refreshingToken:function(e){return v&&this.isAuthRequest(e)},setRefreshingToken:function(e){v=e},handleExternalLogin:function(e,t){var n,r;self.isLoginRequest(request.params.url)||x.push(request),self.setRefreshingToken(!0),$(window).on("message",function(e){if(!e.originalEvent.origin||e.originalEvent.origin!=window.location.origin)return;$(window).on("message",null),r=$.parseJSON(e.originalEvent.data),(!r||!r.access_token)&&t(),self.setRefreshingToken(!1),k(r),i(function(){while(n=x.shift())n.execute(self.getOAuthToken())})}),b(e.payload.url,"_blank","width=600,height=400,centerscreen=1,resizable=1")},isExternalLogin:function(){return g},setExternalLogin:function(e){g=e},getStateProperty:function(e){return o[e]},setStateProperty:function(e,t){o[e]=t},clearStateProperty:function(e){delete o[e]},resetState:function(){o={}}}}var e,t={read:"GET",update:"PUT",create:"POST","delete":"DELETE"},n=["read","update","create","delete"],r=0,i=function(e){e()},s={},o={},u=function(e,t,n){e=e||{},e.xhr=e.xhr||{},this.request=e,this.status=e.xhr.status,this.responseText=e.xhr.responseText,this.textStatus=t,this.errorThrown=n;if(typeof this.responseText=="string"&&this.responseText.length>0)try{var r=this.request.xhr.getResponseHeader("Content-Type");r&&r.indexOf("application/json")===0&&(this.payload=JSON.parse(this.responseText),this.code=this.payload.error,this.message=this.payload.error_message)}catch(i){}};_.extend(u.prototype,{toString:function(){return"HTTP error: "+this.status+"\ntype: "+this.textStatus+"\nerror: "+this.errorThrown+"\nresponse: "+this.responseText+"\ncode: "+this.code+"\nmessage: "+this.message}});var a=function(e,t){this.params=e,this.debug=t,this.numExecuted=0,this.state={}};_.extend(a.prototype,{execute:function(e,t,n){e&&(this.params.headers=this.params.headers||{},this.params.headers["OAuth-Token"]=e),t&&(this.params.headers=this.params.headers||{},this.params.headers["X-Metadata-Hash"]=t),n&&(this.params.headers=this.params.headers||{},this.params.headers["X-Userpref-Hash"]=n),this.state=_.extend(this.state,o);if(this.debug){console.log("====== Ajax Request Begin ======"),console.log(this.params.type+" "+this.params.url);var i=this.params.data?JSON.parse(this.params.data):null;i&&i.password&&(i.password="***"),console.log("Payload: ",this.params.data?i:"N/A");var s=$.extend({},this.params);delete s.data,console.log("params: ",s),console.log("====== Request End ======")}if(this.numExecuted==0){var u=this.params.complete;this.params.complete=function(){r--,_.isFunction(u)&&u.apply(this,arguments)}}this.xhr=$.ajax(this.params),r++,this.numExecuted++}});var f=function(e,t){var n=e.contents||{};this.status=e.status||200,this.statusText=e.status_text||"",this.responseText=_.isObject(n)?JSON.stringify(n):n,this.readyState=4,this._parent=t.xhr,this.headers=e.headers};return _.extend(f.prototype,{isResolved:function(){return this._parent.isResolved()},getResponseHeader:function(e){return this.headers[e]},getAllResponseHeaders:function(){return _.reduce(this.headers,function(e,t,n){return e.concat(n+": "+t+"\n")},"")}}),{getInstance:function(t){return e||this.createInstance(t)},createInstance:function(t){return e=new l(t),e},getCallsInProgressCount:function(){return r},HttpError:u,HttpRequest:a}}(),function(e){function Q(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function G(e,t){return function(n){return st(e.call(this,n),t)}}function Y(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function Z(){}function et(e){gt(e),nt(this,e)}function tt(e){var t=ct(e),n=t.year||0,r=t.month||0,i=t.week||0,s=t.day||0,o=t.hour||0,u=t.minute||0,a=t.second||0,f=t.millisecond||0;this._milliseconds=+f+a*1e3+u*6e4+o*36e5,this._days=+s+i*7,this._months=+r+n*12,this._data={},this._bubble()}function nt(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function rt(e){var t={},n;for(n in e)e.hasOwnProperty(n)&&d.hasOwnProperty(n)&&(t[n]=e[n]);return t}function it(e){return e<0?Math.ceil(e):Math.floor(e)}function st(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function ot(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months,a,f;s&&e._d.setTime(+e._d+s*r);if(o||u)a=e.minute(),f=e.hour();o&&e.date(e.date()+o*r),u&&e.month(e.month()+u*r),s&&!i&&t.updateOffset(e);if(o||u)e.minute(a),e.hour(f)}function ut(e){return Object.prototype.toString.call(e)==="[object Array]"}function at(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function ft(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&pt(e[o])!==pt(t[o]))&&s++;return s+i}function lt(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=z[e]||W[t]||t}return e}function ct(e){var t={},n,r;for(r in e)e.hasOwnProperty(r)&&(n=lt(r),n&&(t[n]=e[r]));return t}function ht(n){var r,i;if(n.indexOf("week")===0)r=7,i="day";else{if(n.indexOf("month")!==0)return;r=12,i="month"}t[n]=function(s,o){var u,a,f=t.fn._lang[n],l=[];typeof s=="number"&&(o=s,s=e),a=function(e){var n=t().utc().set(i,e);return f.call(t.fn._lang,n,s||"")};if(o!=null)return a(o);for(u=0;u<r;u++)l.push(a(u));return l}}function pt(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function dt(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function vt(e){return mt(e)?366:365}function mt(e){return e%4===0&&e%100!==0||e%400===0}function gt(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[u]<0||e._a[u]>11?u:e._a[a]<1||e._a[a]>dt(e._a[o],e._a[u])?a:e._a[f]<0||e._a[f]>23?f:e._a[l]<0||e._a[l]>59?l:e._a[c]<0||e._a[c]>59?c:e._a[h]<0||e._a[h]>999?h:-1,e._pf._overflowDayOfYear&&(t<o||t>a)&&(t=a),e._pf.overflow=t)}function yt(e){return e._isValid==null&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&e._pf.charsLeftOver===0&&e._pf.unusedTokens.length===0)),e._isValid}function bt(e){return e?e.toLowerCase().replace("_","-"):e}function wt(e,n){return n._isUTC?t(e).zone(n._offset||0):t(e).local()}function Et(e,t){return t.abbr=e,p[e]||(p[e]=new Z),p[e].set(t),p[e]}function St(e){delete p[e]}function xt(e){var n=0,r,i,s,o,u=function(e){if(!p[e]&&v)try{require("./lang/"+e)}catch(t){}return p[e]};if(!e)return t.fn._lang;if(!ut(e)){i=u(e);if(i)return i;e=[e]}while(n<e.length){o=bt(e[n]).split("-"),r=o.length,s=bt(e[n+1]),s=s?s.split("-"):null;while(r>0){i=u(o.slice(0,r).join("-"));if(i)return i;if(s&&s.length>=r&&ft(o,s,!0)>=r-1)break;r--}n++}return t.fn._lang}function Tt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Nt(e){var t=e.match(b),n,r;for(n=0,r=t.length;n<r;n++)J[t[n]]?t[n]=J[t[n]]:t[n]=Tt(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function Ct(e,t){return e.isValid()?(t=kt(t,e.lang()),X[t]||(X[t]=Nt(t)),X[t](e)):e.lang().invalidDate()}function kt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;w.lastIndex=0;while(n>=0&&w.test(e))e=e.replace(w,r),w.lastIndex=0,n-=1;return e}function Lt(e,t){var n,r=t._strict;switch(e){case"DDDD":return _;case"YYYY":case"GGGG":case"gggg":return r?D:x;case"Y":case"G":case"g":return H;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?P:T;case"S":if(r)return O;case"SS":if(r)return M;case"SSS":if(r)return _;case"DDD":return S;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return C;case"a":case"A":return xt(t._l)._meridiemParse;case"X":return A;case"Z":case"ZZ":return k;case"T":return L;case"SSSS":return N;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?M:E;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return E;default:return n=new RegExp(Bt(Ht(e.replace("\\","")),"i")),n}}function At(e){e=e||"";var t=e.match(k)||[],n=t[t.length-1]||[],r=(n+"").match(q)||["-",0,0],i=+(r[1]*60)+pt(r[2]);return r[0]==="+"?-i:i}function Ot(e,t,n){var r,i=n._a;switch(e){case"M":case"MM":t!=null&&(i[u]=pt(t)-1);break;case"MMM":case"MMMM":r=xt(n._l).monthsParse(t),r!=null?i[u]=r:n._pf.invalidMonth=t;break;case"D":case"DD":t!=null&&(i[a]=pt(t));break;case"DDD":case"DDDD":t!=null&&(n._dayOfYear=pt(t));break;case"YY":i[o]=pt(t)+(pt(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":i[o]=pt(t);break;case"a":case"A":n._isPm=xt(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":i[f]=pt(t);break;case"m":case"mm":i[l]=pt(t);break;case"s":case"ss":i[c]=pt(t);break;case"S":case"SS":case"SSS":case"SSSS":i[h]=pt(("0."+t)*1e3);break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=At(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function Mt(e){var n,r,i=[],s,c,h,p,d,v,m,g;if(e._d)return;s=Dt(e),e._w&&e._a[a]==null&&e._a[u]==null&&(h=function(n){var r=parseInt(n,10);return n?n.length<3?r>68?1900+r:2e3+r:r:e._a[o]==null?t().weekYear():e._a[o]},p=e._w,p.GG!=null||p.W!=null||p.E!=null?d=Vt(h(p.GG),p.W||1,p.E,4,1):(v=xt(e._l),m=p.d!=null?Ut(p.d,v):p.e!=null?parseInt(p.e,10)+v._week.dow:0,g=parseInt(p.w,10)||1,p.d!=null&&m<v._week.dow&&g++,d=Vt(h(p.gg),g,m,v._week.doy,v._week.dow)),e._a[o]=d.year,e._dayOfYear=d.dayOfYear),e._dayOfYear&&(c=e._a[o]==null?s[o]:e._a[o],e._dayOfYear>vt(c)&&(e._pf._overflowDayOfYear=!0),r=Rt(c,0,e._dayOfYear),e._a[u]=r.getUTCMonth(),e._a[a]=r.getUTCDate());for(n=0;n<3&&e._a[n]==null;++n)e._a[n]=i[n]=s[n];for(;n<7;n++)e._a[n]=i[n]=e._a[n]==null?n===2?1:0:e._a[n];i[f]+=pt((e._tzm||0)/60),i[l]+=pt((e._tzm||0)%60),e._d=(e._useUTC?Rt:qt).apply(null,i)}function _t(e){var t;if(e._d)return;t=ct(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],Mt(e)}function Dt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Pt(e){e._a=[],e._pf.empty=!0;var t=xt(e._l),n=""+e._i,r,i,s,o,u,a=n.length,l=0;s=kt(e._f,t).match(b)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(Lt(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&e._pf.unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),l+=i.length),J[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),Ot(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=a-l,n.length>0&&e._pf.unusedInput.push(n),e._isPm&&e._a[f]<12&&(e._a[f]+=12),e._isPm===!1&&e._a[f]===12&&(e._a[f]=0),Mt(e),gt(e)}function Ht(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Bt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function jt(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=nt({},e),t._pf=Q(),t._f=e._f[i],Pt(t);if(!yt(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}nt(e,n||t)}function Ft(e){var t,n,r=e._i,i=B.exec(r);if(i){e._pf.iso=!0;for(t=0,n=F.length;t<n;t++)if(F[t][1].exec(r)){e._f=F[t][0]+(i[6]||" ");break}for(t=0,n=I.length;t<n;t++)if(I[t][1].exec(r)){e._f+=I[t][0];break}r.match(k)&&(e._f+="Z"),Pt(e)}else e._d=new Date(r)}function It(t){var n=t._i,r=m.exec(n);n===e?t._d=new Date:r?t._d=new Date(+r[1]):typeof n=="string"?Ft(t):ut(n)?(t._a=n.slice(0),Mt(t)):at(n)?t._d=new Date(+n):typeof n=="object"?_t(t):t._d=new Date(n)}function qt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function Rt(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Ut(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function zt(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Wt(e,t,n){var r=i(Math.abs(e)/1e3),s=i(r/60),o=i(s/60),u=i(o/24),a=i(u/365),f=r<45&&["s",r]||s===1&&["m"]||s<45&&["mm",s]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",i(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,zt.apply({},f)}function Xt(e,n,r){var i=r-n,s=r-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=t(e).add("d",s),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function Vt(e,t,n,r,i){var s=Rt(e,0,1).getUTCDay(),o,u;return n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:vt(e-1)+u}}function $t(e){var n=e._i,r=e._f;return n===null?t.invalid({nullInput:!0}):(typeof n=="string"&&(e._i=n=xt().preparse(n)),t.isMoment(n)?(e=rt(n),e._d=new Date(+n._d)):r?ut(r)?jt(e):Pt(e):It(e),new et(e))}function Jt(e,n){t.fn[e]=t.fn[e+"s"]=function(e){var r=this._isUTC?"UTC":"";return e!=null?(this._d["set"+r+n](e),t.updateOffset(this),this):this._d["get"+r+n]()}}function Kt(e){t.duration.fn[e]=function(){return this._data[e]}}function Qt(e,n){t.duration.fn["as"+e]=function(){return+this/n}}function Gt(e){var n=!1,i=t;if(typeof ender!="undefined")return;e?(r.moment=function(){return!n&&console&&console.warn&&(n=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),i.apply(null,arguments)},nt(r.moment,i)):r.moment=t}var t,n="2.5.1",r=this,i=Math.round,s,o=0,u=1,a=2,f=3,l=4,c=5,h=6,p={},d={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},v=typeof module!="undefined"&&module.exports&&typeof require!="undefined",m=/^\/?Date\((\-?\d+)/i,g=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,y=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,b=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,w=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,E=/\d\d?/,S=/\d{1,3}/,x=/\d{1,4}/,T=/[+\-]?\d{1,6}/,N=/\d+/,C=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,k=/Z|[\+\-]\d\d:?\d\d/gi,L=/T/i,A=/[\+\-]?\d+(\.\d{1,3})?/,O=/\d/,M=/\d\d/,_=/\d{3}/,D=/\d{4}/,P=/[+-]?\d{6}/,H=/[+-]?\d+/,B=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,j="YYYY-MM-DDTHH:mm:ssZ",F=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],I=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],q=/([\+\-]|\d\d)/gi,R="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),U={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},z={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},W={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},X={},V="DDD w W M D d".split(" "),$="M D H h m s w W".split(" "),J={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return st(this.year()%100,2)},YYYY:function(){return st(this.year(),4)},YYYYY:function(){return st(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+st(Math.abs(e),6)},gg:function(){return st(this.weekYear()%100,2)},gggg:function(){return st(this.weekYear(),4)},ggggg:function(){return st(this.weekYear(),5)},GG:function(){return st(this.isoWeekYear()%100,2)},GGGG:function(){return st(this.isoWeekYear(),4)},GGGGG:function(){return st(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return pt(this.milliseconds()/100)},SS:function(){return st(pt(this.milliseconds()/10),2)},SSS:function(){return st(this.milliseconds(),3)},SSSS:function(){return st(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+st(pt(e/60),2)+":"+st(pt(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+st(pt(e/60),2)+st(pt(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},K=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];while(V.length)s=V.pop(),J[s+"o"]=Y(J[s],s);while($.length)s=$.pop(),J[s+s]=G(J[s],2);J.DDDD=G(J.DDD,3),nt(Z.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var n,r,i;this._monthsParse||(this._monthsParse=[]);for(n=0;n<12;n++){this._monthsParse[n]||(r=t.utc([2e3,n]),i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i"));if(this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var n,r,i;this._weekdaysParse||(this._weekdaysParse=[]);for(n=0;n<7;n++){this._weekdaysParse[n]||(r=t([2e3,1]).day(n),i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[n].test(e))return n}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n=="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return Xt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),t=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=r,s._strict=i,s._isUTC=!1,s._pf=Q(),$t(s)},t.utc=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=t,s._f=n,s._strict=i,s._pf=Q(),$t(s).utc()},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=e,i=null,s,o,u;return t.isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(r={},n?r[n]=e:r.milliseconds=e):(i=g.exec(e))?(s=i[1]==="-"?-1:1,r={y:0,d:pt(i[a])*s,h:pt(i[f])*s,m:pt(i[l])*s,s:pt(i[c])*s,ms:pt(i[h])*s}):!(i=y.exec(e))||(s=i[1]==="-"?-1:1,u=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s},r={y:u(i[2]),M:u(i[3]),d:u(i[4]),h:u(i[5]),m:u(i[6]),s:u(i[7]),w:u(i[8])}),o=new tt(r),t.isDuration(e)&&e.hasOwnProperty("_lang")&&(o._lang=e._lang),o},t.version=n,t.defaultFormat=j,t.updateOffset=function(){},t.lang=function(e,n){var r;return e?(n?Et(bt(e),n):n===null?(St(e),e="en"):p[e]||xt(e),r=t.duration.fn._lang=t.fn._lang=xt(e),r._abbr):t.fn._lang._abbr},t.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),xt(e)},t.isMoment=function(e){return e instanceof et||e!=null&&e.hasOwnProperty("_isAMomentObject")},t.isDuration=function(e){return e instanceof tt};for(s=K.length-1;s>=0;--s)ht(K[s]);t.normalizeUnits=function(e){return lt(e)},t.invalid=function(e){var n=t.utc(NaN);return e!=null?nt(n._pf,e):n._pf.userInvalidated=!0,n},t.parseZone=function(e){return t(e).parseZone()},nt(t.fn=et.prototype,{clone:function(){return t(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=t(this).utc();return 0<e.year()&&e.year()<=9999?Ct(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Ct(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return yt(this)},isDSTShifted:function(){return this._a?this.isValid()&&ft(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray())>0:!1},parsingFlags:function(){return nt({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var n=Ct(this,e||t.defaultFormat);return this.lang().postformat(n)},add:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),ot(this,r,1),this},subtract:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),ot(this,r,-1),this},diff:function(e,n,r){var i=wt(e,this),s=(this.zone()-i.zone())*6e4,o,u;return n=lt(n),n==="year"||n==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),u+=(this-t(this).startOf("month")-(i-t(i).startOf("month")))/o,u-=(this.zone()-t(this).startOf("month").zone()-(i.zone()-t(i).startOf("month").zone()))*6e4/o,n==="year"&&(u/=12)):(o=this-i,u=n==="second"?o/1e3:n==="minute"?o/6e4:n==="hour"?o/36e5:n==="day"?(o-s)/864e5:n==="week"?(o-s)/6048e5:o),r?u:it(u)},from:function(e,n){return t.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(){var e=wt(t(),this).startOf("day"),n=this.diff(e,"days",!0),r=n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(r,this))},isLeapYear:function(){return mt(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Ut(e,this.lang()),this.add({d:e-t})):t},month:function(e){var n=this._isUTC?"UTC":"",r;if(e!=null){if(typeof e=="string"){e=this.lang().monthsParse(e);if(typeof e!="number")return this}return r=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(r,this.daysInMonth())),t.updateOffset(this),this}return this._d["get"+n+"Month"]()},startOf:function(e){e=lt(e);switch(e){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),this},endOf:function(e){return e=lt(e),this.startOf(e).add(e==="isoWeek"?"week":e,1).subtract("ms",1)},isAfter:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)>+t(e).startOf(n)},isBefore:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)<+t(e).startOf(n)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+wt(e,this).startOf(t)},min:function(e){return e=t.apply(null,arguments),e<this?this:e},max:function(e){return e=t.apply(null,arguments),e>this?this:e},zone:function(e){var n=this._offset||0;return e==null?this._isUTC?n:this._d.getTimezoneOffset():(typeof e=="string"&&(e=At(e)),Math.abs(e)<16&&(e*=60),this._offset=e,this._isUTC=!0,n!==e&&ot(this,t.duration(n-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e?e=t(e).zone():e=0,(this.zone()-e)%60===0},daysInMonth:function(){return dt(this.year(),this.month())},dayOfYear:function(e){var n=i((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return e==null?n:this.add("d",e-n)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(e){var t=Xt(this,this.lang()._week.dow,this.lang()._week.doy).year;return e==null?t:this.add("y",e-t)},isoWeekYear:function(e){var t=Xt(this,1,4).year;return e==null?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return e==null?t:this.add("d",(e-t)*7)},isoWeek:function(e){var t=Xt(this,1,4).week;return e==null?t:this.add("d",(e-t)*7)},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return e==null?t:this.add("d",e-t)},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=lt(e),this[e]()},set:function(e,t){return e=lt(e),typeof this[e]=="function"&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=xt(t),this)}});for(s=0;s<R.length;s++)Jt(R[s].toLowerCase().replace(/s$/,""),R[s]);Jt("year","FullYear"),t.fn.days=t.fn.day,t.fn.months=t.fn.month,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.fn.toJSON=t.fn.toISOString,nt(t.duration.fn=tt.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u;r.milliseconds=e%1e3,i=it(e/1e3),r.seconds=i%60,s=it(i/60),r.minutes=s%60,o=it(s/60),r.hours=o%24,t+=it(o/24),r.days=t%30,n+=it(t/30),r.months=n%12,u=it(n/12),r.years=u},weeks:function(){return it(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+pt(this._months/12)*31536e6},humanize:function(e){var t=+this,n=Wt(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,n){var r=t.duration(e,n);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(e,n){var r=t.duration(e,n);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(e){return e=lt(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=lt(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:t.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}});for(s in U)U.hasOwnProperty(s)&&(Qt(s,U[s]),Kt(s.toLowerCase()));Qt("Weeks",6048e5),t.duration.fn.asMonths=function(){return(+this-this.years()*31536e6)/2592e6+this.years()*12},t.lang("en",{ordinal:function(e){var t=e%10,n=pt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),v?(module.exports=t,Gt(!0)):typeof define=="function"&&define.amd?define("moment",function(n,r,i){return i.config&&i.config()&&i.config().noGlobal!==!0&&Gt(i.config().noGlobal===e),t}):Gt()}.call(this)
/*
     YUI 3.15.0 (build 834026e)
     Copyright 2014 Yahoo! Inc. All rights reserved.
     Licensed under the BSD License.
     http://yuilibrary.com/license/
     */
YUI.add('datasource-get',function(Y,NAME){var DSGet=function(){DSGet.superclass.constructor.apply(this,arguments);};Y.DataSource.Get=Y.extend(DSGet,Y.DataSource.Local,{_defRequestFn:function(e){var uri=this.get("source"),get=this.get("get"),guid=Y.guid().replace(/\-/g,'_'),generateRequest=this.get("generateRequestCallback"),payload=e.details[0],self=this;this._last=guid;YUI.Env.DataSource.callbacks[guid]=function(response){delete YUI.Env.DataSource.callbacks[guid];delete Y.DataSource.Local.transactions[e.tId];var process=self.get('asyncMode')!=="ignoreStaleResponses"||self._last===guid;if(process){payload.data=response;self.fire("data",payload);}else{}};uri+=e.request+generateRequest.call(this,guid);Y.DataSource.Local.transactions[e.tId]=get.script(uri,{autopurge:true,onFailure:function(o){delete YUI.Env.DataSource.callbacks[guid];delete Y.DataSource.Local.transactions[e.tId];payload.error=new Error(o.msg||"Script node data failure");self.fire("data",payload);},onTimeout:function(o){delete YUI.Env.DataSource.callbacks[guid];delete Y.DataSource.Local.transactions[e.tId];payload.error=new Error(o.msg||"Script node data timeout");self.fire("data",payload);}});return e.tId;},_generateRequest:function(guid){return"&"+this.get("scriptCallbackParam")+"=YUI.Env.DataSource.callbacks."+guid;}},{NAME:"dataSourceGet",ATTRS:{get:{value:Y.Get,cloneDefaultValue:false},asyncMode:{value:"allowAll"},scriptCallbackParam:{value:"callback"},generateRequestCallback:{value:function(){return this._generateRequest.apply(this,arguments);}}}});YUI.namespace("Env.DataSource.callbacks");},'3.15.0',{"requires":["datasource-local","get"]});